{"doi":"10.1109\/EDTC.1995.470424","coreId":"69871","oai":"oai:eprints.lancs.ac.uk:20517","identifiers":["oai:eprints.lancs.ac.uk:20517","10.1109\/EDTC.1995.470424"],"title":"A design-for-test structure for optimising analogue and mixed signal IC test","authors":["Bratt, Adrian","Richardson, A. M. D.","Harvey, Russell","Dorey, A. P."],"enrichments":{"references":[{"id":16337213,"title":"A Design for Test Methodology for Active Analogue Filters&quot;","authors":[],"date":"1990","doi":"10.1109\/test.1990.114017","raw":"Mani Soma &quot;A Design for Test Methodology for Active Analogue Filters&quot; Intemational Test Conference, pp 183-  192, Washington, October 1990.","cites":null},{"id":16337222,"title":"AnalogueDigital ASIC Design for Testability&quot;","authors":[],"date":"1989","doi":"10.1109\/41.19072","raw":"P.P Fasang &quot;AnalogueDigital ASIC Design for Testability&quot; IEEE Transactions on Industrial Electronics, vo1.36,  No. 2, May 1989, pp219-226.","cites":null},{"id":16337238,"title":"Authorized licensed use limited to:","authors":[],"date":null,"doi":null,"raw":"Authorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.","cites":null},{"id":16337190,"title":"Bruls \u201cAnalogue Fault Simulation based on Layout Dependent Defect Models\u201d, paper 27.2","authors":[],"date":null,"doi":"10.1109\/test.1994.528009","raw":"R J Harvey, A M Richardson, K Baker & E Bruls \u201cAnalogue Fault Simulation based on Layout Dependent Defect Models\u201d, paper 27.2 pp. 641-650, International Test Conference Oct 1994, Washington DC . 4. Authorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.5. 6.. 7. 8. 9. 10. 11. 12. 13. 14. 15. 16.","cites":null},{"id":16337187,"title":"Concurrency, circuitry fosters testability\u201d","authors":[],"date":"1991","doi":null,"raw":"1.  M.C  Markowitz \u201cConcurrency,  circuitry fosters testability\u201d EDN June 6, 1991. p.65-74 2.  M. Sachdev \u201cCatastrophic Defect Oriented Testability Analysis of a Class AB  amplifier\u201d, Proceedings of Defect and Fault Tolerance in VLSI Systems, pp. 319-326, Oct. 1993.","cites":null},{"id":16337229,"title":"Design for Testability for Mixed AnalogueDigital ASICs&quot;","authors":[],"date":"1988","doi":"10.1109\/cicc.1988.20881","raw":"P.P. Fasang &quot;Design for Testability for Mixed AnalogueDigital ASICs&quot; Proc. IEEE 1988 Custom Integrated Circuits Conference, pp 16.5.1-16.5.4, 1988.","cites":null},{"id":16337225,"title":"Design for Testability of AnalogueLDigital Networks&quot;","authors":[],"date":"1989","doi":null,"raw":"K.D. Wagner &quot;Design for Testability of AnalogueLDigital Networks&quot; IEEE Transactions on Industrial Electronics, vol. 36, No. 2, May 1989, pp227-230.","cites":null},{"id":16337194,"title":"DeYong &quot;IDD Pulse Response Testing of Analogue and","authors":[],"date":"1993","doi":"10.1049\/el:19931405","raw":"J Beasley, H Ramamurthy, J Ramirez-Angulo & M DeYong &quot;IDD Pulse Response Testing of Analogue and Digital CMOS Circuits&quot; Intemational Test Conference, paper 31.1, pp275-285, Baltimore, October 1993.","cites":null},{"id":16337200,"title":"Iddq testing because &quot;zero defects isn't enough&quot; -a philips perspective&quot;","authors":[],"date":"1990","doi":"10.1109\/test.1990.114025","raw":"K Baker & B Verhelst &quot;Iddq testing because &quot;zero defects isn't enough&quot; -a philips perspective&quot; Intemational Test Conference, paper 11.2, p 253, Washington, October 1990.","cites":null},{"id":16337235,"title":"Rapid reliability assessment of VLSICs&quot;","authors":[],"date":"1990","doi":"10.1007\/978-1-4613-0587-3","raw":"19.  A P Dorey,  B K Jones, A M  Richardson & Y Z Xu &quot;Rapid reliability assessment of VLSICs&quot; Plenum ISBN 0-306-43492X, 1990.","cites":null},{"id":16337202,"title":"Reliability Benefits of Iddq&quot;","authors":[],"date":"1992","doi":"10.1007\/978-1-4615-3146-3_4","raw":"S  D McEuen &quot;Reliability Benefits of Iddq&quot; Joumal of Electronic Testing: Theory & Applications, pp 41-49, 1992.","cites":null},{"id":16337209,"title":"Reliability Indicators&quot;","authors":[],"date":"1992","doi":null,"raw":"A. M. D. Richardson and A. P. Dorey &quot;Reliability Indicators&quot; ESREF,  Schwabisch Gmund, Germany, paper 12.1, pp 277-285, 54th October 1992.","cites":null},{"id":16337218,"title":"Rueda & D.Vazquez &quot;Improving the Testability of Switched-Capacitor Filters&quot; Analogue Integrated Circuits and Signal Processing,","authors":[],"date":"1993","doi":"10.1007\/bf01239074","raw":"J.L. Huertas, A. Rueda & D.Vazquez &quot;Improving the Testability of Switched-Capacitor Filters&quot; Analogue Integrated Circuits and Signal Processing, Vo1.4, No.3, Nov 1993, pp199-213.","cites":null},{"id":16337233,"title":"Santo-Zamik & A Biasizzo &quot;Enhancing Design for Test for Active Analogue Filters&quot; Analogue Integrated Circuits and Signal Processing,","authors":[],"date":"1993","doi":"10.1007\/bf01239075","raw":"17.  F Novac, I Mozetic, M Santo-Zamik & A Biasizzo &quot;Enhancing Design for Test for Active Analogue Filters&quot; Analogue Integrated Circuits and Signal Processing, Vo1.4, No.3, pp231-244, Nov  1993, E Flaherty, A Allan & J Morris &quot;Design for Testability of a modular, Mixed Signal Family of  VLSI Devices&quot; Intemational Test Conference, paper 37.2, pp797-804, Baltimore, October 1993. 18.","cites":null},{"id":16337207,"title":"Supply Current Monitoring in CMOS Circuits for Reliability Prediction and Test&quot; Quality and Reliability Engineering Intemational, Vol8,","authors":[],"date":null,"doi":"10.1002\/qre.4680080606","raw":"A. M. D. Richardson and A. P. Dorey &quot;Supply Current Monitoring in CMOS Circuits for Reliability Prediction and Test&quot; Quality and Reliability Engineering Intemational, Vol8, pp 543-548,1992.","cites":null},{"id":16337196,"title":"Testing Analogue Circuits by Power Supply Control&quot;","authors":[],"date":"1994","doi":"10.1049\/el:19940123","raw":"A. Khari, A.H. Bratt, & A.P. Dorey &quot;Testing Analogue Circuits by Power Supply Control&quot;  Electronic Letters - Vol30, No 3, pp214-215, February 1994.","cites":null},{"id":16337192,"title":"Very-Low-Voltage Testing for weak CMOS Logic IC's&quot;","authors":[],"date":"1993","doi":"10.1109\/test.1993.470686","raw":"H Hao & E McCluskey &quot;Very-Low-Voltage  Testing for weak CMOS Logic IC's&quot; Intemational Test Conference, paper 14.1, pp275-285, Baltimore, October 1993.","cites":null},{"id":16337188,"title":"Yield Simulation for Integrated Circuits\u201d","authors":[],"date":"1983","doi":"10.1007\/978-1-4757-1931-4","raw":"3.  H. Walker & S. W. Director, \u201cYield Simulation for Integrated Circuits\u201d IEEE. Int. Conf. on CAD. Digest of  Technical Papers), Sept. 1983 pp. 256-257.","cites":null}],"documentType":{"type":1}},"contributors":[],"datePublished":"1995-03","abstract":"A new Design-for-Test (DfT) structure based on a configurable operational amplifier, referred to as a \u201cswap amp\u201d is presented that allows access to embedded analogue blocks. The structure has minimal impact on circuit performance and has been evaluated on a custom designed Phase Locked Loop (PLL) structure. A test chip containing faulty and fault free versions of this PLL structure, with and without DfT modifications, has been fabricated and an evaluation of this DfT scheme based on the swap-amp structure carried out. It is shown that for embedded analogue blocks, the DfT strategy can not only improve and simplify analogue and mixed signal IC test, but can also be used for diagnostics","downloadUrl":"https:\/\/core.ac.uk\/download\/pdf\/69871.pdf","fullTextIdentifier":"http:\/\/eprints.lancs.ac.uk\/20517\/1\/20517.pdf","pdfHashValue":"867717287b8c9c2a61c15a2eb34eca96c16b7932","publisher":"IEEE","rawRecordXml":"<record><header><identifier>\n    \n    \n      oai:eprints.lancs.ac.uk:20517<\/identifier><datestamp>\n      2018-01-04T02:39:13Z<\/datestamp><setSpec>\n      7374617475733D707562<\/setSpec><setSpec>\n      7375626A656374733D54:5441<\/setSpec><setSpec>\n      74797065733D626F6F6B5F73656374696F6E<\/setSpec><\/header><metadata><oai_dc:dc xmlns:oai_dc=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/\" xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/ http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc.xsd\" ><dc:title>\n    \n      \n        A design-for-test structure for optimising analogue and mixed signal IC test<\/dc:title><dc:creator>\n        Bratt, Adrian<\/dc:creator><dc:creator>\n        Richardson, A. M. D.<\/dc:creator><dc:creator>\n        Harvey, Russell<\/dc:creator><dc:creator>\n        Dorey, A. P.<\/dc:creator><dc:subject>\n        TA Engineering (General). Civil engineering (General)<\/dc:subject><dc:description>\n        A new Design-for-Test (DfT) structure based on a configurable operational amplifier, referred to as a \u201cswap amp\u201d is presented that allows access to embedded analogue blocks. The structure has minimal impact on circuit performance and has been evaluated on a custom designed Phase Locked Loop (PLL) structure. A test chip containing faulty and fault free versions of this PLL structure, with and without DfT modifications, has been fabricated and an evaluation of this DfT scheme based on the swap-amp structure carried out. It is shown that for embedded analogue blocks, the DfT strategy can not only improve and simplify analogue and mixed signal IC test, but can also be used for diagnostics.<\/dc:description><dc:publisher>\n        IEEE<\/dc:publisher><dc:date>\n        1995-03<\/dc:date><dc:type>\n        Contribution in Book\/Report\/Proceedings<\/dc:type><dc:type>\n        NonPeerReviewed<\/dc:type><dc:format>\n        application\/pdf<\/dc:format><dc:identifier>\n        http:\/\/eprints.lancs.ac.uk\/20517\/1\/20517.pdf<\/dc:identifier><dc:relation>\n        http:\/\/dx.doi.org\/10.1109\/EDTC.1995.470424<\/dc:relation><dc:identifier>\n        Bratt, Adrian and Richardson, A. M. D. and Harvey, Russell and Dorey, A. P. (1995) A design-for-test structure for optimising analogue and mixed signal IC test. In: European Design and Test Conference. IEEE, pp. 24-33.<\/dc:identifier><dc:relation>\n        http:\/\/eprints.lancs.ac.uk\/20517\/<\/dc:relation><\/oai_dc:dc><\/metadata><\/record>","journals":null,"language":{"code":"en","id":9,"name":"English"},"relations":["http:\/\/dx.doi.org\/10.1109\/EDTC.1995.470424","http:\/\/eprints.lancs.ac.uk\/20517\/"],"year":1995,"topics":["TA Engineering (General). Civil engineering (General)"],"subject":["Contribution in Book\/Report\/Proceedings","NonPeerReviewed"],"fullText":"A Design-For-Test Structure for Optimising Analogue and Mixed Signal IC Test \nA.H. Bratt, A.M.D. Richardson, R.J.A. Harvey, & A.P. Dorey \nDepartment of Engineering, University of Lancaster, Lancaster, LA 1 4YR, UK. \nAbstract \nA new Design-for-Test (DjT) structure based on a \nconfigurable operational amplijier, referred to as a \u201cswap \namp\u201d is presented that allows access to embedded \nanalogue blocks. The structure has minimal impact on \ncircuit performance and has been evaluated on a custom \ndesigned Phase Locked Loop (PLL) structure. A test chip \ncontaining faulty and fault free versions of this PLL \nstructure, with and without DjT modifications, has been \nfabricated and an evaluation of this DjT scheme based on \nthe swap-amp structure carried out. It is shown that for \nembedded analogue blocks, the DjT strategy can not only \nimprove and simplify analogue & mixed signal IC test, but \ncan also be used for diagnostics. \nsimple to implement and the problem of backdriving is \ntotally eliminated. Application of the Df f  scheme to a \nphase-locked-loop circuit is presented. The scheme is \nshown to greatly improve both detection and diagnostic \ncapabilities associated with a number of hard and soft \nfaults. The format of the paper will be as follows; Section \n2 will identify related work, sections 3 and 4 will then \ndiscuss critical issues in the design of an analogue Dff  \narchitecture and identifies the optimal placement of \nswitches. Section 5 will describe the design of the swap- \namp and present an analysis of its performance. In section \n6, a Dff scheme exploiting the \u201cswap-amp\u2019\u2019 design is \ndiscussed and in section 7 the test chip fabricated to access \nthe fault detection and diagnostic capabilities of the \nscheme is described. Section 8 will present results from \nthe silicon and section 9 will conclude and discuss future \nwork. \n1. Introduction \n2. Background \nDevelopments in processing technology and circuit \ndesign have drastically reduced the problems associated \nwith manufacturing complex mixed-signal and analogue \nIC\u2018s. These problems have however not all been solved \nand as with digital VLSI in the ~ O \u2019 S ,  testing is once again \nbecoming the major obstacle to advances in integration \ncomplexity. Testability is mainly an issue of control and \nobservation of deeply embedded internal nodes [I]  which \nin the digital domain, has been addressed by numerous \nDff  and Built-in-self-test (BIST) techniques to ensure that \na design can be adequately tested. In the analogue world, \nthe introduction of control voltages within a design is not a \ntrivial matter since the effects of capacitive and resistive \nloading due to the switch can seriously compromise the \nperformance of a finely tuned analogue design. This paper \nreports on the implementation of a Design-for-Test (Dff) \nphilosophy which allows injection of control voltages \nusing an operational amplifier with a configurable internal \narchitecture. Bandwidth performance loss is shown to be \ngreatly reduced compared with more traditional \napproaches with an area overhead of approximately 5% for \neach modified operational amplifier. The Dff  scheme is \nThe problems related to testing mixed signal and \nanalogue IC\u2019s are numerous and include fault modelling \nand simulation, test generation, test time and complexity as \nwell as the difficulties associated with obtaining access to \nembedded analogue blocks. The push towards high \nreliability and low ppm defect levels has generated interest \nin realistic layout dependent defect models [2-41 and novel \ntest methodologies. These can improve the fault coverage \nover that achieved using standard functional production \ntests at minimal cost and implementation complexity [4- \n111. \nTest access and analogue Dff  has been discussed by a \nnumber of authors [12-161 but has been limited to \nensuring that the correct internal nodes are routed to \ndedicated test pins and that the problem of test is \nconsidered early in the design process. A Dff  \nmethodology for active analogue filters was proposed in \n[12] and an extension to enable fault isolation and \ndiagnostics carried out in [17]. A novel technique for \nswitched capacitor implementations based on a \nprogrammable biquad filter has been developed [ 131. This \n24 \n1066-1409\/95 $4.00 0 1995 IEEE \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\ntechnique is probably better referred to as an analogue \nBuilt-in Self Test (BIST) methodology as the DfT circuitry \nprovides a facility for on-line test of the biquad filters. \nCommercial implementation of analogue DfT strategies \nhas not been widely published, however an interesting \nmethodology based on extending a digital SCAN \narchitecture to provide an Analogue BIST capability has \nbeen investigated [ 181. Analogue \n, .  , . . .  . .  , Block0 ......... Block1 ......... i Block 2 j i i I i . .  . .  . .  3. Design Partitioning \n- \nDesigners deliberately introduce hierarchy into designs \nand fragment each hierarchic level into a number of blocks \nto make designs more manageable. In order to simplify the \ntesting of an analogue or mixed signal circuit, it is \nnecessary to partition the circuit at either the schematic \nlevel of the design hierarchy or preferably at the layout \n\\ \n\\ c 4 \nl b  - \nP E  \nN \n1 1  4 \nI \nU \nT \nS \nU \nFig. 1. Basic circuit partitioning or \n\"fragmentation\" \nlevel. At the schematic level it is usually convenient to \nexploit the hierarchial partitioning introduced during the \ndesign process, but for optimal test generation, partitioning \nat the layout level to minimise interconnect between circuit \npartitions may well be desirable, especially if defect \noriented test strategies are to be used [4]. One problematic \nissue relating to partitioning is that of feedback paths. This \ninherent feature of many analogue designs tends to resist \nattempts to treat a design on a block by block basis. In a \ncomplex design these paths must usually be broken to \nallow the testing procedure to begin. \n4. DfI' Strategies \n4.1 Invasive Access Strategies \nFig. 2. shows a method which could be used to break \nconnections between two analogue blocks and insert a \ncontrol voltage. The switches in this diagram are \ncontrolled by a number of D-type flip-flops which are \nloaded serially. Both control and observation of internal \nanalogue voltage levels is achieved by an appropriate \nconfiguration of the test bus. In the domain of analogue \nTest Bus. I n  \ncircuit design it is not a trivial matter to break feedback \nloops by inserting switches in metalised track connections, \nshown shaded in Fig. 2. The series resistance of even a \nvery wide (e.g. aspect ratio 1OO:l )  CMOS transistor is \nseveral orders of magnitude greater than the resistance of \nthe metal track. Capacitance of the switch is also usually \nmany times higher than that of the metal track. \nThe effective resistance of a MOSFET operating in the \nlinear region, with only a few mV of voltage difference \nbetween its source and drain may be expressed as; \nRos = -(VG.s- L VT) - l  \nK W  \nwhere RDS is the drain to source resistance, W and L are \nthe FET width and length respectively, K' is the \ntransconductance parameter, VGS is the gate-source \nvoltage drop and VT is the threshold voltage (including \nany body effect). \nIncreasing the width, W, of the MOSFET will reduce \nthe series resistance. However, the parasitic capacitance is \napproximately proportional to the product of width and \nlength. The increase in parasitic loading capacitance will \ndetermine a maximum aspect ratio for the switch in a \ngiven application. The area used must also be taken into \naccount, this effectively also sets a limit to the maximum \naspect ratio. It should also be noted that the RC product \nfor the switch has an approximate value of RoCoL , \nwhere RO and CO are arbitrary constants. Assuming that \nthe length L is minimal (and so fixed), no amount of \nscaling by altering the width of the switch will change the \nRC product. \nIdeally, a circuit element introduced for testing \npurposes should have little impact on even a sensitive \n2 \n25 \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\nnode (i.e. low drive power with possibly heavy load) and \nshould in all cases have the absolute minimal impact on \nperformance. However, breaking connections in test mode \nin some manner is normally essential to achieve both \nsatisfactory testability and minimal test cost. \n- Analogue i - \nBlock0 i \n4.2 Direct Drive Access Strategies \nAnalogue - Analogue - \nBlock 1 Block 2 \nOne possible solution to avoid the series resistance of \nthe MOSFET switches is simply to leave them out. Fig. 3 \nshows a modified version of Fig. 2 were the switching in \nthe signal paths has been removed. Backdriving into the \nprevious output stage is a serious problem here if there is \nlest  Bus. I n  \nDigital Control Path \nClk \nFig. 3. Direct Drive into an Internal Circuit Node \nan attempt to force a nodal voltage via the test bus. Large \ncurrents causing local heating and electrical stress as well \nas the inevitable degradation of the test signal can also be \nexpected. It can be concluded that breaking electrical \nconnections during test mode is problematic, but a brute \nforce attack is certainly worse. \n4.3 Switching in small signal paths \nIntegrating the switching function in small signal paths \nof a circuit will considerably reduce the effects of parasitic \ncapacitance and resistance of the inserted switch. The \nsmall voltage swings seen (typically a few mV) mean that \nthe current required to charge and discharge the parasitic \ncapacitors is small and settling times are consequently \nshort. Choosing a sensible place for switch insertion, as for \nM8 in Fig. 4 ensures that only a few uAs  of current flows \nthrough the switch during even the largest output voltage \nswing, hence the effects of the switch resistance are small. \nThis strategy forms the basis of the \"swap-amp'' Dff \nstructure that will be described in the remainder of this \npaper. \n5. Swap-amp design \nFig. 5. shows a schematic diagram of the swap-amp \nwhich forms the basic structure behind the Dff  philosophy \nFig. 4. The insertion of the switch M8 in the small \nsignal path reduces the impact on circuit \nperformance \npresented. This amplifier has two input stages which are \ninterchangeable using the external signal TEST and its \ncomplement T E S T .  When TEST is low, switch S2 \nconducts and the amplifier is configured into its \"normal\" \nmode. When TEST is high, SI  conducts and the hardwired \nunity gain \"test\" input stage can then be used to propagate \na voltage applied at input vector to the output. Two \nfeatures of this scheme should be noted; First, the \nswitching is done in small signal paths rather than large \nsignal paths. This has the low-loading effects outlined \npreviously. Second, the aspect ratios of the transistors in \nthe test mode input stage can be made minimum sized \nsince the common mode range and bandwidth \nrequirements of the \"test\" input stage is generally much \nless than that of the \"normal\" input stage. As a minor \nbenefit, the need for complimentary pass transistors is \neliminated since the DC voltage level either side of the \nswitches S I  and S2 is close to the positive power rail at all \ntimes. \nIt should also be noted that no mention has been made of \nthe feedback configuration of the swap-amp. Provided the \n\"test\" input stage has sufficient performance to ensure -\nPI \nI\\ \n- \ns2 CI \n--o \nout \nb v +  \n1 . 1  1 \nbias I N 1  \nFig. 5. Basic swap-amp structure \nstability and the output stage has sufficient drive to \novercome the feedback network, the actual feedback \n26 \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\nconfiguration is of little consequence. This is a powerful \nfeature of this Dff strategy. \n5.1 Loading effect analysis. \nFor this analysis the swap-amp \"normal\" input stage is \nconfigured into unity gain mode, and a parallel load of \nlOpF and l O O w Z  is applied to the output (Fig. 6a). The \nMiller capacitor C1 has a value of 4.68pF in both cases. A \nvoltage step of OV to +lV rising in lps is applied to the \ninputs during non-test mode. Switch MS is minimum sized \n(3pm by 3pm). As a second experiment the switch is \nmoved so that it is in the large signal path between load \nand output node, shown in Fig. 6c. \nIOOK a: \nM3 M4 MS \nCl \n4- a b) lOOK M 6  \nM3 M4 M5 \n. \nM6 \nL \n1WK 0 lOpF \nI I 9 \nFig. 6. Versions of the op-amp to be analysed. \nversion (a) has the switch inserted in the small \nsignal path, (b) ) no switch inserted (c switch \ninserted in the large signal path \nAlso shown in Fig. 6b is the same amplifier but with no \nswitches present. Fig. 7 shows a HSPICE simulation of the \noutput voltages of the three amplifiers as the voltage step \nis applied. No obvious difference can be detected between \nthe swap-amp and the non-switched amplifier plots but the \naction of the switch in the large signal path is obvious by \nits effect as a resistive divider in conjunction with the \n100m load and by a reduction in slew rate. Performing \nthe necessary switching action within the small signal path \nshows obvious advantages in that bandwidth loss is greatly \n1 \nLegend \n- - . ~e,rges~gnalsw~tsh - - - Non modified Opamp \n0 Swap amp \nz \n2 0 4  \na \n0 2  .  \nO I  \nI \n1 2 1.5 2.5 \nTime (S). x 1 0 4  \n0.5 \n-0.2) \nFig. 7 HSPICE results for the circuits in Fig. 6 \nreduced and resistive dividers are not formed. The \ndisadvantage is that small signal paths are not always \nabundant within designs in general and location of \nswitches may become problematic. This is discussed in the \nnext section. \n6.  Analogue DfT Scheme \nThe majority of analogue designs use analogue blocks \nwith an operational amplifier driving the output node \ndirectly. This observation may be used to great effect in \nthe implementation of a Dff philosophy. As mentioned in \nthe previous section, it is possible to build an operational \namplifier whose output voltage may easily be controlled in \na test mode. The basis of this DfT strategy is that the \ncontrollable output of one block may be used to provide a \nset of voltage test vectors for a subsequent block. Fig. 8 \nshows how this is done. \n\/ \"  \n\/ \nConaol Bus. \ni , n  Observe Bus. Test Vector Path - I I 1 \ni l  \ni B l o c k 2  \n: .  \n: \n.......... : ;  ............ \n, .  \nI W  DO DI Digital Control Path. \nClk \nSwao-amo in test mode. \nFig &-The DfT strategy showing both access and \nobservability features \n27 \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\nThis strategy also has the added benefit that inserting \nswap-amps into output node drivers is a sound idea from \nthe point of view of design partitioning. In many \napplications, testability will be vastly improved by \ninserting a single additional access point into a design. \nHowever, monitoring the output of embedded blocks may \nin many cases be essential for optimal fault coverage. This \nis achieved by the use of analogue switches that place \nadditional load on the output node. This will inevitably \nlead to a reduction in test mode performance over normal \noperation due to the reasons discussed previously. \nHowever, in non-test mode the effect of the observation \nswitches is only to add a small parasitic capacitance to the \noutput node of a block since all the observe switches are \nturned off. Hence performance loss in non-test mode is \nminimal and in practice it will often be possible to select a \ntest output point that will be insensitive to this additional \nload. \n7. PLL Test Circuit \nThe basic structure for the evaluation of the DfT \nphilosophy described above is shown in Fig. 9. The \nreasons for choosing this structure are: \nI , I  1 I \nI \nI \nI \nI Test  c o n t r o l  b u s  \nFig. 9 PLL structure with DfT control \n1 .  The PLL structure presents major testing problems due \nto the global feedback which makes isolation of cause \nand effect within the loop difficult. It also tends to \nmask soft faults [19] which may cause later problems \ndue to reliability hazards or small functional changes \nwith temperature. \n2. Three of the four blocks have operational amplifier \noutput nodes. \n3. AC testing is necessary in addition to the usual DC \ntesting to verify some of the circuit blocks such as the \nVCO and the loop filter [4]. \nA photograph of the fabricated chip is shown in Fig. 10. \nThe test chip consists of two fault free versions of the PLL \nstructure, one with the DfT modifications and one with no \nFig 10. Test chip containing both faulty and fault \nfree PLL circuits, with and without the DfT \nstructures \nDfT features. In addition, 4 copies of the Dff structure \nhave been fabricated, each with a different defect inserted \nas described below. This enables performance evaluation \non the DfT structures to be carried out against the non DfT \nstructures and an assessment of the improvement in the \nfault detection capabilities to be made for each of the \ndefects inserted. The device has been fabricated using the \nanalogue 2.4pm double metal, double polysilicon Mietec \nprocess. The floorplan of the device is shown below. \nFig 11. Floorplan of the test chip \n28 \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\n7.1 Inserted Defects \nThe following defects have been designed into the \nreplicated faulty versions of the PLL with integrated Dff  \ncircuitry. \n7.1.1. Hard Faults PLL (circuits 3 & 4) \nTwo of the defective PLL circuits have had hard defects \ndesigned in. The first has a stuck-at-0 fault in the feedback \nloop as shown in Fig 12. Additional metal simulating a \ni vss : , I  ; +;? , \n:... .............. \nvrefn s w a p - a m p  out  \ntest A Y  \nvector 2 \nFig. 12. S-A-0 short in feedback loop (circuit 3) \nspot defect was introduced onto the layout. The second \ndefective circuit has again had additional metal defined, \nbut this time over the 4Kn resistor snake in the multiplier \nblock (Fig 13). \n............... \nI r l i  vdd \ni t  1 \nvector \nFig. 13. Resistor shorted in 4 quadrant multiplier \n(circuit 4) \n7.1.2. Soft Faults PLL (circuits 5 & 6) \nThe third defective PLL circuit has an oxide short as \nshown in Fig.14 fabricated in as a resistor snake in the \nloop filter. The 2nd soft fault fabricated into the fourth \ndefective PLL circuit is a gate to source short in a P-FET \nin the VCO block \n15.6pF \noxide  short  \nR should be  53K \n\\ \nvrefn \ntest \nV ' o u t  \nvector 1 \nFig. 14. Resistor snake shorted using a via to \nsimulate gate oxide short in the loop filter block - \n(circuit 5) \n7 \" O u t  \nFig. 15 - Gate-drain short in the VCO block. \n8. Silicon results \n10 sample chips were received from Mietec each of \nwhich contained a non-Dff PLL (circuit 1), a DfT PLL \n(circuit 2) and four Dff  PLLs with faults designed in \n(circuits 3-6). Of these, 6 non-Dff and 8 Dff  PLL circuit \nfunctioned. Non-functioning circuits had large DC offsets \nat the output node and were screened out on this basis. \nA number of tests are available to evaluate the \nperformance of a PLL such as DC offset, frequency \ncapture range, frequency hold range, gain and locking \ntime. A good initial test to use after the initial DC offset \ntest is the frequency capture range of the PLL since this is \napproximately given by; \nwhere K d  is the gain of the four-quadrant multiplier block \nin VoltsRadian, KO is the gain of the VCO in \nRadiandsecond Volt, A is the gain of the loop amplifier \n(V\/V), y is the input signal frequency, U,,, is the VCO \n29 \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\ncentre frequency and IFu(y - Q,~J])I is the amplitude \nresponse of the loop filter at the difference frequencies (mi \n-w,,,). The frequency capture range thus includes elements \nof the transfer functions of all the major blocks of the PLL \nwithin one test. This is not true of either gain or hold \nrange, neither of which are sensitive to the loop amplifier \nbandwidth. \nFigure 16 shows a histogram of the frequency capture \nrange of the non-DfT and Dff  PLLs. Because of the small \nsample size it is difficult to draw firm conclusions but it is \nintuitively obvious that no major discrepancy exists \nbetween the two data sets. Both the average and spread of \nthe two data sets is comparable. \nIf now the frequency capture range of the PLLs with the \nVCO output short are added to Fig. 16, shown in Fig. 17, \nthen it is immediately apparent that there is a large shift in \nthe faulty data set average compared with the previous \ntwo. This shift may be easily explained in that the \namplitude of one of the VCO outputs is reduced by the \nNumber of \ncircuits \n0 Non-DfT fault free i [ DfT fault free \n375 100 425 450 415 500 \nFrequency ( K H z )  \nFig. 16 - Capture range measurements on all \nfunctional samples of both the fault free PLL and \nPLL circuits with DfT \nNumber of \ncircuits 0 Non-DfT fault free \n1 D ~ T  fault free \n~ \n0 D ~ T  faulty circuit 4 ( V C O  output) \n150 300 350 400 \nFrequency ( K H z )  \n450 500 \nFig 17 - Capture range for the DfT, non-DfT \nand faulty (circuit 4) versions of the PLL for \nall working samples \npresence of the short circuit (see later). This has the \noverall effect of reducing the gain of the multiplier block \nbecause it is apparently presented with smaller input \nvoltage magnitudes. The frequency capture range defined \nby (2) is reduced as a result. On the basis of a capture \nrange test the majority of such faults are easily detectable. \nHowever, it should be noted that two of the faulty PLL \ncircuits show capture ranges of 444KHz and 436KHz \nwhich lie well within the normal response range. It has \nbeen found that the total loop gain of these two circuits is \nunusually high due to parametric shifts in the other blocks. \nThe effect of the faults on the capture range are masked as \na result. \nUsing the observe bus it is easily possible to look at the \ndifferential outputs from the faulty VCO block of the PLL \nwith 436 KHz capture range. The results of this \nobservation are plotted in Fig. 18 along with a fault free \nFAULT FREE OUTPUT SHORT FAULT \nVOLTS - Outpu1 I \nOutput 2 Output I ..... \nTIME ' \noutpu12 _ _ _ _ _  \nFig 18 - a) fault free output from VCO output node \nand b) -VCO output response of faulty PLL \nversion 2, IC number 7,- both measurements \nusing the observe DfT feature \nexample for comparison. Major differences in the plots are \nobvious with a large DC offset of 4 volts appearing \nbetween the complimentary outputs of the faulty VCO. \nThe reduction in signal amplitude of channel 2 of the \nfaulty VCO is also obvious. \nIn switching internal nodes of the PLL onto the observe \nbus the effects of loading must be carefully considered. \nFigures 19 and 20 show the effect of this loading for the \nfault free Dff circuit of IC number 7. Gain and frequency \nhold range are used here since they most reflect the effects \nof loading. The performance shift caused by loading the \nVCO outputs with the observe bus (state codes 2 and 3) is \nobvious. Hold range is reduced at the upper frequency \nvalues and hence the total frequency range is reduced \nbecause the VCO becomes slew-rate limited and its output \nmagnitude falls at high frequencies as a result. The \nreduction in gain is due to a reduction in the output \nmagnitude of the VCO block again by slew rate limiting at \nhigh frequencies. In this example gain has been measured \nat the upper end of the frequency hold range. At lower \n30 \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\nfrequencies the effect is less pronounced because the slew \nrate limiting becomes lesser in effect. \n0 68 \n0 65} 4 \nState code Observe Node \n0 56 t \nx \nx 3 \n4 \nMult \n0 52 Filter 0541 5 Loopamp 1 v c o  o\/p 1 2 vcoo\/p 2 \n-.- \n-1 0 1 2 3 4 5 \nObserve state code. \nFig 19 - Effect on the PLL gain of switching \nobservability structures onto the test bus \nState codes 3,4 and 5 of figs. 19 and 20 represent the \noutput voltages of the multiplier, loop filter and loop \namplifier respectively as they are connected to the observe \nbus. Within the measurement errors there is no detectable \nchange due to loading because these outputs are strongly \nbuffered and the additional loading of the observe bus has \nlittle impact on the overall performance. \nIt can be concluded that sensible use of the observe bus \n1250 \nState code Observe Node \n$1150 \nI 1 O 0  1050 t 3 4 1 v c o  o\/p 1 2 vcooip 2 Mull Filter \n5 Loopamp \n0 1 2 3 4 5 \nObserve state code \nFig 20 - Effect on the hold range of switching \nobservability \nallows on-line testing of the PLL if strongly buffered \nnodes are observed. In the case of the VCO outputs which \nare not strongly buffered, loading effects are noticeable at \nthe higher frequency ranges. However, off-line diagnostics \ncan be performed as for the traces shown in Fig. 18 and \nstill yield useful results. \nThe soft defect inserted into the loop filter shown in \nFig. 14 was anticipated to cause a small shift in the loop \ngain. In fact, of the 10 samples tested, 7 failed totally with \nlarge DC offsets at the outputs. Of the remaining 3, all \nyielded very poor performance with no observable lower \nlock and capture frequencies and very noisy outputs. \nThese effects were not anticipated and the swap-amps \nwere employed to locate the problem. \nThe Test State Register (TSR) was configured into state \n0010 1000 where the multiplier swap-amp is in test mode \nand the output of the loop filter is connected to the \nobserve bus. In this state the multiplier block is used to \nprovide test vectors for the subsequent loop filter block. \nTable 1 shows the results of DC measurements of the gain \nI Test voltage I Output expected I output I \nmeasured \n0.000v \nTable 1 - DC measurements of the gain of the \nloop filter using the multiplier swap-amp. \nof the loop filter. The cause of the large discrepancy \nbetween measured and expected values remains \nunexplained as yet but its effect is to saturate the loop \namplifier which is the subsequent stage. As a result a large \nDC offset (in fact saturation) appears at the output node of \nthe PLL and the VCO does not oscillate as a result. Using \nthe swap-amp has made detection of this problem easy and \nhas allowed location of a problem which was not \noriginally anticipated. \n9. Conclusions \nA reconfigurable operational amplifier, called a swap- \namp, has been built and described. The swap-amp \nfacilitates exposure of faults within a custom built phase- \nlocked-loop (PLL) circuit by providing means to \ninvasively control voltage levels of the PLL internal nodes. \nComparison of nominally identical PLL circuits in terms \nof frequency capture range has shown that the performance \nimpact of introducing the swap-amp is negligible in \nnormal operation mode. \nA methodology based on an analogue observe bus has \nbeen described which allows observation of the internal \nvoltage levels of PLL inter-block nodal voltages. It has \nbeen shown that use of this observability bus is feasible \nwhile the PLL is still performing its normal function, i.e. \nallowing on-line functionality evaluation, by measuring the \ngain and frequency hold range of the PLL while \n31 \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\nsimultaneously observing internal voltage levels of the \nPLL. It has also been shown that loading effects of the bus \ncapacitance may cause shifts in the performance of the \nPLL if weakly buffered nodes are connected to the observe \nbus. Under these conditions the use of on-line performance \nevaluation is not recommended but use of off-line testing \nhas been shown to be a very simple way of detecting faults \nsuch as the example short-circuit in the VCO output. \nIn particular, it has been shown that a short circuit fault in \nthe VCO output leads to a number of faulty chips that are \neasily distinguishable on a frequency capture range test. \nHowever although the majority of faulty VCO chips fail \nthis test it has been demonstrated that a number give \nobstensively normal results. Use of the observe bus allows \nthe VCO fault to be easily distinguished from the fault free \ncase. \nThe swap-amp in conjunction with the observe bus has \nbeen used to isolate a fault within several of the PLL chips \nwhich causes total failure of the PLL by saturating the \noutput operational amplifier. Without the presence of the \nswap-amp structure, location and diagnosis of this fault \nwould have been extremely difficult. \nThe present area overhead due to the swap-amps is \nminimal, comprising approximately 5% increase per \nmodified operational amplifier. The corresponding figure \nis approximately 1% for the PLL circuit as a whole. The \nlogic necessary to control the test state of the PLL, the \nTSR, represents an area overhead of approximately 100% \nwhich is not acceptable. A number of possibilities exist to \nsignificantly reduce this overhead. \n1. Use of an Algorithmic State Machine rather than a \n\u201cone-hot\u2019\u2019 TSR will reduce the number of necessary D- \ntype flip-flop elements to four rather than the present \neight to represent the present nine test states. \n2. Much better designs of D-type flip-flop exist than the \none used here. A area reduction of more than 50% is \neasy to foresee. \n3. Use of a full-custom layout rather than the present \nautomatic version will trim around 25% off the area \nnecessary for the TSR. \nThe total accumulative reduction in area of the TSR is \nanticipated to be approximately one order of magnitude \nand the total resultant area overhead is estimated to be \nabout 10%. \nIt should also be mentioned that the amount of \nobservability and controllability applied to the PLL is \nexcessive in this demonstrator chip with respect to that \nwhich is likely to be required. Reductions in the quantity \nof both observability and controllability will lead to a \nsmaller TSR and a smaller area overhead as a result. \nIn a mixed-signal environment it is often the case that a \nnumber of digital signals are available for little cost during \nthe test phase. If these signals could be employed in place \nof the TSR then the total area overhead is estimated to be \nabout 1%, representing that of the swap-amps and obseve \nswitches only. \n9.1 Future Work. \nThe first step is to re-design the TSR with the proposals \nabove and obtain an estimate of the total minimum area \nrequired for the TSR. Fabrication of this step may well not \nbe necessary and results can hopefully be obtained \nquickly. \nMore investigation is necessary into the reasons for \nfailure of a number of the PLL chips. Utilisation of the \nswap-amp and observe bus will facilitate this task and a \nsubsequent paper on fault diagnosis is anticipated. \nOther applications for the swap-amp need to be \ninvestigated. In particular only one architecture of swap- \namp exists at present and there is almost certainly need for \nthe re-configuration technique to be applied to \ntransimpedance amplifiers and current mode devices to \nname only two. \nAcknowledgements \nThe authors would like to thank Ian White and Chris \nThomas of Micro Circuit Engineering, Tewkesbury, UK \nand Keith Baker, Eric Bruls, and Taco Zwemstra of \nPhilips Research Laboratories, Eindhoven for their \ninvaluable criticism and feedback. This work was \nsupported by the SERC under grant no. DTI JFIT \n[GR\/H 1428 11. \nReferences \n1. M.C Markowitz \n\u201cConcurrency, circuitry fosters testability\u201d \nEDN June 6, 1991. p.65-74 \n2. M. Sachdev \n\u201cCatastrophic Defect Oriented Testability Analysis of \na Class AB amplifier\u201d, Proceedings of Defect and Fault \nTolerance in VLSI Systems, pp. 319-326, Oct. 1993. \n3. H. Walker & S. W. Director, \n\u201cYield Simulation for Integrated Circuits\u201d \nIEEE. Int. Conf. on CAD. Digest of Technical \nPapers), Sept. 1983 pp. 256-257. \nR J Harvey, A M Richardson, K Baker & E Bruls \n\u201cAnalogue Fault Simulation based on Layout \nDependent Defect Models\u201d, paper 27.2 pp. 641-650, \nInternational Test Conference Oct 1994, Washington \nDC . \n4. \n32 \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\n5. \n6.. \n7. \n8. \n9. \n10. \n11. \n12. \n13. \n14. \n15. \n16. \nH Hao & E McCluskey \n\"Very-Low-Voltage Testing for weak CMOS Logic \nIC's\" Intemational Test Conference, paper 14.1, \npp275-285, Baltimore, October 1993. \nJ Beasley, H Ramamurthy, J Ramirez-Angulo & M \nDeYong \n\"IDD Pulse Response Testing of Analogue and \nDigital CMOS Circuits\" Intemational Test Conference, \npaper 31.1, pp275-285, Baltimore, October 1993. \nA. Khari, A.H. Bratt, & A.P. Dorey \n\"Testing Analogue Circuits by Power Supply \nControl\" Electronic Letters - Vol30, No 3, pp214- \n215, February 1994. \nK Baker & B Verhelst \n\"Iddq testing because \"zero defects isn't enough\" - \na philips perspective\" Intemational Test Conference, \npaper 11.2, p 253, Washington, October 1990. \nS D McEuen \n\"Reliability Benefits of Iddq\" Joumal of Electronic \nTesting: Theory & Applications, pp 41-49, 1992. \nA. M. D. Richardson and A. P. Dorey \n\"Supply Current Monitoring in CMOS Circuits for \nReliability Prediction and Test\" Quality and \nReliability Engineering Intemational, Vol8, pp 543- \n548,1992. \nA. M. D. Richardson and A. P. Dorey \n\"Reliability Indicators\" ESREF, Schwabisch Gmund, \nGermany, paper 12.1, pp 277-285, 54th October \n1992. \nMani Soma \n\"A Design for Test Methodology for Active Analogue \nFilters\" Intemational Test Conference, pp 183- 192, \nWashington, October 1990. \nJ.L. Huertas, A. Rueda & D.Vazquez \n\"Improving the Testability of Switched-Capacitor \nFilters\" Analogue Integrated Circuits and Signal \nProcessing, Vo1.4, No.3, Nov 1993, pp199-213. \nP.P Fasang \n\"AnalogueDigital ASIC Design for Testability\" IEEE \nTransactions on Industrial Electronics, vo1.36, No. 2, \nMay 1989, pp219-226. \nK.D. Wagner \n\"Design for Testability of AnalogueLDigital Networks\" \nIEEE Transactions on Industrial Electronics, vol. 36, \nNo. 2, May 1989, pp227-230. \nP.P. Fasang \n\"Design for Testability for Mixed AnalogueDigital \nASICs\" Proc. IEEE 1988 Custom Integrated Circuits \nConference, pp 16.5.1-16.5.4, 1988. \n17. F Novac, I Mozetic, M Santo-Zamik & A Biasizzo \n\"Enhancing Design for Test for Active Analogue \nFilters\" Analogue Integrated Circuits and Signal \nProcessing, Vo1.4, No.3, pp231-244, Nov 1993, \nE Flaherty, A Allan & J Morris \n\"Design for Testability of a modular, Mixed Signal \nFamily of VLSI Devices\" Intemational Test \nConference, paper 37.2, pp797-804, Baltimore, \nOctober 1993. \n18. \n19. A P Dorey, B K Jones, A M Richardson & Y Z Xu \n\"Rapid reliability assessment of VLSICs\" Plenum \nISBN 0-306-43492X, 1990. \n33 \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 5, 2008 at 10:03 from IEEE Xplore.  Restrictions apply.\n"}