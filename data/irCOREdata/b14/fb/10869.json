{"doi":"10.1088\/1742-6596","coreId":"10869","oai":"oai:eprints.lancs.ac.uk:40026","identifiers":["oai:eprints.lancs.ac.uk:40026","10.1088\/1742-6596"],"title":"Wireless inertial sensor for tumour motion tracking.","authors":["Bandala S\u00e1nchez, Manuel","Joyce, Malcolm J."],"enrichments":{"references":[],"documentType":{"type":1}},"contributors":[],"datePublished":"2007","abstract":"A wireless diminutive inertial sensor being developed at Lancaster is capable of measuring position and orientation about three orthogonal axes. A real-time algorithm determines the six degree-of-freedom (6DOF) sensor posture, consisting of three components of dimensional position (heave, sway, and surge) and three components of rotational orientation (pitch, yaw, and roll). The objective of this study is to design an ultra-miniaturised version of this sensor that could be potentially implanted into tumours in order to help medical physicists track the motion of tumours and target the radiation accordingly","downloadUrl":"","fullTextIdentifier":null,"pdfHashValue":null,"publisher":null,"rawRecordXml":"<record><header><identifier>\n    \n    \n      oai:eprints.lancs.ac.uk:40026<\/identifier><datestamp>\n      2018-01-24T03:10:22Z<\/datestamp><setSpec>\n      7374617475733D707562<\/setSpec><setSpec>\n      7375626A656374733D54:5441<\/setSpec><setSpec>\n      74797065733D61727469636C65<\/setSpec><\/header><metadata><oai_dc:dc xmlns:oai_dc=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/\" xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/ http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc.xsd\" ><dc:title>\n    \n      \n        Wireless inertial sensor for tumour motion tracking.<\/dc:title><dc:creator>\n        Bandala S\u00e1nchez, Manuel<\/dc:creator><dc:creator>\n        Joyce, Malcolm J.<\/dc:creator><dc:subject>\n        TA Engineering (General). Civil engineering (General)<\/dc:subject><dc:description>\n        A wireless diminutive inertial sensor being developed at Lancaster is capable of measuring position and orientation about three orthogonal axes. A real-time algorithm determines the six degree-of-freedom (6DOF) sensor posture, consisting of three components of dimensional position (heave, sway, and surge) and three components of rotational orientation (pitch, yaw, and roll). The objective of this study is to design an ultra-miniaturised version of this sensor that could be potentially implanted into tumours in order to help medical physicists track the motion of tumours and target the radiation accordingly.<\/dc:description><dc:date>\n        2007<\/dc:date><dc:type>\n        Journal Article<\/dc:type><dc:type>\n        PeerReviewed<\/dc:type><dc:relation>\n        http:\/\/dx.doi.org\/10.1088\/1742-6596\/76\/1\/012036<\/dc:relation><dc:identifier>\n        Bandala S\u00e1nchez, Manuel and Joyce, Malcolm J. (2007) Wireless inertial sensor for tumour motion tracking. Journal of Physics: Conference Series, 76. 012036. ISSN 1742-6588<\/dc:identifier><dc:relation>\n        http:\/\/eprints.lancs.ac.uk\/40026\/<\/dc:relation><\/oai_dc:dc><\/metadata><\/record>","journals":null,"language":null,"relations":["http:\/\/dx.doi.org\/10.1088\/1742-6596\/76\/1\/012036","http:\/\/eprints.lancs.ac.uk\/40026\/"],"year":2007,"topics":["TA Engineering (General). Civil engineering (General)"],"subject":["Journal Article","PeerReviewed"],"fullText":"Wireless inertial sensor for tumour motion tracking\nThis article has been downloaded from IOPscience. Please scroll down to see the full text article.\n2007 J. Phys.: Conf. Ser. 76 012036\n(http:\/\/iopscience.iop.org\/1742-6596\/76\/1\/012036)\nDownload details:\nIP Address: 137.108.145.39\nThe article was downloaded on 12\/07\/2011 at 18:28\nPlease note that terms and conditions apply.\nView the table of contents for this issue, or go to the journal homepage for more\nHome Search Collections Journals About Contact us My IOPscience\nWireless inertial sensor for tumour motion tracking\nManuel Bandala, Malcolm Joyce\nB88 Engineering Department, Lancaster University, Lancaster LA1 4YR, UK\nE-mail: m.bandala@lancaster.ac.uk\nAbstract. A wireless diminutive inertial sensor being developed at Lancaster is capable\nof measuring position and orientation about three orthogonal axes. A real-time algorithm\ndetermines the six degree-of-freedom (6DOF) sensor posture, consisting of three components of\ndimensional position (heave, sway, and surge) and three components of rotational orientation\n(pitch, yaw, and roll). The objective of this study is to design an ultra-miniaturised version of\nthis sensor that could be potentially implanted into tumours in order to help medical physicists\ntrack the motion of tumours and target the radiation accordingly.\n1. Introduction\nThe objective of this research is to address a significant need that currently exists in medical\nradiotherapy. Radiotherapy is compromised by the mobility of tumours in the chest. The motion\ninduced while breathing often makes it difficult to target tumours, meaning that patients often\nhave to endure extended treatment times or carry out difficult breath-control techniques. A way\nto account for such motion is often desirable during radiotherapy treatments. By using tumour\ntracking, physicians can irradiate tumours more accurately without exposing the healthy tissue\naround the tumour to radiation.\nThe methods that have been developed to reduce the impact of respiratory motion in\nradiotherapy can be broadly separated into five major categories: motion-encompassing\nmethods, respiratory-gating techniques, breath-hold techniques, forced shallow-breathing\ntechniques, and real-time tumour tracking techniques [1].\nThe sensor presented here could be used by treatment planners, who have long appreciated\nthat organs move and compensate for this by expanding the clinical target volume (CTV) by a\nmargin to form the planning target volume (PTV) to which treatment is adapted [2]. Although\nthis has been done many radiotherapy facilities do not currently have methods that explicitly\naccount for respiratory motion.\nFiducial-based guidance has been used in combination with many of the aforementioned\nmethods. This approach has the advantage that the implanted fiducials are comparatively\neasy to locate with automatic image processing tools, and the position determination involves\nrelatively simple calculations [3]. Not surprisingly, most of the attempts to locate tumours\nusing implanted fiducials require the use of an imaging system, and such fiducials are used as\ngenuine real-time trackers situated in or near the tumour [4, 5, 6]. These markers are commonly\nimplanted using techniques similar to biopsy procedures with a simple needle introduced under\nultrasound guidance.\nThe first miniature, implantable device that could be tracked electromagnetically in three\ndimensions from outside the patient, was developed a few years ago [7]. The TULOC (Tumour\nSensors and their Applications XIV (SENSORS07) IOP Publishing\nJournal of Physics: Conference Series 76 (2007) 012036 doi:10.1088\/1742-6596\/76\/1\/012036\nc\u00a9 2007 IOP Publishing Ltd 1\nLocation) system used trailing wires and therefore was not appropriate for human implant\nbecause of the invasiveness of the procedure which risked infections; nonetheless, it was\nsuccessfully placed in a phantom and reported the potential of tumour tracking on the basis\nof transponder location. Other scientists [8], have reported on the performance of a wireless\nRF seed-tracking system (beacon transponders) for tumour localisation. This system is FDA\napproved and is now commercially-available. An optical\/magnetic tracking system approach\nbased on Electromagnetic implanted needles [9], and the PeTrack, a positron emission marker\nsystem [10], have also provided an alternative to the use of radiological imaging to track the\ntumour position.\n2. Tracking background\nOne of the most important problems in tracking research today is to provide a fast, accurate, and\nunobtrusive method for reliably tracking of human motion. Such tracking is necessary because a\nuser must continually be provided with three-dimensional computer-generated data that match\nthe user\u2019s three-dimensional real-world position and orientation.\nThe operating principles for the measurement of a moving object have been well established\nin the field of inertial navigation systems. Inertial trackers use accelerometers to measure the\nacceleration for object position and gyroscopes to measure the orientation of the object. Ideally,\nboth are deployed in orthogonal triples (for 3D position in X, Y, and Z, and 3D orientation\nin roll, pitch, and yaw) in order to estimate 6D pose [11, 12]. Fig. 1 illustrates the general\noperation of an inertial navigation system (INS).\nFigure 1. Simplified strapdown inertial\nnavigation performance. Each movement or\nrotation axis is independent of each other.\nNot until the advent of micro-electronic mechanical systems (MEMS) inertial sensors\nin the 1990s did the development of inertial input devices begin. Currently, various\ntypes of miniaturised macromachined elements are increasingly being integrated for different\napplications. In medicine, the use of MEMS comprises pressure sensors (gauges), pacemakers,\nhuman retinal prostheses, tactile sensors [13], and surgery [14].\n3. Conceptual design of the sensor\n3.1. Electronic Hardware\n(i) Sensor Package: At the current development stage, onboard sensors include an ADXL330\nThree-axis accelerometer, an ADXRS300 Single-axis gyroscope, and an IDG300 Dual-axis\ngyroscope.\n(ii) Wireless: This work used an EB100-SER Bluetooth interface. The EB100-SER supports up\nto 230.4 Kbps continuous data rate and its transmission range is about 100 metres indoors\nwhen used with a proper antenna.\nSensors and their Applications XIV (SENSORS07) IOP Publishing\nJournal of Physics: Conference Series 76 (2007) 012036 doi:10.1088\/1742-6596\/76\/1\/012036\n2\n(iii) Microcontroller: The sensor control is based on the Microchip dsPIC30F2011 which operates\nup to 15 MIPS at 20 MHz, while supporting multiple AD conversions and having DSP\ncapabilities.\n(iv) Tracking algorithm: The algorithm used during both simulations and experiments, is\nillustrated in Fig. 2. This algorithm follows the traditional flow of information for an\nstrapdown inertial navigation system. It was coded in Visual Basic for the simulation, and\nin Microchip C30 for the embedded dsPIC30F2011.\nFigure 2. Strapdown inertial algorithm.\n3.2. Inertial navigation configuration\nFrom the point of view of the inertial navigation systems, the gyroscopes and accelerometers\ncomprise an inertial measurement unit. The embedded microcontroller and the wireless\ntransceiver are essentially part of a navigation computer. Fig. 3 shows the aforementioned\nconfiguration.\nFigure 3. Block diagram of the wireless\ninertial navigation system.\nFigure 4. Representation of the Earth\u2019s\nreference frame (black arrows) against the\nstrapdown reference frame (grey arrows).\n4. Compensating the effect of gravity\nAs the strapdown system rotates arbitrarily about any axis, the orientation of ux, uy and uz\nrelative to X, Y, and Z is given by (1).\nSensors and their Applications XIV (SENSORS07) IOP Publishing\nJournal of Physics: Conference Series 76 (2007) 012036 doi:10.1088\/1742-6596\/76\/1\/012036\n3\nu\u2032 = u R\u03c6 (1)\nWhere u\u2032 is the rotated vector, u is the original components of ux, uy or uz in vector format,\nand\nR\u03c6 =\n\uf8eb\n\uf8ec\uf8ec\uf8ec\uf8ec\uf8ec\uf8ed\ntx2 + c txy + sz txz \u2212 sy\ntxy \u2212 sz ty2 + c tyz + sx\ntxz + sy tyz \u2212 sx tz2 + c\n\uf8f6\n\uf8f7\uf8f7\uf8f7\uf8f7\uf8f7\uf8f8\n(2)\nSince the axes of rotation depend solely on how the sensor is rotated, R\u03c6 is a rotation ma-\ntrix over any two points in space, where c = cos \u03c6, s = sin \u03c6, and t = (1 \u2212 cos \u03c6). The\ncomponents x, y, and z describe a unit vector on any of the axes of rotation ux, uy, or uz, and \u03c6\nis any of the angles of rotation \u03c61, \u03c62, or \u03c63.\nThe analog output voltage of the accelerometer can be converted to acceleration using (3)\nA =\n[\nV0 + VG \u2212 VZ\n]\nK0\n(3)\nwhere V0 = output in volts, VG = gravity offset, VZ = zero output, and K0 = accelerometer\nscale factor given in mV\/g.\nThe compensation for the effect of gravity is performed by considering a gravity vector g on\nthe vertical Z axis direction (see Fig. 4). The components of the u vectors are found using the\nangles \u03b81, \u03b82 and \u03b83 that correspond to the gyroscopic position of the inertial sensor.\nOnce any of the u vector components are found, the effect of gravity VG can be accounted\nfor on its corresponding axis by (4).\nVG = K0 \u00d7\ng \u00b7 u\n|g| |u|\n(4)\nIt is assumed that the acceleration A will be zero when the sensor (in spite of being rotated)\nremains stationary. In movement, acceleration on the axes X, Y, and Z will be present.\n5. Experimental setup\nThe prototype consists of two symmetrically-bonded PCB boards of size of 30 mm \u00d7 20 mm \u00d7\n10 mm. With conditioned analog signals that are digitized, possessed, and transmitted wirelessly\nvia Bluetooth; the power consumption is comparatively low, less than 20 mA at 3.3 V.\nThe sensor was located inside a custom-made gimballed gyroscope (Lancaster University) for\nrotation tests (Fig. 5). Similarly, it was mounted on a 2-axis rig, capable of moving a small\nplatform in two dimensions (Fig. 6). Each individual degree of freedom was tested independently.\n6. Results\nIt can be seen from Fig. 7 that the accuracy of the gyroscopic reading is satisfactory when\nthe device remains stationary, indicating that the algorithm interprets that there is no angular\nmotion when the angular rate is zero. When the device is rotated, the algorithm determines\nthe angular position acceptably. From Fig. 8, the performance of the lateral motion presented\nSensors and their Applications XIV (SENSORS07) IOP Publishing\nJournal of Physics: Conference Series 76 (2007) 012036 doi:10.1088\/1742-6596\/76\/1\/012036\n4\nFigure 5. The sensor in a gimballed\ngyroscope for testing.\nFigure 6. The sensor in a 2-axis rig for\ntesting.\nan erratic response after the device is moved. During the first 3 seconds (when the device is\nstationary) the algorithm interpretation is consistent, nevertheless once the device is moved, the\nalgorithm interpretation does not correspond to the actual position. During this experiment,\nthe error ranged from few millimeters up to several centimetres. The error magnitude was more\nsignificant at faster movement rates.\n0 5 10 15 20\u221250\n0\n50\n100\n150\n200\nTime (sec)\nAm\npl\nitu\nde\n (d\neg\nree\ns)\nv\ns\nFigure 7. Numerical integration of gyro-\nscopic data: v is the angular rate of the given\naxis, and s represents the integration of v.\n0 2 4 6 8 10 12 14 16\u2212350\n\u2212300\n\u2212250\n\u2212200\n\u2212150\n\u2212100\n\u221250\n0\n50\n100\n150\nTime (sec)\nAm\npl\nitu\nde\n (c\nm)\na\ns\nFigure 8. Numerical integration of accelera-\ntion data: a is the acceleration of the sensor,\nand s represents the double integration of a.\nAll 6 degrees-of-freedom readings drifted over time due to the accumulation of sumatory\nerrors within the integrating algorithm. We tried to reduce this error accumulation by adding a\nbetter noise reduction technique to the algorithm; however, as the ADC acquisition speed could\nnot be increased due to the limitation in hardware, the improvements were not sufficient.\n7. Conclusion\nIn practice, making a 6DOF sensor based on MEMS that performs double integration is difficult\nto achieve - especially in real-time. In the field of human motion, most inertial signals are\nsmall, over the acceleration range 10\u22123 to 10\u22122 g\u2019s. To obtain accurate signals, very accurate\naccelerometers and gyros are required.\nSensors and their Applications XIV (SENSORS07) IOP Publishing\nJournal of Physics: Conference Series 76 (2007) 012036 doi:10.1088\/1742-6596\/76\/1\/012036\n5\nWe tested the accuracy of the sensor against practical measurements from our gimballed\ngyroscope and 2-dimensional rig. Each axis (DOF) was tested independently from the other 5\naxes of motion. Our sensor is capable of measuring the static acceleration of gravity for tilt-\nsensing applications, as well as dynamic acceleration resulting from motion. Our first prototype\nhas achieved tracking of all six degrees of freedom (position and orientation) with resolution\nbetter that 2 mm in position and 0.2 degree in orientation. It runs at 320 Hz with latency \u2248 2\nms, needing no clear line of sight to anything else.\n8. Acknowledgment\nWe acknowledge the support of our Faculty of Science, the Mexican National Council for\nScientific and Technological Development (CONACYT); the simulating discussions with Dr.\nRobert Price; Jim Newton for fabricating the gimballed gyroscope, and A7 Engineering\n(http:\/\/www.a7eng.com\/), that kindly facilitated Bluetooth hardware and engineering support.\n9. References\n[1] Keall P. J. Mageras G. S. Balter J. M. Emery R. S. Forster K. M. Jiang S. B. Kapatoes J. M. Low D. A.\nMurphy A. J. Murray B. R. Ramsey C. R. Van Herk M. B. Vedam S. S. Wong J. W. Yorke E. The\nmanagement of respiratory motion in radiation oncology. Medical Physics, 33(10):3874\u20133900, 2006.\n[2] Webb S. Motion effects in (intensity modulated) radiation therapy a review. Physics in Medicine and\nBiology, 51:403\u2013425, 2006.\n[3] Murphy M. J. Tracking moving organs in real time. Seminars in Radiation Oncology, 14(1):91\u2013100, 2004.\n[4] Balter J. M. Sandler H. M. Lam K. Bree R. L. Lichter A. S. Ten Haken R. K. Measurement of prostate\nmovement over the course of routine radiotherapy using implanted markers. International Journal of\nRadiation Oncology, Biology, Physics, 31(1):113\u2013118, 1995.\n[5] Shirato H. Harada T. Harabayashi T. Hida K. Endo H. Kitamura K. Onimaru R. Yamazaki K.\nKurauchi N. Shimizu T. Shinohara N. Matsushita M. Dosaka-Akita H. Miyasaka K. Feasibility of\ninsertion\/implantation of 2.0-mm-diameter gold internal fiducial markers for precise setup and real-time\ntumor tracking in radiotherapy. International Journal of Radiation Oncology, Biology, Physics, 56(1):240,\n2003.\n[6] Betke M. Ruel J. Sharp G. C. Jiang S. B. Tracking and prediction of tumor movement in the abdomen.\nInternational Workshop on Pattern Recognition in Information Systems PRIS-2006, 2006.\n[7] Seiler P. G. Blattmann H. Kirsch S. Muench R. K. Schilling C. A novel tracking technique for the continuous\nprecise measurement of tumour positions in conformal radiotherapy. Physics in Medicine and Biology,\n45(9):103, 2000.\n[8] Balter J.M. Wright J.N. Newell L.J. Friemel B. Dimmer S. Cheng Y. Wong J. Vertatschitsch E. Mate T.P.\nAccuracy of a wireless localization system for radiotherapy. International Journal of Radiation Oncology,\nBiology, Physics, 61(3):933\u20137, 2005.\n[9] Tang J. Dieterich S. Cleary K. Respiratory motion tracking of skin and liver in swine for cyberknife motion\ncompensation. SPIE Medical Imaging 2004 proceedings, 2004.\n[10] Xu T. Wong J. T. Shikhaliev P. M. Ducote J. L. Al-Ghazi M.S. Molloi S. Real-time tumor tracking using\nimplanted positron emission markers: Concept and simulation study. Medical Physics, 33(7):2598\u20132609,\n2006.\n[11] Grewal M. S. Weill L. R. Andrews A. P. Global Positioning Systems, Inertial Navigation, and Integration.\nJohn Wiley and Sons, Inc., New York, 2001.\n[12] Lawrence A. A modern Inertial Technology. Springer-Verlag, second edition, 1993.\n[13] Panescu D. Mems in medicine and biology. IEEE Engineering in Medicine and Biology Magazine, 25(5):19\u2013\n28, 2006.\n[14] Rebello K. J. Applications of mems in surgery. Preceedings of the IEEE, 92(1), 2004.\nSensors and their Applications XIV (SENSORS07) IOP Publishing\nJournal of Physics: Conference Series 76 (2007) 012036 doi:10.1088\/1742-6596\/76\/1\/012036\n6\n"}