{"doi":"10.1214\/105051606000000376","coreId":"66125","oai":"oai:dro.dur.ac.uk.OAI2:3032","identifiers":["oai:dro.dur.ac.uk.OAI2:3032","10.1214\/105051606000000376"],"title":"Periodicity in the transient regime of exhaustive polling systems.","authors":["MacPhee,  I. M.","Menshikov,  M. V.","Popov,  S.","Volkov,  S."],"enrichments":{"references":[],"documentType":{"type":1}},"contributors":[],"datePublished":"2006-11-01","abstract":"We consider an exhaustive polling system with three nodes in its transient regime under a switching rule of generalized greedy type. We show that, for the system with Poisson arrivals and service times with finite second moment, the sequence of nodes visited by the server is eventually periodic almost surely. To do this, we construct a dynamical system, the triangle process, which we show has eventually periodic trajectories for almost all sets of parameters and in this case we show that the stochastic trajectories follow the deterministic ones a.s. We also show there are infinitely many sets of parameters where the triangle process has aperiodic trajectories and in such cases trajectories of the stochastic model are aperiodic with positive probability","downloadUrl":"https:\/\/core.ac.uk\/download\/pdf\/66125.pdf","fullTextIdentifier":"http:\/\/dro.dur.ac.uk\/3032\/1\/3032.pdf","pdfHashValue":"3703f7589933bf8577994f859de15f414ff123c7","publisher":"Institute of Mathematical Statistics","rawRecordXml":"<record><header><identifier>\n  \n    \n      oai:dro.dur.ac.uk.OAI2:3032<\/identifier><datestamp>\n      2010-05-17T15:19:40Z<\/datestamp><\/header><metadata><oai_dc:dc xmlns:oai_dc=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/\" xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/ http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc.xsd\" ><dc:title>\n    \n      \n        Periodicity in the transient regime of exhaustive polling systems.<\/dc:title><dc:creator>\n        MacPhee,  I. M.<\/dc:creator><dc:creator>\n        Menshikov,  M. V.<\/dc:creator><dc:creator>\n        Popov,  S.<\/dc:creator><dc:creator>\n        Volkov,  S.<\/dc:creator><dc:description>\n        We consider an exhaustive polling system with three nodes in its transient regime under a switching rule of generalized greedy type. We show that, for the system with Poisson arrivals and service times with finite second moment, the sequence of nodes visited by the server is eventually periodic almost surely. To do this, we construct a dynamical system, the triangle process, which we show has eventually periodic trajectories for almost all sets of parameters and in this case we show that the stochastic trajectories follow the deterministic ones a.s. We also show there are infinitely many sets of parameters where the triangle process has aperiodic trajectories and in such cases trajectories of the stochastic model are aperiodic with positive probability. <\/dc:description><dc:subject>\n        Polling systems<\/dc:subject><dc:subject>\n         Greedy algorithm<\/dc:subject><dc:subject>\n         Transience<\/dc:subject><dc:subject>\n         Random walk<\/dc:subject><dc:subject>\n         Dynamical system<\/dc:subject><dc:subject>\n         Interval exchange transformation<\/dc:subject><dc:subject>\n         a.s. convergence.<\/dc:subject><dc:publisher>\n        Institute of Mathematical Statistics<\/dc:publisher><dc:source>\n        Annals of applied probability, 2006, Vol.16(4), pp.1816-1850 [Peer Reviewed Journal]<\/dc:source><dc:date>\n        2006-11-01<\/dc:date><dc:type>\n        Article<\/dc:type><dc:type>\n        PeerReviewed<\/dc:type><dc:identifier>\n        dro:3032<\/dc:identifier><dc:identifier>\n        issn:1050-5164<\/dc:identifier><dc:identifier>\n        doi:10.1214\/105051606000000376<\/dc:identifier><dc:identifier>\n        http:\/\/dro.dur.ac.uk\/3032\/<\/dc:identifier><dc:identifier>\n        http:\/\/dx.doi.org\/10.1214\/105051606000000376<\/dc:identifier><dc:format>\n        application\/pdf<\/dc:format><dc:identifier>\n        http:\/\/dro.dur.ac.uk\/3032\/1\/3032.pdf<\/dc:identifier><dc:accessRights>\n        info:en-repo\/semantics\/openAccess<\/dc:accessRights><\/oai_dc:dc><\/metadata><\/record>","journals":[{"title":null,"identifiers":["issn:1050-5164","1050-5164"]}],"language":{"code":"en","id":9,"name":"English"},"relations":[],"year":2006,"topics":["Polling systems","Greedy algorithm","Transience","Random walk","Dynamical system","Interval exchange transformation","a.s. convergence."],"subject":["Article","PeerReviewed"],"fullText":"Durham Research Online\nDeposited in DRO:\n17 May 2010\nVersion of attached file:\nPublished Version\nPeer-review status of attached file:\nPeer-reviewed\nCitation for published item:\nMacPhee, I. M. and Menshikov, M. V. and Popov, S. and Volkov, S. (2006) \u2019Periodicity in the transient\nregime of exhaustive polling systems.\u2019, Annals of applied probability., 16 (4). pp. 1816-1850.\nFurther information on publisher\u2019s website:\nhttp:\/\/dx.doi.org\/10.1214\/105051606000000376\nPublisher\u2019s copyright statement:\nAdditional information:\nUse policy\nThe full-text may be used and\/or reproduced, and given to third parties in any format or medium, without prior permission or charge, for\npersonal research or study, educational, or not-for-profit purposes provided that:\n\u2022 a full bibliographic reference is made to the original source\n\u2022 a link is made to the metadata record in DRO\n\u2022 the full-text is not changed in any way\nThe full-text must not be sold in any format or medium without the formal permission of the copyright holders.\nPlease consult the full DRO policy for further details.\nDurham University Library, Stockton Road, Durham DH1 3LY, United Kingdom\nTel : +44 (0)191 334 3042 \u2014 Fax : +44 (0)191 334 2971\nhttp:\/\/dro.dur.ac.uk\nThe Annals of Applied Probability\n2006, Vol. 16, No. 4, 1816\u20131850\nDOI: 10.1214\/105051606000000376\n\u00a9 Institute of Mathematical Statistics, 2006\nPERIODICITY IN THE TRANSIENT REGIME OF\nEXHAUSTIVE POLLING SYSTEMS\nBY I. M. MACPHEE, M. V. MENSHIKOV, S. POPOV1 AND S. VOLKOV\nUniversity of Durham, University of Durham, University of S\u00e3o Paulo\nand University of Bristol\nWe consider an exhaustive polling system with three nodes in its tran-\nsient regime under a switching rule of generalized greedy type. We show\nthat, for the system with Poisson arrivals and service times with finite second\nmoment, the sequence of nodes visited by the server is eventually periodic al-\nmost surely. To do this, we construct a dynamical system, the triangle process,\nwhich we show has eventually periodic trajectories for almost all sets of pa-\nrameters and in this case we show that the stochastic trajectories follow the\ndeterministic ones a.s. We also show there are infinitely many sets of para-\nmeters where the triangle process has aperiodic trajectories and in such cases\ntrajectories of the stochastic model are aperiodic with positive probability.\n1. Introduction. A polling system has N nodes where jobs arrive and queue\nand a single server which switches between the nodes to process the jobs. In ex-\nhaustive polling systems the server processes all jobs at its current node i, say,\nincluding any that arrive while jobs there are being processed, before switching\nto another node j , chosen by some rule. Conditions for transience\/recurrence of\npolling systems using a greedy switching rule were given in [5, 6]. There is a crit-\nical case which has been investigated in [8] and [9]. In this paper we show that,\nfor an exhaustive polling system with N = 3 nodes, with arrival streams and ser-\nvice times putting the system in its transient regime and switching according to\na threshold rule (a type of generalized greedy rule), the sequence in which the\nserver visits the nodes is eventually periodic for almost all choices of threshold\nparameters.\nTo show this, we consider in Section 2 the embedded Markov chain in ZN+ where\nwe observe the polling system at service and switching time completions. We con-\nstruct a dynamical system using the vector field of expected drifts of the chain for\nthe server at each node. As the polling system is transient, this dynamical system\nexits any finite ball eventually, so we project it onto the unit simplex. With N = 3\nnodes, we call this the triangle process, as it lives in a triangle\u2014it has piecewise\nlinear trajectories that change direction when they meet the triangle boundary so\nReceived May 2004; revised November 2005.\n1Supported in part by CNPq (302981\/02\u20130) and FAPESP (04\/03056\u20138).\nAMS 2000 subject classifications. Primary 60K25; secondary 90B22, 37E05.\nKey words and phrases. Polling systems, greedy algorithm, transience, random walk, dynamical\nsystem, interval exchange transformation, a.s. convergence.\n1816\nTRANSIENT POLLING SYSTEMS 1817\nit looks something like a billiards model, but where \u201creflections\u201d are caused by\nchanges of dynamics due to the server switching to another node. We call any tra-\njectory which returns to its start point after finitely many server switchings an orbit.\nIt is worth mentioning that this deterministic system closely resembles (and in\nsome cases is) the so-called affine interval exchange transformation model. How-\never, the affine interval exchange transformation here is contracting so it is not a bi-\njection and it reverses orientation so it is not order-preserving. It is thus rather dif-\nferent from the usual interval exchange transformation model that has been much\nstudied during the past 30 years. We comment more on this in Section 5.\nWe state our main results in Section 3. Theorem 3.1 states that for a.s. all choices\nof switching thresholds the triangle process has a finite number of orbits and every\ntrajectory converges toward one of these orbits. We say the triangle process is sta-\nble in this case. That there are no more than four orbits for any triangle process\nparameters is the content of Theorem 3.2. In Theorem 3.3 we show that there are\n(infinitely many) choices of the switching thresholds that lead to the existence of\naperiodic trajectories of the triangle process. These results are proved in Sections\n4 and 5. Using these results for the deterministic triangle process, we show, in The-\norem 3.4, that the projections of the trajectories of the stochastic queueing model\na.s. converge onto the orbits of the triangle process, when it is stable. This implies\nthe periodicity of the sequence of nodes receiving service for the polling system.\nFinally, in Theorem 3.5, we show that when the triangle process has nonperiodic\ntrajectories then, in some situations, the sequence of nodes visited by the stochastic\nmodel is periodic with positive probability and aperiodic with positive probability.\nThese results are proved in Sections 6 and 7.\n2. System description. An exhaustive polling system has N nodes where\njobs queue and a single server which switches to the next node j , chosen with\nsome rule, after processing all jobs at the current node i, including any that arrive\nwhile jobs at i are being processed. In the general model switching takes a time\nwhich depends upon the pair i, j . We will assume the following at each node i: the\narrival processes are independent Poisson streams with arrival rate \u03bbi ; the service\ntimes are i.i.d. and independent of the arrivals with finite mean \u00b5\u22121i and variance\n\u03c3 2i < \u221e; the switching times are independent with finite means that depend upon\nthe initial and final node while the server just waits for the next arrival at any node\nwhen it completes service at i and finds the system is empty.\nFor the results in our paper, we will assume that the switching times are zero.\nWe believe our argument can be extended to a more general situation, but our main\ninterest is in the transient case, where the system behavior is not sensitive to the\nswitching time distributions, though of course it is affected by the switching rule.\nThe methods we know for showing that periodicity of the node sequence for the\ndeterministic triangle process implies the same for the stochastic process are ap-\nplicable only to Markov processes. As the sequence of nodes visited is determined\n1818 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nby the jump chain, we will consider the discrete time process\n\u0003 = {(\u03be(t); s(t))}, t = 0,1, . . . ,\nwhere \u03be(t) describes the queue lengths and s(t) the server location at the epochs of\nservice time and switching time completions. Its state space is ZN+ \u00d7{1,2, . . . ,N}.\nThat \u0003 is well defined, irreducible and aperiodic follows from the assumptions of\nPoisson arrivals and finite first moments of the service times. For later convergence\narguments, we also require finite second moments of the service times and under\nthese conditions, standard results imply this embedded chain is essentially equiva-\nlent to the continuous time process as regards transience\/recurrence. The transition\nprobabilities can be computed via the Laplace transforms of the service times, but\nwe do not need them explicitly at any point. A standard conditioning argument\nreadily produces the expected one-step mean drifts\nE\n(\n\u03bei(t + 1)\u2212 \u03bei(t)|(\u03be(t); s(t))= (x; j))= \u03bbi\u00b5\u22121j \u2212 I{i=j},(1)\ni = 1, . . . ,N,\nfor x \u2208 ZN+ with xj \u2265 1 and the server at node j and we make considerable use\nof these. A similar result holds for expected drifts during switching times, but we\nwill not detail these as, in fact, we will assume switching to occur instantaneously.\nOther arrival and service processes for which there is an embedded Markov chain\ncan be found, but their treatment needs no significant extension of our methods.\nWe will start by stating the known explicit conditions for recurrence\/transience.\nFor exhaustive polling models, the conditions for recurrence\/transience depend\nonly upon the total loading (or traffic intensity)\n\u03c1 =\nN\u2211\ni=1\n\u03c1i where \u03c1i = \u03bbi\/\u00b5i at each node i\nfor a great many (and seemingly all sensible) switching rules under the assumption\nthat switching times have finite first moment. We have the following:\nTHEOREM 2.1. The process \u0003 is positive recurrent if \u03c1 < 1, transient if\n\u03c1 > 1.\nREMARKS. Foss and Last [5] establish the result for a more general model.\nThe method of proof is via Lyapunov functions as described in [1, 4] or [10]. The\npapers by MacPhee and Menshikov [8] and Menshikov and Zuyev [9] consider\nthe critical case \u03c1 = 1, where the behavior of the system depends strongly on the\nfirst two moments of the switching time distribution. Foss and Last [6] obtain the\nresult of this theorem for nonexhaustive polling systems under a greedy switching\npolicy.\nTRANSIENT POLLING SYSTEMS 1819\nGeneralized greedy switching rules. When the server has completed all the\ntasks at its current node, it chooses its next node using a switching rule which\nwe will assume depends upon the queue lengths, that is, the rule is a function\nR : \u2202RN+ \u2192 {1,2, . . . ,N}, where \u2202RN+ =\n\u22c3\nj {y \u2208 RN+ :yj = 0}. Any R must sat-\nisfy R(y) \u0005= j if yj = 0 and a variety of such rules have been studied in the litera-\nture. We will study only a class of generalized greedy rules defined as follows. For\neach node j , there is a vector of positive weights bj = (bj1, . . . , bjN) and at states\ny \u2208 \u2202RN+ with yj = 0, R(y) = i, where bjiyi = maxk(bjkyk) (for our results it is\nnot important how ties are resolved). The simple greedy rule is the special case\nwhere all bjk are equal.\nA deterministic model. Our subsequent analysis of the transient case is based\naround the following deterministic model of the system. Consider a particle mov-\ning in RN+ \u00d7 {1, . . . ,N} with linear dynamics given by the one-step mean drifts\nof \u0003 as calculated in (1). With its position denoted y = (y1, y2, . . . , yN) and the\nserver at node j , we see that at (y, j) with yj > 0 the particle has velocity\n\u00b5\u22121j\nN\u2211\ni=1\n\u03bbiei \u2212 ej = \u00b5\u22121j\n(\u2211\ni \u0005=j\n\u03bbiei + (\u03bbj \u2212\u00b5j)ej\n)\n,\nwhere the ei denote the axial unit vectors in RN . If a point with yj = 0 is reached,\nthen a different set of dynamics (corresponding to the server switching to another\nnode) is chosen instantaneously according to some generalized greedy switching\nrule R.\nThe trajectory y(t) of our particle is constructed as follows. From start point\ny(t0) = y\u00af \u2208 RN+ with y\u00afj > 0 and the server at node j , the particle travels along the\nline\n\u0007j (y\u00af) =\n{\ny \u2208 RN :y = y\u00af +\u00b5\u22121j (t \u2212 t0)\n(\u2211\ni \u0005=j\n\u03bbiei + (\u03bbj \u2212\u00b5j)ej\n)\n, t \u2208 R\n}\nthrough y\u00af with the appropriate velocity. If \u03c1j \u2265 1, the particle never reaches \u2202RN+ ,\nwhile if \u03c1j < 1, the particle reaches\ny(t1) =\n\u2211\ni \u0005=j\n(\ny\u00afi + \u03bbiy\u00afj\n\u00b5j \u2212 \u03bbj\n)\nei \u2208 \u2202RN+(2)\nat time t = t0 + y\u00afj \/(1 \u2212 \u03c1j ) =: t1. Now the server switches to node R(y(t1)) and\nthe next and subsequent pieces of the trajectory are computed as above.\nThe node process. In the transient case the trajectory exits from any finite ball\neventually, so, in order to study whether there is any periodicity in the order the\n1820 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nserver visits the queues, we project onto the unit simplex. Project the lines \u0007j (y\u00af)\nonto the hyperplane S1 = {y \u2208 RN :\u2211i yi = 1} using\n\b :RN \\ {0} \u2192 S1 where \b(y) = y\u2211\ni yi\n,\nwhich maps each line \u0007j (y\u00af) onto the intersection of S1 with the plane contain-\ning \u0007j (y\u00af) and the origin. The feasible positions for the particle will be mapped\nonto points in the unit simplex S+1 = {y \u2208 RN+ :\n\u2211\ni yi = 1}. For starting points y\u00af\nand \u03b1y\u00af for any \u03b1 > 0, the lines \u0007j (y\u00af) and \u0007j (\u03b1y\u00af) have exactly the same image\nin S1, so we can restrict our attention to reference points y\u00af \u2208 \u2202S+1 , the boundary\nof S+1 .\nUnder the condition \u03c1j > 1, the server in the stochastic process can remain\nserving at queue j indefinitely, so we will only consider the cases where \u03c1j < 1\nat all queues j . Under the condition \u03c1j < 1, we see from equation (2) that the\ntrajectory y(t) leaving y\u00af \u2208 \u2202S+1 along \u0007j (y\u00af) next reaches \u2202RN+ in finite time at the\npoint\u2211\ni \u0005=j\n(\ny\u00afi + \u03bbiy\u00afj\n\u00b5j \u2212 \u03bbj\n)\nei with projection\n\u2211\ni \u0005=j\n(\u00b5j \u2212 \u03bbj )y\u00afi + \u03bbiy\u00afj\n(\u00b5j \u2212 \u03bbj )+\u00b5j\u03b8j y\u00afj ei \u2208 A\n0\nj ,\nwhere A0j = {y \u2208 RN :\n\u2211\ni yi = 1, yj = 0, yi \u2265 0 for i \u0005= j} for j = 1,2, . . . ,N are\nregions of the switching boundary \u2202S+1 and\n\u03b8j := \u00b5\u22121j\n\u2211\ni\n\u03bbi \u2212 1, j = 1,2, . . . ,N.(3)\nThere is a very nice geometric description of the projected process. For any\nfixed j , the lines \u0007j (y\u00af) through different points y\u00af are parallel so they are concur-\nrent after projection, that is, their image lines on S1 are either parallel or share a\ncommon focus, vj , say. The line \u0007j (y\u00af) with y\u00af =\u2211i \u0005=j \u03bbiei + (\u03bbj \u2212 \u00b5j)ej passes\nthrough 0 so vj is the point where \u0007j (y\u00af) meets S1 if this happens. This is the case\nwhenever \u03b8j \u0005= 0, in which case\nvj = 1\n\u00b5j\u03b8j\n(\u2211\ni \u0005=j\n\u03bbiei + (\u03bbj \u2212\u00b5j)ej\n)\n.(4)\nWhen \u03b8j = 0, the \u0007j (y\u00af) with y\u00af \u2208 S1 all lie in S1 and the projected lines through\ndifferent y\u00af are parallel.\nThe focus point vj will be outside S+1 when \u03b8j < 0 or when \u03b8j > 0 and \u03c1j =\n\u03bbj\/\u00b5j < 1, conditions which correspond to the next switching event taking place\nafter some finite time.\nAs our aim is to study the switching sequence, we assume from now on that\n\u03c1i < 1, i = 1, . . . ,N and \u03c1 =\nN\u2211\ni=1\n\u03c1i > 1(5)\nTRANSIENT POLLING SYSTEMS 1821\nFIG. 1. The node process when N = 3.\n(which means that the whole system is transient, yet the server does not get stuck\nat any individual node). We can now define the discrete dynamical system Z =\n{z(t)}, t = 0, 1, . . . , living on A0 \u2261\u22c3i A0i = \u2202S+1 . Define mappings\nfj (z) =\n\u2211\ni \u0005=j\n(\u00b5j \u2212 \u03bbj )zi + \u03bbizj\n(\u00b5j \u2212 \u03bbj )+\u00b5j\u03b8j zj ei \u2208 A\n0\nj , z \u2208 A0 \\A0j , j = 1, . . . ,N.(6)\nThe image under fj of a point z \u2208 A0i lies at the intersection of the line through z\nand vj and the boundary region A0j , as shown for the case N = 3 in Figure 1. For\ngiven z(0) \u2208 \u2202S+1 let\nz(t + 1) = \u03d5(z(t)), t = 0,1, . . . ,\n(7)\nwhere \u03d5(z) =\nN\u2211\nj=1\nI{R(z)=j}fj (z), z \u2208 A0.\nWe will call Z the node process, as it records information about the projection of\nthe dynamical system y(t) only at switching epochs.\n3. The three node case. From this point our analysis is restricted to the case\nwhere the system has three nodes and the switching decision is made using a gen-\neralized greedy rule. This enables us to give clear statements of our results and\nmethods, but is complex enough to be very interesting in our opinion.\n1822 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nFIG. 2. The triangle process trajectory.\nRecall that when the server has completed all jobs at queue i, the switching rule\nis defined by parameters bij > 0 and selects the next node k when bij xj < bikxk\nfor i, j, k any permutation of 1, 2, 3. Projection by \b onto S1+ reduces the switch-\ning boundaries {x :bij xj = bikxk, xi = 0} to decision points, one on each side of\nthe triangle A0 as shown in Figure 2. This rule can be applied to the stochastic\nprocess \u0003 and the dynamical process y(t) as stated with the following resolu-\ntion of boundary cases. For the stochastic process \u0003, a randomized rule may be\nused whenever bij xj = bikxk , so we will consider the consequences for the node\nprocess Z of both possible decisions at such points. Specifically, we will consider\ntrajectories of the node process which branch when they exactly hit the decision\npoints. From now on, we will call the node process Z the triangle process and spe-\ncialize our notation. The construction in Section 2 is somewhat abstract, but the\nsystem which we have defined and wish to study is really very simple to describe.\nFigure 2 shows a trajectory starting from z(0) = z near e3. This is mapped to z(1)\nalong the line from z to v3 and then to z(2) just below d1. As z(2) is toward e2\nfrom d1, the next point z(3) is on the line from z(2) to v2. From here the trajectory\ncontinues toward v3, then v1, then back toward v3 and from there toward v2 and\nso on.\nWe note that the mapping which determines the trajectories is not continuous\nat the di . However, during extensive numerical investigation, we found that, for\nall the configurations of rates and decision points we tried, the trajectories we\nexamined converged toward periodic orbits.\nTriangle process notation. Let \u0131\u02c6, \uf6be\u02c6 , k\u02c6 denote the values 1, 2, 3 or either of its\ncyclic permutations 2, 3, 1 or 3, 1, 2 and let i, j, k denote any permutation of 1, 2,\n3. For z = (1 \u2212 x)e\uf6be\u02c6 + xek\u02c6 \u2208 A0\u0131\u02c6 with x \u2208 [0,1], we define Side(z) := \u0131\u02c6, \u03c0(z) := x\nTRANSIENT POLLING SYSTEMS 1823\nand write z = (x, \u0131\u02c6) (with standard right-hand axes, increasing x corresponds to\ngoing around the triangle anticlockwise).\nFor the triangle process Z, any generalized greedy rule R has the form\nR(x, \u0131\u02c6) =\n{\n\uf6be\u02c6 , x \u2264 d\u0131\u02c6 ,\nk\u02c6, x \u2265 d\u0131\u02c6 ,\nfor values d\u0131\u02c6 = (1 + b\u0131\u02c6k\u02c6\/b\u0131\u02c6\uf6be\u02c6 )\u22121 \u2208 (0,1) for \u0131\u02c6 = 1,2,3. The decision points (di, i)\nwill usually be written simply di . We will usually refer to rules of this type as\nthreshold rules.\nFor z = (x, i), z\u2032 = (x\u2032, j), we will use distance |z \u2212 z\u2032|1 := \u2016z \u2212 z\u2032\u2016\/\n\u221a\n2, the\nEuclidean distance scaled so that when i = j, |z\u2212 z\u2032|1 = |\u03c0(z)\u2212\u03c0(z\u2032)| = |x \u2212x\u2032|,\nthat is, it is length along the side of the triangle.\nThe forward mapping \u03d5 defined in (7) is 1\u20131 except at the di which have two\nimages, while the inverse of \u03d5 is 1\u20131 where it exists. Call z a pre-image of z\u2032 when\nz\u2032 = \u03d5(t)(z) for some t \u2265 1.\nDEFINITION. A sequence z(t), t = 0,1, . . . , satisfying (7) is a trajectory of Z.\nIf z(0) is a pre-image of a decision point di , then there are at least two trajectories\nstarting from z(0).\nWe will study closely the sets At = \u03d5(At\u22121), t = 1,2, . . . , which are such\nthat At contains the possible locations for z(t) from all initial points z(0) \u2208 A0.\nAlternatively, A0 \\At is the set of points with fewer than t pre-images, a descrip-\ntion which we will use later. The set A1 = \u03d5(A0) is a strict subset of A0 for any de-\ncision points since, for example, ei \/\u2208 A1, i = 1,2,3. Hence, A0 \u2283 A1 \u2283 \u00b7 \u00b7 \u00b7 \u2283 At\nfor t = 2,3, . . . . Further, A1 is a union of three disjoint closed intervals, one in\neach A0i . We introduce now the notation Ati \u2261 At \u2229 A0i for later use\u2014A11 is de-\npicted in Figure 3. As only intervals containing a decision point will be split by \u03d5,\nit follows that At is a union of at most 3t disjoint closed intervals.\nPeriodicity definitions. We call a trajectory z(t), t = 0, 1, . . . , eventually-m-\nperiodic if there is N > 0 such that, for all n \u2265 N ,\nSide\n(\nz(n+m))= Side(z(n)).\nA trajectory which is not eventually-m-periodic for any m is called nonperiodic.\nWe say that Z has a periodic orbit if there is a finite sequence of points\nu1, u2, . . . , um with \u03c6(ui) = ui+1 for i = 1,2, . . . ,m \u2212 1 and \u03c6(um) = u1. The\nsequence Side(u1),Side(u2), . . . ,Side(um) is the node-cycle of the orbit. We will\nconsider cyclic permutations of orbits\/node-cycles to be equivalent to the original\norbit\/node-cycle. All orbits are disjoint since, for any point u on an orbit, \u03d5(\u2212t)(u)\nis uniquely defined for all t \u2265 0 so there is no point at which two orbits could join.\n1824 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nFIG. 3. The triangle process.\nA trajectory converges onto an orbit u1, . . . , um when there exists n0 \u2265 0 such\nthat\n|z(mt + n+ n0)\u2212 un|1 \u2192 0 as t \u2192 \u221e for each n = 1,2, . . . ,m,\nthat is, for each n, the subsequence of the trajectory corresponding to phase n of\nthe node-cycle converges to un. For any point z = (x, i) \u2208 A0i and 0 < \u03b5 < x, let\nN\u03b5(z) = {z\u2032 \u2208 A0i : |\u03c0(z\u2032)\u2212 x|1 < \u03b5}(8)\ndenote the \u03b5-neighborhood of u, N +\u03b5 (z) = {z\u2032 \u2208 A0i : 0 \u2264 \u03c0(z\u2032) \u2212 x < \u03b5} and\nN \u2212\u03b5 (z) = {z\u2032 \u2208 A0i : 0 \u2264 x \u2212 \u03c0(z\u2032) < \u03b5} the one-sided \u03b5-neighborhoods of z. We\nwill say an orbit is stable when, for each un, there exists \u03b5 > 0 such that trajecto-\nries starting from any z \u2208 N\u03b5(un) converge onto the orbit. When trajectories started\nfrom z \u2208 N +\u03b5 (un) but not from N \u2212\u03b5 (un) (or vice versa) converge onto the orbit,\nwe say the orbit is stable on one side and otherwise we say the orbit is unstable.\nAn orbit containing a decision point must be unstable if it is of odd length m and\nmay be stable on one side if m is even.\nWe are now in position to state our main results for the triangle process Z. These\nhold for any set of parameters \u03bbi , \u00b5i , i = 1,2,3, satisfying conditions (5).\nTHEOREM 3.1. For almost all decision points di \u2208 A0, i = 1,2,3, the trian-\ngle process Z has finitely many periodic orbits. For such sets of decision points,\nall trajectories z(t) are eventually periodic and each converges onto one of these\norbits as t \u2192 \u221e.\nThe quantifier \u201calmost all\u201d is used in the sense of Lebesgue measure \u00d7 counting\nmeasure on [0,1] \u00d7 {1,2,3}. Due to the convergence behavior of all trajectories,\nTRANSIENT POLLING SYSTEMS 1825\nwe will call this the stable case. Typically, in this case all the orbits are stable, but\nunstable orbits are possible when an orbit includes a decision point.\nTHEOREM 3.2. For any set of decision points di, i = 1,2,3, there are at most\nfour periodic orbits.\nThe next result shows that not all choices of decision points result in all trajec-\ntories being eventually periodic.\nTHEOREM 3.3. There is an uncountable set of decision points for which Z\nhas nonperiodic trajectories.\nThese results have important consequences for the behavior of the underly-\ning stochastic process \u0003 = {\u03be(t)}t . We now introduce the random times \u03c4t , t =\n1,2, . . . , at which the server changes queues. Under the assumptions in (5) on the\nparameters, the \u03c4t are all a.s. finite. The next result concerns the stochastic triangle\nprocess\n\u03b6(t) = \b(\u03be(\u03c4t )), t = 1,2, . . . .(9)\nThis process has trajectories living on A0, so we can use the same definition of\nconvergence for it as for the triangle process.\nTHEOREM 3.4. Suppose the service times have variances \u03c3 2i < \u221e. For any\nset of decision points (d1, d2, d3) such that Z is stable, the stochastic process \u03b6\nis also stable in the sense that a.s. each trajectory of \u03b6 converges onto one of the\nperiodic orbits of Z.\nTHEOREM 3.5 (No zero\u2013one law). There exist configurations of the decision\npoints such that the stochastic process \u03b6 has nonperiodic trajectories with positive\nprobability.\nWe construct an example with trajectories that can converge to a periodic orbit\nof Z with positive probability and also can be nonperiodic with positive probabil-\nity.\nSome open problems.\n\u2022 It seems from numerical computations that there are, in fact, at most three orbits.\nIs this correct or are there examples with four orbits?\n\u2022 Is it also true that, for any given set of decision points di , the sets of parameters\n\u03bb,\u00b5 where there are nonperiodic orbits has measure zero?\n\u2022 Which of the results proved here also hold when there are four or more nodes?\n\u2022 Can the stochastic process \u03b6 converge with positive probability to an orbit of\neven length which contains a decision point and is only stable on one side?\n1826 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\n4. Proofs for the triangle process. The conditions for transience or recur-\nrence of the stochastic process \u0003 are in terms of the traffic intensities \u03c1i in accord\nwith the intuition that considering weighted work at nodes rather than just the\nnumbers of queued jobs should not affect such properties. Such a re-weighting\nalso helps simplify the treatment of the triangle process. To describe its effect, we\nintroduce the fractional linear functions F\u03b1 : [0,1] \u2192 [0,1], where, for any \u03b1 > 0,\nF\u03b1(x) = x\/(\u03b1+ (1\u2212\u03b1)x). These have a key composition property F\u03b1 \u25e6F\u03b2 = F\u03b1\u03b2 .\nLEMMA 4.1 (Re-weighting). Consider the triangle process Z with parame-\nters \u03bbi , \u00b5i , di for i = 1,2,3 and define T :A0 \u2192 A0 by T (z) = F\u00b5\nk\u02c6\n\/\u00b5\uf6be\u02c6 (z), z \u2208\nA0\n\u0131\u02c6\n, \u0131\u02c6 = 1,2,3. Z is isomorphic to the triangle process Z\u2032 with parameters \u00b5\u2032i = 1,\n\u03bb\u2032i = \u03bbi\/\u00b5i = \u03c1i and d \u2032i = T (di), i = 1,2,3. Specifically, for any given z(0) \u2208 A0,\nif Z\u2032 is started from T (z(0)), then z\u2032(t) = T (z(t)) for t = 1,2, . . . .\nPROOF. We start by assuming that only parameters \u03bb\u0131\u02c6 , \u00b5\u0131\u02c6 for some \u0131\u02c6 are\ntransformed by multiplication by \u03b1 > 0 and briefly describe an isomorphism be-\ntween trajectories of the dynamical processes y and y\u2032. Define \u0013\u0131\u02c6 :R3+ \u2192 R3+ by\n\u0013\u0131\u02c6(y) = y + (\u03b1 \u2212 1)y\u0131\u02c6e\u0131\u02c6 , so \u0013\u0131\u02c6 rescales R3+ by \u03b1 in the e\u0131\u02c6 direction. Let \u0007j (y\u00af) and\n\u0007\u2032j (y\u00af) denote the lines through y\u00af parallel to the trajectories of y(t) and y\u2032(t) respec-\ntively when the server is at node j . Then \u0013\u0131\u02c6(\u0007j (y\u00af)) = \u0007\u2032j (\u0013\u0131\u02c6(y\u00af)). This space rescal-\ning provides an isomorphism between entire trajectories whenever the switching\ndecisions are identical, or, equivalently, r \u2032(\u0013\u0131\u02c6(y\u00af)) = r(y\u00af) for all y\u00af \u2208 \u2202R3+.\nThe class of threshold policies is closed under space rescalings \u0013\u0131\u02c6 with the\nparameters b\uf6be\u02c6 \u0131\u02c6 being mapped to \u03b1b\uf6be\u02c6 \u0131\u02c6 and bk\u02c6\u0131\u02c6 to \u03b1bk\u02c6\u0131\u02c6 with consequent changes\nto d\uf6be\u02c6 and dk\u02c6 . Now for any y\u00af \u2208 \u2202R3+ and z = \b(y\u00af) = (x, i), we find that z\u2032 =\n\b(\u0013\u0131\u02c6(z)) satisfies\nz\u2032 =\n\uf8f1\uf8f2\n\uf8f3\n(x, i), i = \u0131\u02c6,(\nF1\/\u03b1(x), i\n)\n, i = \uf6be\u02c6 ,(\nF\u03b1(x), i\n)\n, i = k\u02c6,\nwhere (\u0131\u02c6, \uf6be\u02c6 , k\u02c6) is a cyclic permutation of (1,2,3). Applying successive rescalings\nby 1\/\u00b5i in the ei direction for i = 1, 2, 3 and using the composition property\nof F\u03b1 gives the result. Note that F\u03b1 satisfies F\u03b1(0) = 0, F\u03b1(1) = 1 and F \u2032\u03b1(x) > 0,\nx \u2208 (0,1), so the mapping T fixes the corners ei of A0 and smoothly rescales the\nsides. \u0001\nThe implication of Lemma 4.1 is that we need only study the triangle process\nwith parameters \u00b51 = \u00b52 = \u00b53 = 1 and general \u03bbi and di to understand the pos-\nsible behavior of the general case. We will work with the rates \u00b5k = 1 from this\npoint. We now find, from (3), that \u03b8k =\u2211n \u03c1n \u2212 1 =: \u03b8 > 0 for each k as we are\nin the transient case. It follows from standard projective geometry results that the\nTRANSIENT POLLING SYSTEMS 1827\nfoci vk are the vertices of an equilateral triangle V with sides parallel to the A0i , as\nshown in Figure 3. It can also be seen directly as, from equation (4) for each k,\nvk = 1\n\u03b8\n(\n\u03c1iei + \u03c1jej + (\u03c1k \u2212 1)ek) and, hence, vi \u2212 vj = 1\n\u03b8\n(ej \u2212 ei).\nUnder conditions (5), the vk are outside S+1 , as remarked after equation (4). Let VA\ndenote those points of A0 which are internal to V and VAi = A0i \u2229 VA. In Figure 3,\nVA contains all of A0 except the neighborhood of e1.\nWhen \u03c1k < \u03b8 or, equivalently, \u03c1i + \u03c1j > 1, the line from vi to vj meets A0i\nat the point (1 \u2212 \u03b1)ej + \u03b1ek with \u03b1 = \u03c1k\/\u03b8 \u2208 (0,1), while if \u03c1i + \u03c1j < 1, then\nek \u2208 VA. If ek\u02c6 \/\u2208 VA, let Jk\u02c6 = {z \u2208 A0\u0131\u02c6 :x > \u03c1k\u02c6\/\u03b8} \u222a {z \u2208 A0\uf6be\u02c6 :x < 1 \u2212 \u03c1k\u02c6\/\u03b8} denote\nthe corner of A0 containing e\nk\u02c6\nand lying outside VA. Let J\nk\u02c6\n= \u2205 when e\nk\u02c6\n\u2208 VA (so\nJ2 = J3 = \u2205, but J1 \u0005= \u2205 in Figure 3).\nThe next two lemmas state key properties of the node process mappings but\nignore the effect of the decision points. Translating definition (6) into the triangle\nprocess notation, we find that f\uf6be\u02c6 :A0\u0131\u02c6 \u222aA0k\u02c6 \u2192 A0\uf6be\u02c6 satisfies\nf\uf6be\u02c6 (x, \u0131\u02c6) =\n(\n\u03c1\u0131\u02c6(1 \u2212 x)\n1 \u2212 \u03c1\uf6be\u02c6 + \u03b8(1 \u2212 x), \uf6be\u02c6\n)\nand\n(10)\nf\uf6be\u02c6 (x, k\u02c6) =\n(\n\u03c1\u0131\u02c6x + (1 \u2212 \u03c1\uf6be\u02c6 )(1 \u2212 x)\n1 \u2212 \u03c1\uf6be\u02c6 + \u03b8x , \uf6be\u02c6\n)\nand f\uf6be\u02c6 (e\uf6be\u02c6 ) = f\uf6be\u02c6 (0, \u0131\u02c6) = f\uf6be\u02c6 (1, k\u02c6) = \u03c1\u0131\u02c6\/(\u03c1\u0131\u02c6 + \u03c1k\u02c6), which demonstrates continuity\nof the fj at the corners ej of A0.\nLEMMA 4.2 (Contraction property). The function f\uf6be\u02c6 is monotone on A0\u0131\u02c6 \u222aA0k\u02c6\nand there exists \u03b3 \u2208 (0,1) and C\uf6be\u02c6 (\u03b3 ) \u2282 A0\u0131\u02c6 \u222aA0k\u02c6 such that for z, z\u2032 \u2208 C\uf6be\u02c6 (\u03b3 )\u2229A0n,\nn = \u0131\u02c6, k\u02c6, we have |f\uf6be\u02c6 (z)\u2212 f\uf6be\u02c6 (z\u2032)|1 < \u03b3 |z \u2212 z\u2032|1 and further,\nC\uf6be\u02c6 (\u03b3 ) \u2283 {(x, \u0131\u02c6) : 0 \u2264 x \u2264 min(1, \u03c1k\u02c6\/\u03b8)} \u222a\n{\n(x, k\u02c6) : max\n(\n0,1 \u2212 (\u03c1\u0131\u02c6\/\u03b8)\n)\u2264 x \u2264 1},\nso C\uf6be\u02c6 (\u03b3 ) \u2283 VA\u0131\u02c6 \u222a VAk\u02c6 . The containment is strict if J\u0131\u02c6 \u222a Jk\u02c6 \u0005= \u2205.\nPROOF. On A0\n\u0131\u02c6\n, let g(x) = \u03c0(f\uf6be\u02c6 (x, \u0131\u02c6)) = \u03c1\u0131\u02c6(1 \u2212 x)\/(1 \u2212 \u03c1\uf6be\u02c6 + \u03b8(1 \u2212 x)).\nAs g\u2032(x) = \u2212\u03c1\u0131\u02c6(1 \u2212 \u03c1\uf6be\u02c6 )\/(\u03c1\u0131\u02c6 + \u03c1k\u02c6 \u2212 \u03b8x)2 < 0, g is monotone decreasing in x.\nChoose \u03b3\u0131\u02c6 such that if \u03c1k\u02c6 > \u03b8 , then |g\u2032(1)| = \u03c1\u0131\u02c6\/(1 \u2212 \u03c1\uf6be\u02c6 ) \u2264 \u03b3\u0131\u02c6 < 1, while if\n\u03c1\nk\u02c6\n< \u03b8 , |g\u2032(\u03c1\nk\u02c6\n\/\u03b8)| = (1 \u2212 \u03c1\uf6be\u02c6 )\/\u03c1\u0131\u02c6 \u2264 \u03b3\u0131\u02c6 < 1. The same argument applies for se-\nlecting \u03b3\nk\u02c6\non A0\nk\u02c6\nusing g(x) = (\u03c1\u0131\u02c6x + (1 \u2212 \u03c1\uf6be\u02c6 )(1 \u2212 x))\/(1 \u2212 \u03c1\uf6be\u02c6 + \u03b8x). Finally,\nchoose \u03b3 \u2265 max(\u03b3\u0131\u02c6, \u03b3k\u02c6) and set C\uf6be\u02c6 (\u03b3 ) = {z \u2208 A0\u0131\u02c6 \u222aA0k\u02c6 : |g\u2032(x)| \u2264 \u03b3 }. \u0001\n1828 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nThe mapping f\uf6be\u02c6 may not be contracting near e\u0131\u02c6 or ek\u02c6 if they are not in\nVA. This\nimplies that \u03d5 may not be contracting around, say, (x,1) if \u03c13 < \u03b8 , d1 is close to e3\nand \u03c13\/\u03b8 < x < d1.\nStarting from z \u2208 A0i , we can apply either fj or fk to z, then again apply ei-\nther fi or fk to fj (z) \u2208 A0j and so on. Let \u03c3 \u2208 {1,2,3}N denote a sequence with the\nproperties \u03c31 \u0005= i, \u03c3t \u0005= \u03c3t\u22121, t = 1, 2, . . . (such a sequence will be called allowed\nsequence). For z \u2208 A0i , let f (t)\u03c3 (z) = f\u03c3t (f\u03c3t\u22121(\u00b7 \u00b7 \u00b7 (f\u03c31(z) \u00b7 \u00b7 \u00b7)). As the mappings fi\nare monotone, they are invertible and we will need, a little later, to consider map-\npings f (\u2212t)\u03c3 (z) = f (\u22121)\u03c3t (f (\u22121)\u03c3t\u22121 (\u00b7 \u00b7 \u00b7 (f (\u22121)\u03c31 (z) \u00b7 \u00b7 \u00b7)).\nLEMMA 4.3. There exists a constant \u03ba > 0 such that, for any short enough\ninterval [u,w] \u2282 VAi , i \u2208 {1,2,3}, and any allowed sequence \u03c3 , with the constant\n\u03b3 \u2208 (0,1) from Lemma 4.2:\n(i) \u2223\u2223f (t)\u03c3 (w)\u2212 f (t)\u03c3 (u)\u2223\u22231 \u2264 \u03b3 t |w \u2212 u|1 for t = 1,2, . . . ,\n(ii) e\u2212\u03ba|w\u2212u|1 |v \u2212 u|1|w \u2212 u|1 \u2264\n|f (t)\u03c3 (v)\u2212 f (t)\u03c3 (u)|1\n|f (t)\u03c3 (w)\u2212 f (t)\u03c3 (u)|1\n\u2264 e\u03ba|w\u2212u|1 |v \u2212 u|1|w \u2212 u|1 , t = 1,2, . . . ,for any v \u2208 (u,w).\nPROOF. Inequalities (i) follow immediately from Lemma 4.2 since we have\nfj (\nVAi) \u2282 VAj for all pairs i \u0005= j . For part (ii), consider any monotone function g\non a short interval [a, b] with |g\u2032(x)| > \u03b11 > 0 and |g\u2032\u2032(x)| < \u03b12. Expanding g to\nsecond order around a with Taylor\u2019s theorem, we find that, for any c \u2208 (a, b),\ng(c)\u2212 g(a)\ng(b)\u2212 g(a) =\nc \u2212 a\nb \u2212 a (1 + \u03b7) where \u03b7 = O(b \u2212 a)\nand is nonzero by monotonicity of g. Composing this result t times, we obtain\n|f (t)\u03c3 (v)\u2212 f (t)\u03c3 (u)|1\n|f (t)\u03c3 (w)\u2212 f (t)\u03c3 (u)|1\n= |v \u2212 u|1|w \u2212 u|1\nt\u220f\nn=1\n(1 + \u03b7n),\nwhere |\u03b7n| < \u03ba1|w \u2212 u|1\u03b3 n for some \u03ba1 > 0 independent of u, v, w and \u03c3 . This\nestablishes the second set of inequalities. Intuitively, the idea here is that lines from\npoints v \u2208 [u,w] to vertex vj will be almost parallel when |w \u2212 u|1 is small, so\nrelative lengths of subintervals will be about the same after mapping by fj . \u0001\nFrom Lemmas 4.2 and 4.3, it follows that there is 0 < \u03b3 < 1 such that map-\nping \u03d5 is uniformly contracting on C(\u03b3 ) := C\u0131\u02c6(\u03b3 ) \u222a C\uf6be\u02c6 (\u03b3 ) \u222a Ck\u02c6(\u03b3 ). Fix this \u03b3\nfrom now on.\nLEMMA 4.4. All points z on a periodic orbit lie in VA.\nTRANSIENT POLLING SYSTEMS 1829\nFIG. 4. A case in the proof of Lemma 4.4.\nPROOF. We show instead that points outside VA, that is, z \u2208 J\nk\u02c6\nfor some k\u02c6,\ncannot lie on a periodic orbit because they have terminating sequences of pre-\nimages. Suppose J\nk\u02c6\n\u0005= \u2205.\nIf neither d\u0131\u02c6 or d\uf6be\u02c6 \u2208 Jk\u02c6 , then \u03d5(Jk\u02c6) \u2282 A0k\u02c6 \u2229 VA and no z \u2208 Jk\u02c6 has a pre-image.\nIf d\uf6be\u02c6 \u2208 Jk\u02c6 but d\u0131\u02c6 \/\u2208 Jk\u02c6 , then, recalling the notation \u03c0(z) = x for z = (x, i), those\nz \u2208 A0\n\u0131\u02c6\n\u2229 J\nk\u02c6\nwith \u03c0(z) < \u03c0(f\u0131\u02c6(d\uf6be\u02c6 )) have a single pre-image, while the other z \u2208 Jk\u02c6\nhave none. The case with d\u0131\u02c6 \u2208 Jk\u02c6 but d\uf6be\u02c6 \/\u2208 Jk\u02c6 is similar.\nIf both d\u0131\u02c6 , d\uf6be\u02c6 \u2208 Jk\u02c6 , as shown in Figure 4, then f\uf6be\u02c6 (d\u0131\u02c6), f\u0131\u02c6(d\uf6be\u02c6 ) \u2208 Jk\u02c6 , but no\nz \u2208 {z \u2208 A0\n\u0131\u02c6\n:\u03c0(z) > \u03c0(f\u0131\u02c6(d\uf6be\u02c6 ))} \u222a {z \u2208 A0\uf6be\u02c6 :\u03c0(z) < \u03c0(f\uf6be\u02c6 (d\u0131\u02c6))} has a pre-image\nunder \u03d5. Let \u03c3 = {\u0131\u02c6, \uf6be\u02c6 , \u0131\u02c6, \uf6be\u02c6 , . . .} and observe that f (\u22122t)\u03c3 (z) \u2192 ek\u02c6 as t \u2192 \u221e\nfor any z \u2208 A0\n\uf6be\u02c6\n\u2229 J\nk\u02c6\n. Hence, for z \u2208 A0\n\uf6be\u02c6\nwith \u03c0(z) > \u03c0(fj (d\u0131\u02c6)), we see that\n\u03c0(f\n(\u22122t)\n\u03c3 (z)) < \u03c0(f\uf6be\u02c6 (d\u0131\u02c6)) for some finite t and these z have only finitely many pre-\nimages under \u03d5. Any point in A0\n\uf6be\u02c6\n\u2229J\nk\u02c6\ncan be written as fj (z) for some z \u2208 A0\u0131\u02c6 \u2229Jk\u02c6 ,\nso they too have finitely many pre-images in this case. We note that a forward tra-\njectory from any z \u2208 J\nk\u02c6\neither enters VA or converges onto the period two orbit on\nthe points (\u03c1\nk\u02c6\n\/\u03b8, \u0131\u02c6) and (1 \u2212 \u03c1\nk\u02c6\n\/\u03b8, \uf6be\u02c6 ). \u0001\nLEMMA 4.5. For any starting point z(0), there is t0 > 0 such that z(t) \u2208 C(\u03b3 )\nfor all t \u2265 t0.\nPROOF. We see that VA is closed under \u03d5, so once a trajectory enters it never\nleaves. Any trajectory that never enters VA must remain in one of the J\u0131\u02c6 and so, by\nLemma 4.4, converges to the two cycle on the endpoints of that J\u0131\u02c6 . In either case\nLemma 4.2 implies that it enters the contracting region and remains there. \u0001\nLEMMA 4.6. For any eventually-m-periodic trajectory z(t), t = 0,1,2, . . . :\n1830 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\n(i) there exists an orbit u1, . . . , um of period m onto which the trajectory z(t)\nconverges;\n(ii) trajectories z\u2032(t) with the same node-cycle converge onto the same orbit;\n(iii) there can be at most one orbit having a given node-cycle.\nPROOF. (i) Note that, as z(t) is eventually-m-periodic, there exists t0 > 0 such\nthat Side(z(t +m)) = Side(z(t)) for t \u2265 t0. Now Lemma 4.5 implies there will be\nt1 > 0 such that z(t) \u2208 C(\u03b3 ) for all t \u2265 t1. Since Side(z(tm + i)) is the same for\nall t \u2265 t0, Lemma 4.2 implies\u2223\u2223z((t + 1)m+ i)\u2212 z(tm+ i)\u2223\u22231 \u2264 \u03b3m\u2223\u2223z(tm+ i)\u2212 z((t \u2212 1)m+ i)\u2223\u22231\nand, hence, ui = limt\u2192\u221e z(tm + i) exists. For parts (ii) and (iii), Lemmas\n4.4 and 4.2 imply that, for some r \u2264 m, |z(t) \u2212 z\u2032(t + r)|1 \u2192 0 exponentially\nquickly as t \u2192 \u221e, so the trajectory z\u2032(t) converges onto the orbit u1, . . . , um.\nThe existence of another orbit v1, . . . , vm with the same node-cycle is impossible\nbecause we can choose z\u2032(0) = v1. \u0001\nRecall the notation At+1 = \u03d5(At ) = \u00b7 \u00b7 \u00b7 = \u03d5(t+1)(A0). The set At contains all\npoints that have at least t pre-images under \u03d5. Let P = {\u03d5(\u2212t)(di) : i = 1,2,3; t =\n0,1,2, . . .} be the set of pre-images of the decision points and P be its closure. Let\n|z\u2212P |1 = infz\u2032\u2208P |z\u2212z\u2032|1 denote the distance from z to P\u2014of course, |z\u2212P |1 =\n|z\u2212P |1.\nREMARKS. If {d1, d2, d3} \u2229 At = \u2205 for some finite t , then P is finite. If\n{d1, d2, d3} \u2229 At \u0005= \u2205 for any finite t , then P can still be finite when there is a\nfinite orbit containing one or more of the decision points. The only other possibil-\nity is that at least one decision point has infinitely many distinct pre-images and\nso P is infinite. An orbit containing a decision point must be unstable if it is of\nodd length m and may be stable on one side if m is even.\nLEMMA 4.7. (i) If P is finite, then the triangle process has a finite number\nof periodic orbits and each trajectory z(t), from any starting point z(0), converges\nonto one of these orbits as t \u2192 \u221e.\n(ii) Whether P is finite or not, if z \/\u2208 P and the trajectory z(t) with z(0) = z\nconverges onto the orbit u1, . . . , um, then, for some \u03b5 > 0, there is a unique tra-\njectory starting from each z\u2032 \u2208 N\u03b5(z) and it converges onto this orbit.\n(iii) Any orbit u1, . . . , um with un \/\u2208 P for each n = 1, . . . , m is stable.\nPROOF. (i) As P is finite, we can partition A0 into |P | open intervals On\n(indexed anticlockwise from the interval containing e1, say) with points of P as\nendpoints. These On are never split by mapping with \u03d5 as they and their images\nnever contain decision points, so each On is mapped into another by \u03d5 as it is\nTRANSIENT POLLING SYSTEMS 1831\ncontinuous and monotone except at the di . Thus, \u03d5 induces a mapping h of the\nindices {1, 2, . . . , |P |} into itself and, hence, h has a core K \u2286 {1, 2, . . . , |P |}\nsuch that h(K) = K . As h has no fixed points, it permutes K and so factors into a\nproduct of disjoint nontrivial cycles and, hence, all trajectories starting from z \/\u2208 P\nare periodic with one of a finite number of node-cycles. Each node-cycle supports\nonly a single orbit by Lemma 4.6 and these trajectories converge onto one of these\norbits.\nNow consider trajectories with z(0) = z \u2208 P . If, for any t \u2265 1, we have\nz(t) \u2208 On for some n, then the trajectory is periodic and converges onto a finite\norbit by the above argument. This only leaves trajectories with z(t) \u2208 P for all\nt \u2265 0. As was remarked when orbits were defined, all orbits are disjoint, so a tra-\njectory can only remain in P by following a single orbit.\n(ii) As z \/\u2208 P , the trajectory started from z never hits a decision point and so\nnever branches. As P is closed, there exists \u03b5 > 0 such that |z \u2212 P |1 > \u03b5, so no\ntrajectory started from any z\u2032 \u2208 N\u03b5(z) ever branches. As N\u03b5(z) contains no pre-\nimages of decision points, the same switching decisions are made for each of these\ntrajectories at all times t , so they have the same node-cycle and by Lemma 4.6, they\nconverge to the orbit u1, . . . , um. Part (iii) follows immediately by considering\nz(0) = u1. \u0001\nWe are now ready to establish Theorems 3.1 and 3.2. Let \u00b5 denote Lebesgue\nmeasure on A0 in the following proofs. This measure is consistent with the dis-\ntance | \u00b7 |1 we are using and any null sets in A0 will remain so under change of the\nparameters, as the re-weighting in Lemma 4.1 is smooth.\nPROOF OF THEOREM 3.1. It suffices to show that almost all choices of deci-\nsion points di lie outside the At they generate after some finite t . It follows from\nLemmas 4.4 and 4.2 that \u00b5(At) \u2192 0 as t \u2192 \u221e for any decision points di , but this\nis not sufficient since lim inft At is a function of the di . What we show is that, for\nany given parameters \u03c1i , there is a measure zero set of locations for the decision\npoints where they could have infinitely many pre-images.\nWe start with the case ei \/\u2208 VA or, equivalently, Ji \u0005= \u2205, i = 1,2,3. Let J 1i =\nfi(Ji) and J t+1i = fi(J tj \u222a J tk ) for i = 1,2,3 and t = 1,2, . . . (here {j, k} =\n{1,2,3} \\ {i}). These sets are well defined as J 1i \u2282 VAi and, hence, J ti \u2282 VAi\nfor all t . Further, Ji \u2229 J 1i = \u2205 and, hence, J t+1i \u2229\n\u22c3t\nn=1 Jni = \u2205 for all t . Let\nI ti = VAi \\\n\u22c3t\n1 J\nn\ni and note that I\nt+1\ni = fi(I tj \u222a I tk).\nWe initially consider only VAi . At stage t \u2032, the set\n\u22c3t \u2032\n1 J\nn\ni consists of 2t\n\u2032+1 \u2212 1\ndisjoint intervals interleaved with the 2t \u2032+1 intervals forming I t \u2032i . The set J t\n\u2032+1\ni\ncontains 2t \u2032+1 intervals, each interior to one of those of I t \u2032i . Recall that \u00b5 is the\nmeasure induced by the distance | \u00b7 |1. Let K > 0 be such that \u00b5(I t \u2032j ) < K\u00b5(J t\n\u2032+1\nj ),\nj = 1, 2, 3. As \u2211tn=1 \u00b5(Jni ) \u2264 \u00b5(VAi) \u2264 1, it follows that \u00b5(J ti ) \u2192 0 as t \u2192 \u221e.\n1832 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nFrom Lemma 4.3(i), each subinterval of I t \u2032j , j = 1, 2, 3, has length bounded\nby \u03b3 t \u2032 for some \u03b3 < 1. Now from Lemma 4.3(ii), it follows, by summing over all\nthe subintervals in I t \u2032i and mapping sequences, that\n\u00b5\n(\nI t\n\u2032+t\ni\n)\n< e\u03ba\u03b3\nt \u2032\nK\u00b5\n(\nJ t\n\u2032+t+1\ni\n)\n, t = 2,3, . . .\nand, hence, \u00b5(I ti ) \u2192 0 as t \u2192 \u221e. The set I ti contains all points in A0i that could\nhave t or more pre-images, given appropriately chosen decision points. Hence,\nI\u221ei =\n\u22c2\u221e\n1 I\nt\ni contains those points that could have infinitely many pre-images and\n\u00b5(I\u221ei ) = 0 .\nThis construction is independent of the choice of the decision points and works\non all three sides of VA. With I\u221e =\u22c331 I\u221ei , we have shown \u00b5(I\u221e) = 0, that is,\n\u00b5-almost all choices of the decision points have only finitely many pre-images\nunder the mapping \u03d5 that they define. The theorem now follows in this case from\nLemma 4.7.\nIt remains to modify this argument in the case where one or more of the ei \u2208\nVA. For any such corner, Ji = \u2205, so let J 0i (\u03b5) = {|z \u2212 ei |1 < \u03b5} when ei \u2208 VA,\nJ 0i = Ji otherwise, where \u03b5 > 0 is small. The previous double mapping process\nwill produce overlapping sets, so we modify it by setting J 1i = fi(J 0i ) \\ (J 0j \u222a\nJ 0k ) and then J\nt+1\ni = fi(J tj \u222a J tk ) \\ (J 0j \u222a J 0k ) for i = 1, 2, 3 and t = 1, 2, . . . .\nThis change ensures the previous disjointness properties and the construction goes\nthrough without further change, except that now some of the sub-intervals of I ti\nmay be empty. As before, we conclude that \u00b5(I\u221e) = 0, though here I\u221e does\ndepend upon \u03b5.\nTo relate this construction to the existence of pre-images, let Dn = {(d1, d2,\nd3) : all z \u2208 J 0i (1\/n), i = 1,2,3, have no legitimate pre-images under \u03d5}. Then\u22c3\nnDn = A01 \u00d7 A02 \u00d7 A03. For any fixed n, D\u221en = Dn \u2229 I\u221e has \u00b5(D\u221en ) = 0 and\nhence \u00b5(\n\u22c3\u221e\n1 D\n\u221e\nn ) \u2264\n\u2211\u221e\n1 \u00b5(D\n\u221e\nn ) = 0. Now the result follows as before. \u0001\nPROOF OF THEOREM 3.2. We consider first the case where P = {\u03d5(\u2212t)(di) :\ni = 1,2,3; t = 0,1,2, . . .}, the set of pre-images of the decision points, is finite.\nA point z \u2208 P is of type i when it is a pre-image of di . P splits A0 into closed\nintervals Mn, n = 1, 2, . . . , |P | which are never split by iterated mappings with \u03d5.\nHence, each Mn contains points from at most one periodic orbit and as \u03d5 is con-\ntracting on VA, each Mn can contain only a single point from an orbit\u2014in cases\nwhere the shared endpoint of Mn and Mn+1 lies on an orbit, that is, this orbit con-\ntains one or more decision points, there can be at most one other orbit with a point\nin Mn \u222aMn+1.\nThe number of orbits is limited by each di being at the boundary of just two\nintervals. Consider an orbit with a point u \u2208 Mt which has an endpoint \u03d5(\u2212r)(di).\nThe point \u03d5(r)(u) lies on the same orbit but occupies one of the Mn neighboring di ,\nor equals di . By the preceding paragraph, there are at most six orbits.\nTRANSIENT POLLING SYSTEMS 1833\nWe can reduce the bound as there are at least two intervals Mn with endpoints\nof different type, ij and ik, say. Suppose the first is Mt with endpoints \u03d5(\u2212r)(di)\nand \u03d5(\u2212s)(dj ) with r < s. The interval \u03d5(r)(Mt) has endpoints di and \u03d5(r\u2212s)(dj )\nso it neighbors di . \u03d5(s)(Mt) sits inside an interval neighboring dj . If Mt contains\na point from an orbit, then this orbit occupies two of the six intervals neighboring\nthe decision points. If Mt contains no point from any orbit, then neither can one\nof the intervals neighboring di . Either way, the maximum number of orbits is now\nonly five. Repeat the argument with the interval with endpoints ik and there are at\nmost four orbits in the stable case, that is, where P is finite.\nWe now extend this argument to the case where P is infinite\u2014let P \u2032 = {z \u2208\nP : z has infinitely many pre-images}. Suppose there are some finite orbits and\nconsider any of them. It cannot include any points in P \u2032, so choose \u03b5 > 0 small\nenough that |un \u2212 di |1 > \u03b5 for every un on the orbit and each di \u2208 P \u2032. It follows\nthat |un \u2212 \u03d5(\u2212r)(di)|1 > \u03b5 for every un on the orbit and every point in P \u2032 for sup-\npose this was not true. Select the \u03d5(\u2212r)(di) with minimal r within \u03b5 of un. By\nLemma 4.3(i), it follows that\u2223\u2223\u03d5(r)(un)\u2212 di \u2223\u22231 \u2264 \u03b3 r \u2223\u2223un \u2212 \u03d5(\u2212r)(di)\u2223\u22231 < \u03b5,\nin contradiction to our choice of \u03b5. Now our argument for the stable case applies\nwith the added possibility that one or more di may be limit points (from one or\nboth sides) of P further restricting the opportunities for orbits. \u0001\nWe show later that it is possible for finite orbits to exist simultaneously with\nnonperiodic trajectories in this nonstable case. In our study of this model we sim-\nulated the triangle process over the whole range of its parameters \u03c1i and di . To\navoid problems with rounding, we used an algebraic representation of the process\nwhich is described below in Section 5. The representation there of the decision\npoints has to be finite in practice, so the results of the computer analysis were\nsometimes inconclusive, for example, the implemented algorithm sometimes pro-\nduced trajectories that were not trapped by an orbit in the number of steps we could\naccurately calculate. Otherwise, the algorithm identified either 1, 2 or 3 orbits and\nnever more. Therefore, we conjecture that Theorem 3.1 can be strengthened, by\nreplacing at most four orbits by three orbits. We did not manage to prove this an-\nalytically, though. That three orbits can exist is easily seen after a little numerical\nwork with Figure 5 as a guide.\n5. The triangle process in the nonstable case. We now show that there are\nlocations for the decision points where at least one of them has infinitely many\npre-images and nonperiodic trajectories exist. This argument necessarily uses yet\nanother way of describing the triangle process. We will consider only the case\nwhere each Ji = \u2205, but our construction can be carried out in other cases too, with\nsome limitations.\n1834 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nFIG. 5. An example with three orbits.\nWe first construct a binary representation z = \u0131\u02c6 :x1x2x3 . . . with each xt \u2208 {0,1}\nfor all points of A0. For each z \u2208 A0\n\u0131\u02c6\n, \u0131\u02c6 = 1,2,3, set [recall the notation \u03c0(\u00b7) from\nSection 3]\nx1 =\n{0, if \u03c0(z) < \u03c0(f\u0131\u02c6(e\u0131\u02c6)),\n1, if \u03c0(z) \u2265 \u03c0(f\u0131\u02c6(e\u0131\u02c6)).\nTo continue this construction, set B1\n\u0131\u02c6\n= {f\u0131\u02c6(e\u0131\u02c6)} and Bt+1\u0131\u02c6 = f\u0131\u02c6(Bt\uf6be\u02c6 \u222aBtk\u02c6) for \u0131\u02c6 = 1,\n2, 3 and t = 1, 2, . . . .\nEach set Bt\n\u0131\u02c6\ncontains 2t\u22121 points which, by monotonicity of the mappings f\u0131\u02c6 ,\ninterleave the 1 + 2t\u22121 points of \u22c3t\u22121r=1 Br\u0131\u02c6 and, hence, split in two each of the 2t\u22121\nintervals created up to stage t \u2212 1. Label the br \u2208 Bt\uf6be\u02c6 \u222a Btk\u02c6 clockwise and the\nar \u2208\u22c3t\u22121r=1 Br\u0131\u02c6 anticlockwise so that a0 = ej and\n\u03c0(ar\u22121) < \u03c0(f\u0131\u02c6(br)) < \u03c0(ar), r = 1,2, . . . ,2t\u22121,\nand for z \u2208 [ar\u22121, ar), set\nxt =\n{0, if \u03c0(z) < \u03c0(f\u0131\u02c6(br)),\n1, if \u03c0(z) \u2265 \u03c0(f\u0131\u02c6(br)).\nThis encodes every point of A0 with a unique binary code up to the usual indeter-\nminacy for points terminating with infinite strings of zeros or ones, for example,\ne1 = 2 : 111 \u00b7 \u00b7 \u00b7 = 3 : 000 \u00b7 \u00b7 \u00b7 .\nThis binary encoding can be used to define a distance between points z =\ni :x1x2 \u00b7 \u00b7 \u00b7 , z\u2032 = i :x\u20321x\u20322 \u00b7 \u00b7 \u00b7 by\n|z\u2212 z\u2032|b \u2261\n\u221e\u2211\nt=1\n|xt \u2212 x\u2032t | \u00b7 2\u2212t(11)\nTRANSIENT POLLING SYSTEMS 1835\nand we note the following: (i) ordering of points on A0i by \u03c0(z) corresponds to\nlexicographic ordering on the binary sequence x; (ii) any sequence of points which\nis convergent under | \u00b7 |1 remains convergent under | \u00b7 |b and vice versa; (iii) this\nmetric induces a measure \u00b5b on A0i .\nIn defining the required decision points, we will make much use of the inverse\nmapping \u03c8 , where\n\u03c8(z) = f (\u22121)i (z), z \u2208 A0i\nfor i = 1,2,3. When \u03d5(\u22121)(z) exists, then we will say \u03c8 is legitimate and we\nhave \u03c8(z) = \u03d5(\u22121)(z). The mapping \u03c8 can be described quite simply using the\nbinary encoding. For z = \u0131\u02c6 :x1x2 \u00b7 \u00b7 \u00b7 with x1 = 0, then \u03c8(z) = k\u02c6 :y1y2 \u00b7 \u00b7 \u00b7 , where\ny1 = 1 \u2212 x2, y2 = 1 \u2212 x3 and so on. In general, let w\u00af = 1 \u2212 w for w \u2208 {0,1},\nx\u00af = x\u00af1x\u00af2 \u00b7 \u00b7 \u00b7 and with this notation \u03c8 maps\n\u0131\u02c6 : 0x \u2212\u2192 k\u02c6 : x\u00af and \u0131\u02c6 : 1x \u2212\u2192 \uf6be\u02c6 : x\u00af(12)\nfor \u0131\u02c6 = 1, 2, 3.\nThe forward mapping \u03d5 thus can be represented as\n\u0131\u02c6 :x \u2212\u2192 \uf6be\u02c6 : 0x\u00af if x \u2264 d\u0131\u02c6 and \u0131\u02c6 :x \u2212\u2192 k\u02c6 : 1x\u00af if x \u2265 d\u0131\u02c6 .\nNow represent each point of A0 by a point in the interval [0,1] using the mapping\ni :x1x2 \u00b7 \u00b7 \u00b7 \u2212\u2192 i \u2212 13 +\n1\n3\n\u221e\u2211\nj=1\n2\u2212j xj\nand ignore, for the moment, the branching at the decision points. The forward\nmapping \u03d5 becomes\n\u03d5(x) =\n{\u221212x + 1, for x \u2208 [d\u02dc1, d\u02dc2)\u222a [d\u02dc3,1),\n\u221212x + 12 , for x \u2208 [0, d\u02dc1)\u222a [d\u02dc2, d\u02dc3),\n(13)\nfor x \u2208 [0,1), where d\u02dc1, d\u02dc2 , d\u02dc3 \u2208 [0,1) are the points corresponding to the decision\npoints. The mapping above can be regarded as a particular case of the affine inter-\nval exchange transformation model (see, e.g., [2, 7]). The mapping defined by (13)\nis contracting and is not order-preserving, which makes it different from the usual\nand well-studied case of interval exchange transformations (see, e.g., [3, 11] and\nreferences therein). Note also that, for interval exchange transformations with con-\ntracting and\/or flips, it is natural that cycles do exist (see [3]), as happens in our\nmodel.\n5.1. A decision point with infinitely many pre-images. We are now ready to\nconstruct decision points providing a nonstable case. We will use q = 1001 and\nr = 0110, two four digit sequences such that q\u00af = r and such that \u03c8 successively\nmaps z = \u0131\u02c6 :qx and z = \u0131\u02c6 : rx as follows:\nz = \u0131\u02c6 : 1001x \u2212\u2192 \uf6be\u02c6 : 110x\u00af \u2212\u2192 k\u02c6 : 01x \u2212\u2192 \uf6be\u02c6 : 0x\u00af \u2212\u2192 \u0131\u02c6 :x = \u03c8(4)(z)\n1836 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nand, similarly,\nz = \u0131\u02c6 : 0110x \u2212\u2192 k\u02c6 : 001x\u00af \u2212\u2192 \uf6be\u02c6 : 10x \u2212\u2192 k\u02c6 : 1x\u00af \u2212\u2192 \u0131\u02c6 :x = \u03c8(4)(z).\nThe decision points have the form\nd1 = 1 :qrx \u00b7 \u00b7 \u00b7 ,\nd2 = 2 : 1010100000 \u00b7 \u00b7 \u00b7 ,(14)\nd3 = 3 : 0100000 \u00b7 \u00b7 \u00b7 ,\nwhere x, the infinite tail of the sequence for d1, will be constructed recursively\nat a later point to ensure that d1 has infinitely many legitimate \u03c8-images. As the\nnotation di identifies the triangle side, we will sometimes use it to denote just the\nbinary sequence. Note that, under lexicographic ordering, r = 0110 < 1001 = q .\nFor d1 to have infinitely many legitimate \u03c8-images, it must certainly have one\nand the intervals with at least one legitimate \u03c8-image are\non A01 [0d3,1d2] = [0101111 \u00b7 \u00b7 \u00b7 ,1010101111 \u00b7 \u00b7 \u00b7],\non A02 [0d1,1d3] = [0rqx\u00af \u00b7 \u00b7 \u00b7 ,110111111 \u00b7 \u00b7 \u00b7],\non A03 [0d2,1d1] = [00101011111 \u00b7 \u00b7 \u00b7 ,1rqx\u00af \u00b7 \u00b7 \u00b7],\nwhich the reader can readily check certainly contain d1 and the \u03c8(t)(d1) for t =\n1, 2, . . . , 8. We will construct the rest of the binary sequence for d1 so that its\n\u03c8-images always fall in these three intervals by finding a sequence of quadruples\nq and r that guarantees legitimacy.\nExtended legitimacy property. The sequence d1 = y1y2y3 \u00b7 \u00b7 \u00b7 where y1 = q ,\ny2 = r and yt \u2208 {q, r} for t = 3,4, . . . has extended legitimacy if, under lexico-\ngraphical ordering,\n(a) when yt = r , then yt+1yt+2 \u00b7 \u00b7 \u00b7 > d1,\n(b) when yt = q , then yt+1yt+2 \u00b7 \u00b7 \u00b7 < d1,\nwhere q > r as remarked above.\nAt each t \u2265 3 this property ensures the legitimacy of \u03c8(4t\u2212r)(d1) for r = 3, 2,\n1, 0. We will now construct an aperiodic sequence with extended legitimacy and\nshow that this means there are decision points leading to the existence of aperiodic\norbits which is crucial for establishing Theorem 3.3.\nFix an irrational \u03b1 \u2208 (1,2) and some \u03b2 \u2208 [\u22121,1]. Let y = y(\u03b1,\u03b2) = y1y2y3 \u00b7 \u00b7 \u00b7\nbe a sequence of quadruples q and r with y1 = q , y2 = r and for t = 3,4, . . . ,\nyt+1 =\n{\nq, if 1 +Qt < \u03b1(1 +Rt)+ \u03b2,\nr, otherwise,\nwhere Qt = Qt(y) =\u2211tr=1 1{yr=q} and Rt = t \u2212 Qt , that is, Qt is the number of\ntimes q appears in the sequence y1y2 \u00b7 \u00b7 \u00b7yt . This sequence is defined using suc-\ncessive rational approximations to the irrational number \u03b1 as shown in Figure 6,\nwhich shows a staircase approximating the line y = \u03b1x + \u03b2 .\nTRANSIENT POLLING SYSTEMS 1837\nFIG. 6. Staircase diagram for sequence qrqqrqrq . . . .\nLEMMA 5.1. There are uncountably many sets of decision points where at\nleast one of them has infinitely many pre-images.\nPROOF. We first show that, for any irrational \u03b1 > 0, the sequence y\u2032 =\ny(\u03b1,\u03b2 \u2032) is lexicographically less than y\u2032\u2032 = y(\u03b1,\u03b2 \u2032\u2032) whenever \u22121 \u2264 \u03b2 \u2032 < \u03b2 \u2032\u2032 \u2264 1.\nSuppose y\u2032 and y\u2032\u2032 are not equal. Then there is t \u2265 1 such that y\u2032n = y\u2032\u2032n for\nn \u2264 t , but y\u2032t+1 \u0005= y\u2032\u2032t+1. Evidently, Qt(y\u2032) = Qt(y\u2032\u2032) and Rt(y\u2032) = Rt(y\u2032\u2032), so the\nonly way for y\u2032t+1 \u0005= y\u2032\u2032t+1 is\n\u03b1\n(\n1 +Rt(y\u2032))+ \u03b2 \u2032 < 1 +Qt(y\u2032)\n= 1 +Qt(y\u2032\u2032)\n< \u03b1\n(\n1 +Rt(y\u2032\u2032))+ \u03b2 \u2032\u2032,\nin which case y\u2032t+1 = r < q = y\u2032\u2032t+1. As the fractional parts of m\u03b1, m = 1,2, . . . ,\nare dense in (0,1), the inequalities \u03b2 \u2032 < n \u2212 m\u03b1 < \u03b2 \u2032\u2032 are satisfied for infinitely\nmany pairs of integers m, n and so the above inequalities also show that y\u2032 = y\u2032\u2032 is\nnot possible.\nNow consider the sequence y = y(\u03b1,0) which starts qr \u00b7 \u00b7 \u00b7 . Each r is followed\nby a q and there cannot be more than two qs in succession as \u03b1 < 2. Suppose\nyt = r . Then the sequence yt+1yt+2yt+3 \u00b7 \u00b7 \u00b7 coincides with y(\u03b1,\u03b2t ), where\n\u03b2t = \u03b1Rt \u2212Qt > 0\n1838 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nand so yt+1yt+2yt+3 \u00b7 \u00b7 \u00b7 > y. If instead yt = q , then either yt+1 = r so that imme-\ndiately we have yt+1yt+2yt+3 \u00b7 \u00b7 \u00b7 < y or yt+1 = q , in which case yt+1yt+2yt+3 \u00b7 \u00b7 \u00b7\ncoincides with y(\u03b1,\u03b2t ), where\n\u03b2t = \u03b1Rt \u2212Qt < 0\nand so yt+1yt+2yt+3 \u00b7 \u00b7 \u00b7 < y. In all cases we see that the sequence y has extended\nlegitimacy at t for all t \u2265 3. As \u03b1 is irrational, \u03b1Rt \u2212 Qt = 0 is not possible and,\nhence, there is no t such that yt+1yt+2yt+3 \u00b7 \u00b7 \u00b7 = y from which it follows immedi-\nately that y is aperiodic.\nTo establish this lemma, let d1 = 1 :y(\u03b1,0) and d2, d3 be as defined in (14)\nfor some irrational \u03b1 \u2208 (1,2). By construction, d1 has an infinite sequence of le-\ngitimate \u03c8-images or, equivalently, an infinite sequence of pre-images under \u03d5.\n\u0001\nREMARKS. For the above set of the decision points, there is also a period 3\norbit: (a, c, b), with the points of the orbit given by\n1 : 101010 \u00b7 \u00b7 \u00b710 \u00b7 \u00b7 \u00b7 ,\n3 : 101010 \u00b7 \u00b7 \u00b710 \u00b7 \u00b7 \u00b7 ,(15)\n2 : 101010 \u00b7 \u00b7 \u00b710 \u00b7 \u00b7 \u00b7 .\nWe mention here that originally we were not sure that the nonstable case was pos-\nsible and unsuccessfully tried to prove this using the triangle process description\nof this section. The specific combination of decision points producing the nonpe-\nriodic orbits described above was discovered by studying computer output (of a\nprogramme written to generate sample trajectories) to assess various lines of in-\nvestigation.\n5.2. The nonstable case has \u00b5b-measure 0. The measure \u00b5b on A0 induced\nby the metric | \u00b7 |b is generally singular with respect to Lebesgue measure, but the\nset of decision points with infinitely many \u03d5 pre-images has \u00b5b-measure 0.\nSuppose we select the decision points uniformly, that is, each digit in the binary\nsequence is 0 or 1 with chance 1\/2 independently of the other digits. Then \u00b5b\na.s. we can write, for some k \u2265 0,\nd2 = 2 : 11 \u00b7 \u00b7 \u00b711\ufe38 \ufe37\ufe37 \ufe38\nk times\n0 \u00b7 \u00b7 \u00b7 .\nThis means the interval in A01 with legitimate \u03c8-images has left endpoint\n00 \u00b7 \u00b7 \u00b700\ufe38 \ufe37\ufe37 \ufe38\nk+1 times\n1 \u00b7 \u00b7 \u00b7 .\nTRANSIENT POLLING SYSTEMS 1839\nThe Borel\u2013Cantelli lemma tells us that \u00b5b a.s. there is a subsequence in the binary\nsequence for d1 of the form\ny = 00 \u00b7 \u00b7 \u00b700\ufe38 \ufe37\ufe37 \ufe38\nm times\n10 00 \u00b7 \u00b7 \u00b700\ufe38 \ufe37\ufe37 \ufe38\nm times\n10 00 \u00b7 \u00b7 \u00b700\ufe38 \ufe37\ufe37 \ufe38\nm times\n,\nwhere m> k + 3 is even. Now consider the sequence \u03c8(t)(d1), t \u2265 1. For some r ,\n\u03c8(r)(d1) starts with either the above sequence y or with y\u00af and for some s \u2264 2m+6,\n\u03c8(t+s)(d1) is a point on A01 with binary sequence starting with at least k + 2 zeros\nand so its next \u03c8-image is not legitimate. It follows immediately that the set of\ndecision points di with infinitely many pre-images has \u00b5b-measure 0.\n5.3. Properties of the deterministic system when P is infinite. For the triple\nof the decision points constructed in (14), d1 has infinitely many pre-images and\nsince \u03c8\u22125(d2) = 1 : 000 \u00b7 \u00b7 \u00b7 = e2 and \u03c8\u22122(d3) = 1 : 111 \u00b7 \u00b7 \u00b7 = e3, both d2 and d3\nhave finitely many pre-images under \u03d5, unlike d1. Throughout this section, the\ntriple of the decision points is assumed to be such that d1 has infinitely many pre-\nimages, while d2 and d3 have only finitely many. We also assume in this subsection\nthat VA = A0 so that \u03d5 is contracting everywhere.\nLet P1 = {d1,\u03c8(d1),\u03c8(2)(d1), . . .} be the infinite set of pre-images of d1 under\n\u03d5 which, by assumption, are all legitimate. We will study the properties of this set.\nLet P 1 denote the closure of the set P1.\nLEMMA 5.2. Each u \u2208 P1 is a limiting (accumulation) point of P1.\nPROOF. It is sufficient to show that d1 is a limiting point for P1. Indeed, since\nthe mapping \u03c8 doubles the distance | \u00b7 |b between points, if d1 is limiting for a\nsequence u1, u2, . . . \u2282 P1, then \u03c8(i)(d1) is a limiting point for \u03c8(i)(u1), \u03c8(i)(u2),\n. . . \u2282 P1 [as mentioned just after (11), the distances | \u00b7 |1 and | \u00b7 |b are topologically\nequivalent so sets of points generate the same limit points under both].\nConsider any point u \u2208 A0 which is a limiting point for P1, that is, there is a\nsequence of indices t1 < t2 < t3 < \u00b7 \u00b7 \u00b7 such that limn \u03c8(tn)(d1) = u. No such u can\nbe a pre-image of d2 or d3, as for each t , A0 \\At , the set of points with fewer than t\nlegitimate pre-images, is open. Hence, around each pre-image of d2 or d3 there is\nan open interval of points which have only finitely many pre-images and so cannot\ncontain any \u03c8(t)(d1).\nIf u \u2208 P1, then u = \u03c8(m)(d1) for some m which is unique (otherwise u is in a\nfinite orbit and P1 cannot be infinite). Without loss of generality, we can assume\nm < t1 and then, since the mapping \u03d5(m) is continuous except at \u03c8(n)(d1) for\nn <m, d1 = \u03c6(m)(u) = limn \u03c8(tn\u2212m)(d1).\nIf u \/\u2208 P1, fix a small \u03b5 > 0 and consider the \u03b5-neighborhood N\u03b5(u) of u as\ndefined in (8). Assume that \u03b5 is so small that there are no pre-images of d2 or d3\nin N\u03b5(u). Let m be the smallest index such that \u03c8(m)(d1) \u2208 N\u03b5(u). Then N\u03b5(u)\n1840 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\ncontains infinitely many points of P1 and each is a pre-image of d1 with the index\nof at least m. Now map N\u03b5(u) with \u03d5(m)(\u00b7) which sends \u03c8(m)(d1) to d1 and all\nthe points of the neighborhood N\u03b5(u) follow the same trajectory. As \u03d5(m)(\u00b7) is\ncontracting here, \u03d5(m)(N\u03b5(u)) is an interval within N\u03b5(d1). This implies that there\nare infinitely many points of P1 in N\u03b5(d1). Letting \u03b5 \u2193 0, we obtain that d1 is a\nlimiting point for P1. \u0001\nThe following statement immediately follows from Lemma 5.2, properties of\nperfect sets and the fact that P1 is infinite and countable.\nCOROLLARY 5.1. The set P 1 is a perfect set (\u2261 it is closed and every point\nof it is an accumulation point). Therefore, P 1 is uncountable, and hence, P 1 \\P1\nis also uncountable.\nRecall that P is the union of P1 and the set of d2 and d3 and their finitely\nmany pre-images. Then P is the union of P 1 and the set of d2 and d3 and their\npre-images, and is also closed.\nLEMMA 5.3. If u \u2208 P 1, then u does not belong to any finite orbit and no\ntrajectory z(t) with z(0) = u can be periodic.\nPROOF. If u \u2208 P1, then \u03d5(n)(u) = d1 for some n. However, if u belonged to a\nfinite orbit, then \u03d5(m)(u) = u for some m and, hence, \u03d5(m)(d1) = d1, contradicting\nthe fact that d1 has more than m distinct pre-images under \u03c8r = \u03d5(\u22121).\nNow suppose u \u2208 P 1 \\ P1 and u belongs to a finite orbit. As d2, d3 \/\u2208 An for\nsome finite n and An is closed, we can choose \u03b5 > 0 so that |di \u2212 An|1 > \u03b5 for\ni = 2, 3. Since P 1 \u2282 An, it follows that the neighborhood N\u03b5(u) contains no pre-\nimages of d2 or d3. Let n = n(\u03b5) be the smallest index such that \u03c8(n)(d1) \u2208 N\u03b5(u).\nAs \u03d5(n) does not split this neighborhood, \u03d5(n)(N\u03b5(u)) \u2282 N2\u03b5(d1) and so there is a\npoint of the orbit, u\u2032, say, with |u\u2032 \u2212 d1|1 < 2\u03b5. Letting \u03b5 \u2193 0, we obtain a contra-\ndiction, since this orbit contains only m distinct points and does not contain d1.\nFinally, consider any trajectory z(t) with z(0) = u and suppose it is periodic. By\nLemma 4.6(i), z(t) converges onto an orbit w1, . . . , wm and we have just shown\nthere exists \u03b5 > 0 such that N\u03b5(w1)\u2229P 1 = \u2205. However, z(t) = \u03d5(t)(u) \u2208 N\u03b5(w1)\nfor some large t , while simultaneously, by Lemma 5.2, \u03d5(t)(u) is a limiting point\nand, hence, an element of P 1 which is impossible. \u0001\nPROOF OF THEOREM 3.3. Lemma 5.1 explains how to construct d1 with an\ninfinite sequence of pre-images under \u03d5. Also, by Lemma 5.1, the binary sequence\nfor d1 is not periodic and, hence, by Lemma 5.3, there are nonperiodic trajectories\n{z(t) : t \u2265 0} for the triangle process. \u0001\nThis completes the main task of this section, but it is possible to say more about\nthe mixture of periodic and nonperiodic trajectories. We know from Lemma 4.6(ii)\nTRANSIENT POLLING SYSTEMS 1841\nthat all periodic trajectories avoiding decision points are stable. It is easy to see that\nthere can be stable periodic trajectories even if P is infinite. For example, for the\ndecision points given by (14), the sequence in (15) is an orbit with period 3.\nWe say that a point u \u2208 A0i is an R-limit (L-limit resp.) for P1 if there is a\nsequence of points u1, u2, . . . in A0i \u2229P1 such that \u03c0(un) \u2193 u [\u03c0(un) \u2191 u resp.], that\nis, for an R-limit, un+1 is clockwise of un for each n. The next result strengthens\nLemma 5.2.\nLEMMA 5.4. Each point u \u2208 P1 is limiting for P1 on both sides, that is, it is\nboth an R-limit and an L-limit for P1.\nPROOF. It suffices to show that d1 is both an R-limit and an L-limit, since all\nother points of P1 are \u03c8-images of d1.\nBy Lemma 5.2, d1 is a limiting point for P1, but suppose that it is just an R-limit\nand not an L-limit. Then there is \u03b4 > 0 such that:\n(i) there are no P1 points on the interval (d1 \u2212 \u03b4, d1), and\n(ii) there are no pre-images of d2 or d3 in the segment [d1, d1 + \u03b4].\nSince mapping \u03c8 reverses the orientation of intervals, if u = \u03c8(n)(d1) \u2208 A01 and n\nis even, then u is an R-limit and not an L-limit, while if n is odd, then u is an\nL-limit and not an R-limit.\nFix 0 < \u03b41 < \u03b4. Denote dn1 := \u03c8(n)(d1), n = 1,2, . . . , and define\nr := min{n :\u03c8(n)(d1) \u2208 (d1, d1 + \u03b41]},(16)\nso dr1 is the point of P1 \u2229[d1, d1 + \u03b41] with the smallest index. If r is even, then we\nobtain a contradiction since \u03d5(r)((d1, dr1]) is not split during these mappings and\n\u03d5(r)(dr1) = d1. Since r is even, \u03d5(r) preserves orientation and is contracting so that\n\u03d5(r)((d1, d\nr\n1]) \u2282 (d1 \u2212 \u03b4, d1], which contradicts the assumption that (d1 \u2212 \u03b4, d1)\u2229\nP1 = \u2205.\nTherefore, in any small interval (d1, d1 + \u03b41), dr1 has r odd and there will be\ninfinitely many dn1 with odd n within (d1, d1 + \u03b41). This implies there will also\nbe dm1 with even m in (d1, d1 + \u03b41) since \u03d5(r) reverses orientation and is contract-\ning, so \u03d5(r)((d1, dr1]) \u2282 [d1, dr1) and all the dn1 \u2208 (d1, dr1] with odd n > r have been\nmapped to dn\u2212r1 with n\u2212 r even.\nNow choose dm1 in (d1, d1 + \u03b4) with the smallest possible even index m \u2265 2 and\nchoose odd index t < m such that dt1 \u2208 (d1, dm1 ) with dt1 the closest of such points\nto dm1 . Such a t \u2265 r exists by the arguments following (16) above. The interval\n(dt1, d\nm\n1 ] contains no dn1 with index less than m so, as \u03d5(t) reverses orientation and\nis contracting, \u03d5(t)(dm1 ) = dm\u2212t1 \u2208 (d1 \u2212 \u03b4, d1), contradicting the assumption that\n(d1 \u2212 \u03b4, d1)\u2229P1 = \u2205. \u0001\n1842 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nLEMMA 5.5. Fix a point u and suppose u \/\u2208 P . Then u belongs to the segment\n[l\u02dc(u), r\u02dc(u)] = [l\u02dc, r\u02dc] such that each of l\u02dc and r\u02dc is either a pre-image of d2 or d3, or\nbelongs to P 1 and l\u02dc(u) is the largest of such points and r\u02dc(u) is the smallest of such\npoints:\nl\u02dc(u) = max{\u03c0(s) : Side(s) = Side(u), \u03c0(s) < \u03c0(u), s \u2208 P },\nr\u02dc(u) = min{\u03c0(s) : Side(s) = Side(u), \u03c0(s) > \u03c0(u), s \u2208 P }.\nMoreover, the trajectory started from u can be periodic only if both l\u02dc(u) and r\u02dc(u)\nare pre-images of d2 or d3.\nPROOF. The existence of l\u02dc(u) and r\u02dc(u) follows from the fact that P is closed.\nAlso, \u03c0(l\u02dc(u)) < \u03c0(r\u02dc(u)) since the complement of the set P is open.\nSuppose, for example, that l\u02dc(u) is not a pre-image of d2 or d3, that is, l\u02dc(u) \u2208 P 1.\nSince there are no pre-images of the decision points on [l\u02dc(u), u], u and l\u02dc(u) can\nfollow the same trajectory under mapping \u03d5. On the other hand, by Lemma 5.3, no\ntrajectory started from l\u02dc(u) is periodic, hence, the trajectory starting from u is not\nperiodic. \u0001\nLemma 5.5 implies that the set of points from which periodic trajectories can\nstart\u2014call this the periodic set\u2014consists of finitely many intervals, since d2 and d3\nhave only finitely many pre-images. Also, the periodic set has measure smaller than\nthe total length of the sides of the triangle, since P1 is infinite. At the same time,\nLemma 5.4 yields that, for any u \/\u2208 P , if l\u02dc(u) \u2208 P 1, then l\u02dc(u) \/\u2208 P1, and the same\nis true for r\u02dc(u).\nCall the set of points u for which one of l\u02dc(u) or r\u02dc(u) is in P 1, while the other\nis a pre-image of d2 or d3, semi-periodic. The endpoint which is in P 1 will be\nreferred to as an aperiodic endpoint.\nSince there are finitely many pre-images of d2 and d3, the length \u0019 > 0 of the\nshortest interval in either in the periodic set or the semi-periodic set is properly\ndefined. We say that a point belongs to the aperiodic set if it does belong either to\nthe periodic or the semi-periodic set.\n6. Behavior of the stochastic process when P is finite. We can now show\nhow the behavior of the stochastic process \u0003 introduced in Section 2 is influenced\nby the behavior of the deterministic triangle process. Recalling (9), we consider\n\u03b6(n) = \b(\u03be(\u03c4n)),\nthe projection onto S+1 of \u0003 at the random times \u03c4n, n = 0,1,2, . . . , when the\nserver switches from one queue to another (where \u03c40 = t0, a constant to be deter-\nmined), under the transience conditions in (5), that is, \u03bbi\/\u00b5i = \u03c1i < 1 for each i\nand \u03c1 =\u2211\u03c1i > 1.\nTRANSIENT POLLING SYSTEMS 1843\nWe wish to prove Theorem 3.4, namely, that the trajectories of \u03b6(n) a.s. con-\nverge onto one of the stable orbits of the triangle process, under the assump-\ntion that P , the set of pre-images of the decision points under \u03d5, is finite and\nP \u2229At = \u2205 for some finite t .\nRecall the assumption that the service time distribution with the server at\nqueue i has finite variance \u03c3 2i . It is convenient, as with the triangle process, to\nuse the transformation in Lemma 4.1, so we can assume that each \u00b5i = 1. We now\nspell out some elementary properties of random walks and Poisson processes.\nPreliminaries. Consider a random walk Sn = \u2211nt=1 Xt on Z, where S0 = 0,\nE(Xt) = \u03c1j \u2212 1 < 0 and Var(Xt) = \u03c3 2 and Xt \u2265 \u22121. Define the stopping times\nTc = min{n :Sn = \u2212c} for c = 1, 2, . . . and let T1,n be independent copies of T1\nso that Tc is equal in distribution to\n\u2211c\nt=1 T1,t . Using the standard martingales\nSn +n(\u03c1j \u2212 1) and (Sn +n(\u03c1j \u2212 1))2 \u2212n\u03c3 2, we find that E(T1) = 1\/(1\u2212\u03c1j ) and\nVar(T1) = \u03c3 2\/(1 \u2212 \u03c1j )3 and, hence, that\nE(Tc) = c\/(1 \u2212 \u03c1j )\nand\nVar(Tc) = c\u03c3 2\/(1 \u2212 \u03c1j )3.\nChebyshev\u2019s inequality provides the bound P[|Tc \u2212 c\/(1 \u2212 \u03c1j )| > c2\/3] \u2264\nc\u03c3 2\/c4\/3(1 \u2212 \u03c1j )3 = c\u22121\/3\u03c3 2\/(1 \u2212 \u03c1j )3 on the likely size of deviations from\nthe mean.\nNext consider a homogeneous Poisson process with arrivals at rate \u03c1 and\nlet L = L0 + N(Tc), where L0 is constant and N(Tc) the number of arrivals\nby time Tc. Standard calculations give E(L) = L0 + \u03c1E(Tc) and Var(L) =\n\u03c12 Var(Tc)+ \u03c1E(Tc). Applying these to the process \u0003 over the interval \u03c4n+1 \u2212 \u03c4n\nwith the server at node j , we have, for i \u0005= j ,\nE\n(\n\u03bei(\u03c4n+1)|\u03be(\u03c4n))= \u03bei(\u03c4n)+ \u03c1i\u03bej (\u03c4n)\n(1 \u2212 \u03c1j )(17)\nand\nVar\n(\n\u03bei(\u03c4n+1)|\u03be(\u03c4n))= \u03bej (\u03c4n)\u03c12i \u03c3 2j + \u03c1i(1 \u2212 \u03c1j )2\n(1 \u2212 \u03c1j )3 .(18)\nUsing Chebyshev\u2019s inequality, we have\nP\n[\u2223\u2223\u2223\u2223\u03bei(\u03c4n+1)\u2212 \u03bei(\u03c4n)\u2212 \u03c1i\u03bej (\u03c4n)(1 \u2212 \u03c1j )\n\u2223\u2223\u2223\u2223> \u03bej (\u03c4n)2\/3\u2223\u2223\u2223\u03be(\u03c4n)\n]\n(19)\n\u2264 \u03bej (\u03c4n)\u22121\/3\n\u03c12i \u03c3\n2\nj + \u03c1i(1 \u2212 \u03c1j )2\n(1 \u2212 \u03c1j )3 .\n1844 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nWhile typical deviations on the number of arrivals are of order\n\u221a\n\u03bej (\u03c4n), this simple\nbound for larger deviations will be enough for our purposes.\nTo estimate the effect of the projection, we apply Taylor\u2019s theorem to the func-\ntion\ng(u1, u2;a, b) = a + u1\nb + u1 + u2 ,\nwhere 0 \u2264 a \u2264 b are constants [compare with equation (10)], which provides the\nformula\ng(u1 + h1, u2 + h2;a, b)\u2212 g(u1, u2;a, b) = h1u2 \u2212 h2(a + u1)\n(b + u1 + u2 + \u03b1(h1 + h2))2 ,\nwhere \u03b1 \u2208 (0,1). Applying this at u1 + u2 = u with |hi | \u2264 u2\/3 for i = 1, 2\u2014the\ndeviation considered in (19)\u2014we obtain the bound\n|g(u1 + h1, u2 + h2;a, b)\u2212 g(u1, u2;a, b)|\n\u2264 (a + u1 + u2)(|h1| + |h2|)\n(b + u1 + u2 + \u03b1(h1 + h2))2(20)\n\u2264 |h1| + |h2|\nb + u1 + u2\n(\n1 + 2 |h1| + |h2|\nb + u1 + u2 +O(u\n\u22122\/3)\n)\n\u2264 2u\u22121\/3 as u \u2192 \u221e.\nDeviations hi = O(\u221au) give a smaller bound, but what we have will suffice.\nPROOF OF THEOREM 3.4. We start with the stochastic process Wn =\u22113\ni=1 \u03bei(\u03c4n), n = 0,1,2, . . . , the total number of jobs at the queues at switch-\ning epochs subsequent to \u03c40 = t0, some initial time to be chosen below. From (17)\nand (18), we have\nE\n(\nWn+1|\u03be(\u03c4n),R(\u03be(\u03c4n)) = j )= \u03c1i + \u03c1k1 \u2212 \u03c1j \u03bej (\u03c4n)+ \u03bei(\u03c4n)+ \u03bek(\u03c4n)\n= Wn + \u03b81 \u2212 \u03c1j \u03bej (\u03c4n),\nwhere \u03b8 =\u221131 \u03c1k \u2212 1 > 0. As we are only considering threshold switching rules,\nthere is some value D > 0 (dependent on the decision points) such that if the\nserver switches to queue j at time \u03c4n, then \u03bej (\u03c4n) > DWn for each j and every n.\nHence, with \u03bd = 12 minj D\u03b8\/(1 \u2212 \u03c1j ) > 0, this implies that {(1 + 2\u03bd)\u2212nWn} is a\nnonnegative submartingale and so Wn grows exponentially in mean. At this point\nwe also introduce \u03bd\u2032 > 0 with (1 + \u03bd\u2032)3 = 1 + \u03bd.\nWe are assuming that P \u2229 At = \u2205 eventually so, for any sufficiently small\n\u03b50 > 0, there exists n0(\u03b50) such that |z \u2212 z\u2032|1 > 2\u03b50 whenever z \u2208 P , z\u2032 \u2208 An0 ,\nTRANSIENT POLLING SYSTEMS 1845\nthat is, the set An0 is at least 2\u03b50 away from the decision points and their pre-\nimages. Also, by Lemma 4.2, we can choose n0 large enough that An0 \u2282 C(\u03b3 ),\nthe set where \u03d5 is contracting. We want to show that any stochastic trajectory (in\nprojection) enters An0 and then converges onto a trajectory of the triangle process.\nDefine a sequence of events Gn, n = 0,1,2, . . . , depending on parameters w0,\n\u03b50 by [recall (9)] G0(w0) = {W0 \u2265 w0} \u2229 {|\u03b6(0)\u2212 z|1 < \u03b50 for some z \u2208 An0} and\nGn = {Wn >w0(1 + \u03bd)n} \u2229 {\u2223\u2223\u03b6(n)\u2212 \u03d5(\u03b6(n\u2212 1))\u2223\u22231 \u2264 \u03b50\u03bd\u2032(1 + \u03bd\u2032)\u2212n}.\nWe first bound P[Gn|\u22c2n\u221211 Gt ]. Choose w0 large enough that w1\/3 > 1\/\u03bd or,\nequivalently, w2\/3 < \u03bdw for all w \u2265 w0. As E(Wn|Wn\u22121) \u2265 (1 + 2\u03bd)Wn\u22121, we\nhave from (19)\nP[Wn \u2264 w0(1 + \u03bd)n|Wn\u22121 >w0(1 + \u03bd)n\u22121]\n< P\n[\u2223\u2223Wn \u2212 E(Wn|Wn\u22121)\u2223\u2223> \u03bdw0(1 + \u03bd)n\u22121|Wn\u22121 >w0(1 + \u03bd)n\u22121]\n< \u03b7\u03bd\u22121\/3w\u22121\/30 (1 + \u03bd\u2032)\u2212(n\u22121),\nwhere \u03b7 = maxijk((\u03c1i + \u03c1j )2\u03c3 2k + (\u03c1i + \u03c1j )(1 \u2212 \u03c1k)2))\/(1 \u2212 \u03c1k)3, a loose but ad-\nequate bound which shows that Wn grows geometrically quickly with large prob-\nability.\nNow we deal with deviation of the stochastic triangle process from the deter-\nministic one. From any y \u2208 R3+ with \b(y) = z \u2208 A0 \\A0\uf6be\u02c6 with the server at node \uf6be\u02c6 ,\nwe have\nf\uf6be\u02c6 (z) =\n\u2211\ni \u0005=\uf6be\u02c6\n(1 \u2212 \u03c1\uf6be\u02c6 )zi + \u03c1iz\uf6be\u02c6\n(1 \u2212 \u03c1\uf6be\u02c6 )+ \u03b8\uf6be\u02c6 z\uf6be\u02c6 ei \u2261\n(\n(1 \u2212 \u03c1\uf6be\u02c6 )z\u0131\u02c6 + \u03c1\u0131\u02c6z\uf6be\u02c6\n(1 \u2212 \u03c1\uf6be\u02c6 )(z\u0131\u02c6 + zk\u02c6)+ (\u03c1\u0131\u02c6 + \u03c1k\u02c6)z\uf6be\u02c6\n, \uf6be\u02c6\n)\nand multiplying the fraction by\n\u2211\nyi\/\n\u2211\nyi to switch to un-normalized values, we\nhave\n(1 \u2212 \u03c1\uf6be\u02c6 )z\u0131\u02c6 + \u03c1\u0131\u02c6z\uf6be\u02c6\n(1 \u2212 \u03c1\uf6be\u02c6 )(z\u0131\u02c6 + zk\u02c6)+ (\u03c1\u0131\u02c6 + \u03c1k\u02c6)z\uf6be\u02c6\n= (1 \u2212 \u03c1\uf6be\u02c6 )y\u0131\u02c6 + \u03c1\u0131\u02c6y\uf6be\u02c6\n(1 \u2212 \u03c1\uf6be\u02c6 )(y\u0131\u02c6 + yk\u02c6)+ (\u03c1\u0131\u02c6 + \u03c1k\u02c6)y\uf6be\u02c6\n.(21)\nFor the stochastic process \u0003 starting from \u03be(\u03c4n\u22121) = y with \u2211i yi > w0(1+\u03bd)n\u22121\nand the server at \uf6be\u02c6 , the bound (19) implies that, for i \u0005= \uf6be\u02c6 ,\nP\n[\u2223\u2223\u2223\u2223\u03bei(\u03c4n)\u2212\n(\nyi + \u03c1i y\uf6be\u02c61 \u2212 \u03c1\uf6be\u02c6\n)\u2223\u2223\u2223\u2223> y2\/3\uf6be\u02c6 \u2223\u2223\u2223\u03be(\u03c4n\u22121) = y\n]\n\u2264 \u03b7y\u22121\/3\n\uf6be\u02c6\n.\nNow the identity (21) and the estimate (20), when applied at \u03be(\u03c4n\u22121) = y with\u2211\nyi > w0(1 + \u03bd)n\u22121 and \u03bei(\u03c4n) in place of the ui + hi , immediately imply\nP\n[\u2223\u2223\u03b6(n)\u2212 \u03d5(\u03b6(n\u2212 1))\u2223\u22231 < 2w\u22121\/30 (1 + \u03bd\u2032)\u2212(n\u22121)|\u03be(\u03c4n\u22121)]\n\u2265 1 \u2212 2\u03b7w\u22121\/30 (1 + \u03bd\u2032)\u2212(n\u22121).\n1846 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\nThis bound only relies upon Wn\u22121 =\u2211i \u03bei(\u03c4n\u22121) > w0(1+ \u03bd)n\u22121, an event which\ncontains\n\u22c2n\u22121\n1 Gt . As the process \u0003 is Markov and we can choose w0 large enough\nthat 2w\u22121\/30 < \u03b50\u03bd\u2032\/(1 + \u03bd\u2032) and, as above, w1\/30 > 1\/\u03bd, we have established, for\nsuch w0, that\nP\n[\nGn\n\u2223\u2223\u2223 n\u22121\u22c2\n1\nGt\n]\n\u2265 1 \u2212 \u03b7\u03b50\u03bd\u2032(1 + \u03bd\u2032)\u2212n.\nA very similar argument can be used to show that P[G0] \u2265 1\u2212\u03b7\u03b50 when we choose\nw0 such that 2n0w\u22121\/30 < \u03b50.\nAs the stochastic trajectory projects into C(\u03b3 ) (the region of A0 where \u03d5 is con-\ntracting), then, as long as the switching decision is the same at \u03b6(t) and \u03d5(t)(\u03b6(0))\nfor every t , we have\n\u03b6(n)\u2212 \u03d5(n)(\u03b6(0)) =\nn\u22121\u2211\nt=0\n\u03d5(t)\n(\n\u03b6(n\u2212 t))\u2212 \u03d5(t+1)(\u03b6(n\u2212 t \u2212 1))\n\u2264\nn\u22121\u2211\nt=0\n\u03b6(n\u2212 t)\u2212 \u03d5(\u03b6(n\u2212 t \u2212 1))\n\u2264 \u03b50\u03bd\u2032\nn\u2211\nt=1\n(1 + \u03bd\u2032)\u2212t < \u03b50 on\nn\u22c2\n0\nGt.\nThis inequality says that the trajectory \u03b6(t) is never further than \u03b50 from the trian-\ngle process trajectory z(t) started at \u03b6(0). By choice of G0, every point of z(t) is\nmore than \u03b50 from any di , so the switching decisions for \u03b6(t) and z(t) will always\nbe the same. This shows that on\n\u22c2\u221e\n0 Gt the projections of the trajectories \u03be(t)\nconverge a.s. onto deterministic trajectories of the triangle process which by The-\norem 3.1 are periodic.\nFinally,\nP\n[\nn\u22c2\nt=0\nGt\n]\n= P[G0]\nn\u220f\nt=1\nP\n[\nGt\n\u2223\u2223\u2223 t\u22121\u22c2\n0\nGs\n]\n\u2265\nn\u22121\u220f\nt=0\n(\n1 \u2212 \u03b7\u03b50\u03bd\u2032(1 + \u03bd\u2032)\u2212t )\n\u2192 p(\u03b50) > 0 as n \u2192 \u221e,\nwhere p(\u03b50) \u2192 1 as \u03b50 \u2192 0. This establishes Theorem 3.4, namely, that the sto-\nchastic trajectories \u03b6(t) converge onto the stable orbits of z, as we can choose \u03b50\nas small as we like. \u0001\nTRANSIENT POLLING SYSTEMS 1847\nREMARK. The argument above is not delicate enough to decide whether tra-\njectories \u03b6(t) converge with positive probability onto orbits which are stable on\none side, for example, that are of even length and contain a decision point.\n7. The stochastic process when P is infinite. The proofs of the following\nresults employ the results of Section 5.3.\nLEMMA 7.1. Let \u03b6(n) denote the state of the stochastic system at time n. Fix\n\u03b4 > 0. Define the event EN,\u03b4 by\nEN,\u03b4 =\n{\u2223\u2223\u03b6(N + k)\u2212 \u03d5(k)(\u03b6(N))\u2223\u2223< \u03b4 for all k \u2265 0 such that\nSide\n(\n\u03b6(N + i))= Side(\u03d5(i)(\u03b6(N))) for i = 0,1, . . . , k\n}\n.(22)\nThen there exists a.s. N = N(\u03b4,\u03c9) such that EN,\u03b4 occurs.\nPROOF. Analogously to Section 6, one can conclude that there is 0 < \u03b3 < 1\nsuch that a.s., for all large n,\n\u03b5n :=\n\u2223\u2223\u03b6(n)\u2212 \u03d5(\u03b6(n\u2212 1))\u2223\u2223< \u03b3 n.(23)\nLet N1 = N1(\u03c9) be the smallest of such n and set N := max(N1,min{n :\u2211\u221e\ni=n \u03b3 i < \u03b4}). Then as long as \u03b6(N + k) and \u03d5(k)(\u03b6(N)) go through the same\nsequence of sides of the triangle A0,\u2223\u2223\u03b6(N + k)\u2212 \u03d5(k)(\u03b6(N))\u2223\u2223\n= \u2223\u2223\u03b6(N + k)\u2212 \u03d5(\u03b6(N + k \u2212 1))+ \u03d5(\u03b6(N + k \u2212 1))\u2212 \u03d5(\u03d5(k\u22121)(\u03b6(N)))\u2223\u2223\n\u2264 \u03b3 n+k + \u2223\u2223\u03b6(N + k \u2212 1)\u2212 \u03d5(k\u22121)(\u03b6(N))\u2223\u2223,\nwhere we used the fact that \u03d5 is contracting. Now the statement of the lemma\nfollows from induction. \u0001\nRecall the definition of the aperiodic set and of \u0019 at the end of Section 5.3.\nLEMMA 7.2. Define the event E by\nE = {the stochastic system never comes\ncloser than \u0019\/2 to pre-images of d2 or d3}.\nThen, given that the stochastic system starts in the aperiodic set, P(E) > 0.\nPROOF. First of all, we show that there is a constant K > 0 such that if u\nbelongs to the semi-periodic set, then \u03d5(k)(u) belongs to the aperiodic set for some\nk \u2264 K . Indeed, the image of an interval I of the semi-periodic set must be either\nanother semi-periodic interval, or must lie entirely inside an aperiodic interval or\n1848 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\na semi-periodic interval. However, if \u03d5(k)(I ) is in one of the finitely many semi-\nperiodic intervals for each k, this would imply that the points of I are periodic.\nThis contradicts Lemma 5.5.\nNow let \u03b4 = \u0019\/(2K) and suppose the system starts in the aperiodic set. By\nsimilar arguments to those of Section 6, with positive probability,\n\u2211\u221e\nn=0 |\u03b5n| < \u03b4,\nwhere \u03b5n is defined in (23). If for some n, \u03b6(n) is in the aperiodic set but \u03b6(n+ 1)\nis not, then u := \u03b6(n + 1) cannot be \u201cfar\u201d from the points of P1 since |\u03b5n| < \u03b4.\nBecause the intervals of the periodic set are separated from the aperiodic set by\nthe intervals of semi-periodic set, u a.s. belongs to a semi-periodic interval, say,\nI := [l\u02dc, r\u02dc], where l\u02dc \u2208 P 1 and r\u02dc is a pre-image of d2 or d3. We claim that, within\nthe next K applications of \u03d5, u will be \u201cthrown out\u201d of the image of I , or will be in\nthe aperiodic set or some semi-periodic interval not far from its aperiodic endpoint\nagain.\nTo show this, suppose \u03b6(n + k) lies in \u03d5(k)(I ) for the first K steps. Then, by\nthe choice of K , for some k, it will end up in the aperiodic set, and also it will not\napproach \u03d5(k)(r\u02dc) (which could possibly be d2 or d3) closer than K \u00d7 \u03b4 \u2264 \u0019\/2. On\nthe other hand, if \u03b6(n+k\u22121) \u2208 \u03d5(k\u22121)(I ) and yet \u03b6(n+k) \/\u2208 \u03d5(k)(I ), it means that\n\u03b6(n+k) is no further from \u03d5(k)(r\u02dc) than \u03b5n+k and it lies either in the aperiodic set or\nin a semi-periodic interval not far from its aperiodic endpoint \u03d5(k)(r\u02dc). (Conditioned\non\n\u2211\u221e\nn=0 |\u03b5n| < \u03b4, there is not enough randomness for the stochastic system to exit\nthe interval via the endpoint which is a pre-image of d2 or d3.) \u0001\nLEMMA 7.3. Conditioned on the event E, periodicity of the stochastic system\nimplies that d1 is a limiting point for the trajectory of the stochastic system.\nPROOF. Suppose not. Then there is \u03b4 = \u03b4(\u03c9) > 0 such that the points in the\n\u03b4-neighborhood of d1 are never hit by the stochastic system. Without loss of gener-\nality, suppose \u03b4 <\u0019\/2. By Lemma 7.1, there exists an N for this \u03b4 such that (22) is\nfulfilled. Then for any k \u2265 0, the distance between points \u03d5(k)(\u03b6(N)) and \u03b6(N +k)\ndoes not exceed \u03b4 as long as they follow the same trajectory. On the other hand,\nthey will follow the same trajectory, as there will never be the decision point d1\nbetween them, nor decision points d2 or d3, since we are conditioning on E.\nHence, l\u02dc(\u03d5(k)(\u03b6(N))) will be also periodic, following the same path as\n\u03d5(k)(\u03b6(N)), yielding contradiction with Lemma 5.3. \u0001\nNow we are able to finish the proof of Theorem 3.5.\nPROOF OF THEOREM 3.5. First, analogously to the proof of Theorem 3.4, one\ncan easily show that, with positive probability, the stochastic system will converge\nto one of the finite cycles. So, it remains to show that, with positive probability, the\nstochastic system is not periodic.\nTRANSIENT POLLING SYSTEMS 1849\nCondition on the event E. Suppose that the stochastic system is periodic with\nperiod m, that is, for some N1, we have\nSide(\u03b6(n)) = Side(\u03b6(n+m)) whenever n \u2265 N1.(24)\nFor the moment consider only one image \u03d5(d1) = f2(d1) of d1. Since f2(d1) is not\nperiodic by Lemmas 5.4 and 5.3, there is a positive integer K1 = K1(m) >m such\nthat\nSide\n(\n\u03d5(K1)(d1)\n) \u0005= Side(\u03d5(K1\u2212m)(d1)).(25)\nSimilarly, for the other possible image of d1, f3(d1), there is K2 = K2(m) > m\nsuch that\nSide\n(\n\u03d5(K2)(d1)\n) \u0005= Side(\u03d5(K2\u2212m)(d1)),(26)\nunder the assumption that \u03d5(d1) \u2208 A03.\nChoose \u03b4 > 0 so small, that each of the one-sided \u03b4-neighborhoods of d1 which\nmap onto sides A02 and A03, respectively, does not intersect with d1 for the first\nK = max{K1,K2} applications of \u03d5, and let \u03b41 \u2264 \u03b4 be the size of the smaller of\nthese neighborhoods after K mappings by \u03d5.\nBy Lemma 7.3, the stochastic system will hit the \u03b41\/2 neighborhood of d1 at,\nsay, time N . Since, in fact, the stochastic system will hit this neighborhood at\narbitrary large times, we can suppose that N > N1 and that\n\u2211\u221e\nn=N |\u03b5n| < \u03b41\/2,\nwhere \u03b5n is defined in (23). Also, for definiteness suppose that \u03b6(n) is on the\nside of d1 which maps onto A02. Then the stochastic system will follow the image\nof d1 which maps onto A02 for the next K steps, in the sense Side(\u03d5(k)(\u03b6(n))) =\nSide(\u03d5(k)(d1)) since \u03b41\/2 + \u03b41\/2 \u2264 \u03b41. However, recall that K was chosen in such\na way that the sequence Side(\u03d5(k)(d1)), k = 1,2, . . . ,K , cannot be m-periodic,\ncreating the contradiction between (24) and (25). \u0001\nREFERENCES\n[1] ASMUSSEN, S. (2003). Applied Probability and Queues, 2nd ed. Springer, New York.\nMR1978607\n[2] COELHO, Z., LOPES, A. and DA ROCHA, L. F. (1995). Absolutely continuous invariant mea-\nsures for a class of affine interval exchange maps. Proc. Amer. Math. Soc. 123 3533\u20133542.\nMR1322918\n[3] DAJANI, K. (2002). A note on rotations and interval exchange transformations on 3-intervals.\nInt. J. Pure Appl. Math.1 151\u2013160. MR1900223\n[4] FAYOLLE, G., MALYSHEV, V. A. and MEN\u2032SHIKOV, M. V. (1995). Topics in the Constructive\nTheory of Countable Markov Chains. Cambridge Univ. Press. MR1331145\n[5] FOSS, S. and LAST, G. (1996). Stability of polling systems with exhaustive service policies\nand state-dependent routing. Ann. Appl. Probab. 6 116\u2013137. MR1389834\n[6] FOSS, S. and LAST, G. (1998). On the stability of greedy polling systems with general service\npolicies. Probab. Engrg. Inform. Sci. 12 49\u201368. MR1492140\n[7] LIOUSSE, I. and MARZOUGUI, H. (2002). \u00c9changes d\u2019intervalles affines conjugu\u00e9s \u00e0 des\nlin\u00e9aires. Ergodic Theory Dynam. Systems 22 535\u2013554. MR1898804\n1850 MACPHEE, MENSHIKOV, POPOV AND VOLKOV\n[8] MACPHEE, I. M. and MENSHIKOV, M. V. (2003). Critical random walks on two-dimensional\ncomplexes with applications to polling systems. Ann. Appl. Probab. 13 1399\u20131422.\nMR2023881\n[9] MENSHIKOV, M. and ZUYEV, S. (2001). Polling systems in the critical regime. Stochastic\nProcess. Appl. 92 201\u2013218. MR1817586\n[10] MEYN, S. P. and TWEEDIE, R. L. (1993). Markov Chains and Stochastic Stability. Springer,\nLondon. MR1287609\n[11] VEECH, W. A. (1984). The metric theory of interval exchange transformations, I\u2013III. Amer. J.\nMath. 106 1331\u20131422. MR0765582\nI. M. MACPHEE\nM. V. MENSHIKOV\nDEPARTMENT OF MATHEMATICAL SCIENCES\nUNIVERSITY OF DURHAM SCIENCE SITE\nDURHAM DH1 3LE\nUNITED KINGDOM\nE-MAIL: i.m.macphee@durham.ac.uk\nmikhail.menshikov@durham.ac.uk\nS. POPOV\nINSTITUTO DE MATEM\u00c1TICA E ESTAT\u00cdSTICA\nUNIVERSIDADE DE S\u00c3O PAULO\nS\u00c3O PAULO SP\nBRASIL\nE-MAIL: popov@ime.usp.br\nS. VOLKOV\nSCHOOL OF MATHEMATICS\nUNIVERSITY OF BRISTOL\nBRISTOL BS8 1TW\nUNITED KINGDOM\nE-MAIL: s.volkov@bristol.ac.uk\n"}