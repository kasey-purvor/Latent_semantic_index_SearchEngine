{"doi":"10.1109\/ICME.2008.4607499","coreId":"102813","oai":"oai:epubs.surrey.ac.uk:2355","identifiers":["oai:epubs.surrey.ac.uk:2355","10.1109\/ICME.2008.4607499"],"title":"FLEXIBLE MOTION MODEL WITH VARIABLE SIZE BLOCKS FOR DEPTH FRAMES CODING IN COLOUR-DEPTH BASED 3D VIDEO CODING","authors":["Kamolrat, B","Fernando, WAC","Mrak, M","Kondoz, A"],"enrichments":{"references":[],"documentType":{"type":1}},"contributors":[],"datePublished":"2008-01-01","abstract":null,"downloadUrl":"","fullTextIdentifier":null,"pdfHashValue":null,"publisher":null,"rawRecordXml":"<record><header><identifier>\n    \n    \n      oai:epubs.surrey.ac.uk:2355<\/identifier><datestamp>\n      2017-10-31T14:05:16Z<\/datestamp><setSpec>\n      74797065733D61727469636C65<\/setSpec><setSpec>\n      6469766973696F6E733D656E67616E64706879736963616C736369656E636573:656C656374726F6E6963656E67696E656572696E67:63637372<\/setSpec><\/header><metadata><oai_dc:dc xmlns:oai_dc=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/\" xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/ http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc.xsd\" ><dc:relation>\n    \n      \n        http:\/\/epubs.surrey.ac.uk\/2355\/<\/dc:relation><dc:title>\n        FLEXIBLE MOTION MODEL WITH VARIABLE SIZE BLOCKS FOR DEPTH FRAMES CODING IN COLOUR-DEPTH BASED 3D VIDEO CODING<\/dc:title><dc:creator>\n        Kamolrat, B<\/dc:creator><dc:creator>\n        Fernando, WAC<\/dc:creator><dc:creator>\n        Mrak, M<\/dc:creator><dc:creator>\n        Kondoz, A<\/dc:creator><dc:date>\n        2008-01-01<\/dc:date><dc:type>\n        Article<\/dc:type><dc:type>\n        PeerReviewed<\/dc:type><dc:format>\n        text<\/dc:format><dc:language>\n        en<\/dc:language><dc:identifier>\n        http:\/\/epubs.surrey.ac.uk\/2355\/1\/SRF002475.pdf<\/dc:identifier><dc:identifier>\n          Kamolrat, B, Fernando, WAC, Mrak, M and Kondoz, A  (2008) FLEXIBLE MOTION MODEL WITH VARIABLE SIZE BLOCKS FOR DEPTH FRAMES CODING IN COLOUR-DEPTH BASED 3D VIDEO CODING   2008 IEEE INTERNATIONAL CONFERENCE ON MULTIMEDIA AND EXPO, VOLS 1-4.  pp. 573-576.      <\/dc:identifier><dc:relation>\n        http:\/\/ieeexplore.ieee.org\/search\/srchabstract.jsp?tp=&arnumber=4607499&queryText%3DFLEXIBLE+MOTION+MODEL+WITH+VARIABLE+SIZE+BLOCKS+FOR+DEPTH+FRAMES+CODING+IN+COLOUR-DEPTH+BASED+3D+VIDEO+CODING%26openedRefinements%3D*%26searchField%3DSearch+All<\/dc:relation><dc:relation>\n        10.1109\/ICME.2008.4607499<\/dc:relation><\/oai_dc:dc><\/metadata><\/record>","journals":null,"language":{"code":"en","id":9,"name":"English"},"relations":["http:\/\/epubs.surrey.ac.uk\/2355\/","http:\/\/ieeexplore.ieee.org\/search\/srchabstract.jsp?tp=&arnumber=4607499&queryText%3DFLEXIBLE+MOTION+MODEL+WITH+VARIABLE+SIZE+BLOCKS+FOR+DEPTH+FRAMES+CODING+IN+COLOUR-DEPTH+BASED+3D+VIDEO+CODING%26openedRefinements%3D*%26searchField%3DSearch+All","10.1109\/ICME.2008.4607499"],"year":2008,"topics":[],"subject":["Article","PeerReviewed"],"fullText":"FLEXIBLE MOTION MODEL WITH VARIABLE SIZE BLOCKS FOR  \nDEPTH FRAMES CODING IN COLOUR-DEPTH BASED 3D VIDEO CODING \n \nB. Kamolrat, W.A.C. Fernando, M. Mrak, and A. Kondoz \n \nCentre for Communication System Research \nUniversity of Surrey, Guildford, United Kingdom \n{B.Kamolrat, W.Fernando, M.Mrak , A.Kondoz}@surrey.ac.uk \n \nABSTRACT \n \nNew techniques for representing 3D video are often realised \nusing monoscopic video and associated per-pixel depth \ninformation. While the compression of both monoscopic and \ndepth video channels can be achieved using traditional video \ncoding techniques, in this paper, specific properties of the \ndepth channel are exploited to further compress the depth \ninformation. More precisely, enhanced compression of the \ndepth channel is achieved by using a highly flexible motion \nmodel, Binary Partition Tree (BPT) which enables adaptive \npartitioning of the depth frames leading to better rate-\ndistortion optimisation for inter-frame prediction. \nComparing to a conventional approach, Limited Variable \nSize Block (LVSB) which enables only limited frame \npartitioning options, the presented approach brings a gain of \nup to 70 % in bitrate reduction for the depth information. \n \nIndex Terms \u2013 3D video, motion compensation, variable \nsize blocks \n \n1. INTRODUCTION \n \nThe research on stereoscopic video has received high \ninterest over the past decade in order to provide viewers \nwith more realistic vision than traditional 2D video. \nStereoscopic images and display systems are designed to \nemulate human stereo perception by capturing a 3D scene \nwith two cameras located in slightly shifted positions. The \ncaptured pictures are then projected to left and right eyes, \ncalled left and right views. Subsequently, the human visual \nsystem will perceive left and right views as one image with \nthe sense of depth. \nInstead of using left and right views to represent 3D \nvideo, new techniques, like depth image-based rendering \n(DIBR) [1] and screen parallax [2], represent 3D video \nbased on a monoscopic video and associated per-pixel depth \ninformation (simply called depth map). The example \npictures of monoscopic video and the associated depth map \nof popular 3D test video sequence are shown in Fig. 1. \nWhile the monoscopic video consists of three components - \nY, U and V as in the traditional video applications, the depth \nmap video has one component. The advantage of such a \nscheme is, it can capture the stereoscopic sequences more \neasily compared to the traditional left-right view technique. \nHowever, like in the conventional stereoscopic coding, \nproblems of compression are still there with this DIBR \ntechnique. Several basic techniques have been used to \nencode DIBR sequences, but nothing has been able to \nreduce the data rate significantly. In this paper, we propose \nan application of a flexible motion model with variable \nblock size to encode the depth sequence in DIBR sequences. \n \n \n \n(a) (b) \nFig. 1. An example of 3D video - frame from the \"Orbi\" test \nsequence; (a) monoscopic and (b) depth map frame \n \nThe rest of the paper is organized as follows Section 2 \npresents related works in this area. The proposed technique \nwhich enables the reduction of stereoscopic video bitrate is \ndiscussed in section 3. Section 4 provides results of the \nexperiments and discussion. Section 5 concludes the paper. \n \n2. RELATED WORK \n \nWhen 3D video is represented by DIBR technique, it is \nfound that each region of depth map has different \nimportance. Precisely, sharp discontinuities in depth and \nintensity require more accurate depth map. Therefore, the \nconcept of region-of-interest (ROI) integrated with \nJPEG2000 was applied in [3] to gain quality improvement \nfor image coding. Moreover, due to the relationship between \nthe monoscopic video and depth map, the idea of sharing \nmotion vectors between two sequences was introduced in \n[4]. The performance of sharing motion vector approach was \n573978-1-4244-2571-6\/08\/$25.00 \u00a92008 IEEE ICME 2008\nAuthorized licensed use limited to: University of Surrey. Downloaded on April 16,2010 at 10:51:25 UTC from IEEE Xplore.  Restrictions apply. \nfound to be superior to encoding motion vectors separately \nat low bitrate when the coding cost for motion vectors \noutweighs the one for coding the residual. However, these \ntechniques have not shown considerable bitrate reductions. \nTherefore, further development of techniques to improve 3D \nvideo coding is needed. \nIn video coding, the motion compensation is used to \nremove temporal redundancy between successive frames of \na video signal. Motion compensation is performed in the \ndirection of motion vectors (MV) which are obtained during \nthe motion estimation for each frame region. Popular frame \nregion shapes are blocks which are commonly used in \nstandard video coding techniques since handling of such \nshapes is easy to implement and provides reasonable results \nacross a wide range of compression ranges.  \nThe block models can be categorized into fixed size \nblock (FSB) models and variable size block (VSB) models. \nFor FSB, a frame is divided into evenly distributed fixed \nsize blocks. However, in general, block boundaries do not \ncoincide with motion boundaries of objects in video, which \nmeans that a block may contain regions corresponding to \nmore than one type of motions. Therefore, it is desirable to \nnot only vary the block size depending on motion in specific \nregions but also to enable adaptable frame partitioning into \nmotion blocks. \n \n3. APPLICATION OF FLEXIBLE MOTION MODELS \nTO 3D VIDEO \n \nThe VSB approach used in the model is based on the block \nstructure of H.264 \/ AVC and the BPT [6]. The block-size \nof the model used in H.264 can be varied from 16x16 down \nto 4x4 pixels. For BPT, the decision on a frame partitioning \nis related to the accuracy of predicted motion compensation \nat certain motion estimation levels. The block size is not \npredefined but is fully adaptable to the designed rate-\ndistortion. This can be achieved by two steps: growing the \ntree which describes a frame partitioning (top-down \napproach) and pruning the tree which finds the optimal \npartitioning (bottom-up approach). At the tree growing step, \nthe entire picture is repeatedly split up to a target number of \nblocks N which is defined as. N = \u012e \u22c5 NR \u22c5 NC \/ 256, where NR \nand NC are the numbers of rows and columns respectively, \nand \u012e has a value of 2 for P-frames and 1 for B-frames. To \nsplit the blocks, all blocks are considered and the block \nwhich provides largest minimum motion compensation error \nis split by a vertical or horizontal line at the position that \nminimizes the block motion compensation error. The \nvertical line is used if the block width is bigger than block \nheight and horizontal line is used if the block height is \nbigger than block width. These two blocks are added to the \ntree as children nodes of the partitioned block. The example \nof tree growing algorithm is illustrated in Fig. 2. to generate \n4 blocks of a frame. \n \nTree-\ngrowing \niterations \nOriginal frame and its \npartitioning \nBPT and the energy of \nmotion compensated \nframe \n0 \n \n \n \nE = 53.39 \n1 \n \n \n \nE = 51.77 \n2 \n \n \n \nE = 42.37 \n3 \n \n \nE = 38.02 \n \nFig. 2. Growing the tree to generate 4 blocks at the 4th frame of \n\u201cInterview\u201d test sequence. \n \nAt the bottom up step, a pair of child blocks, which \nprovides the smallest gain in motion compensation, is re-\nmerged. The process is repeated until number of block n \nwithin the frame minimises a Lagrangian cost function \ndefined as J(n) = D(n) + \u03bb \u22c5 R(n), where D, R and \u03bb denote \nthe distortion, bitrate and Lagrangian parameter, \nrespectively. \nTo perform the VSB approach, there are three main types \nof data have to be coded: the information required to \nrepresent the block structure for each inter frame, the motion \ninformation for each block and the residual after motion \ncompensation. \nSince depth map consists of large smooth areas as well as \nsharp edges, our evaluation focuses on application of \nsuitable motion compensation methods which can exploit the \nspecific structure of depth images. In order to gain better \ntemporal redundancy reduction in the depth sequence, we \nuse the above algorithm to encode depth images. Flexible \nmotion models are applied to 3D video sequences: \nmonoscopic video and depth map, in order to reduce the \noverall bitrate. The flexibility of the applied model is \ncapable to capture the most significant characteristics of \ndepth map - large smooth areas and sharp edges. Since the \ndepth map indicates the depth of objects within the scene, \nmotion of objects related to the background only depends on \nthe motion of objects themselves or camera, not on the \nchanging of environment such as light or colour. Therefore, \nit is desirable to have a motion model functionality which \n574\nAuthorized licensed use limited to: University of Surrey. Downloaded on April 16,2010 at 10:51:25 UTC from IEEE Xplore.  Restrictions apply. \nwill allow for assignment of as large as possible block to \nbackground in order to reduce the amount of motion \ninformation and small block on object edges to obtain the \naccurate motion prediction. \n \n4. SIMULATION RESULTS AND DISCUSSION \n \nThe experiments are carried on the \"Orbi\" and \"Interview\" \nsequences of CIF (352 x 288) resolution. Two tested motion \nmodel settings use the VSB structures that follow the H.264 \nblock model for which the block size is varied between \n16x16 and 4x4 pixels and the BPT approach which the \nblock size is varied according to the motion of video \ncontent. These two approaches are simply called LVSB and \nBPT for the rest of paper. Video sequences are encoded as \nIBBPBBP\u2026 and a group of picture (GOP) equals to 15. At \nB-frames, the past and future reference frames are used (bi-\ndirectional prediction) while only one reference frame is \nused for P-frames. I frames are in both cases encoded using \nthe same settings. \nLagrangian rate-distortion optimization is employed to \nensure that each component of the encoder operates using \nthe same rate-distortion trade-off relationship. The \nLagrangian parameter \u03bb is used to maintain the picture \nquality to be almost the same within the GOP. \n \n \n Monoscopic video Depth map \nB\nPT\n \n \n479 blocks \n0.331 bpp \n \n49 blocks \n0.061 bpp \nLV\nSB\n \n \n1017 blocks \n0.356 bpp \n \n524 blocks \n0.096 bpp \n \nFig. 3. The 3rd frame of \u201cOrbi\u201d -Monoscopic image and Depth \nmap- segmented by BPT and LVSB \n \n \n \"Orbi\" \"Interview\" \n \nMono-\nscopic \nDepth \nmap \nMono-\nscopic \nDepth \nmap \nAverage \nPSNR [dB] 38.35 42.25 36.00 41.64 \nAverage number of \nblocks\/frame 230 60 157 130 BP\nT \nAverage rate [bpp] 0.125 0.036 0.073 0.052 \nAverage \nPSNR [dB] 38.35 42.25 36.00 41.64 \nAverage number of \nblocks\/frame 811 510 743 552 LV\nSB\n \nAverage rate [bpp] 0.141 0.063 0.082 0.064 \n \nTable 1. The average number of blocks per frame and \nproportion of the bitrate used for compressed P and B frames. \n \nThe examples of monoscopic video and depth map of \nOrbi (P-frame) which are divided into variable size blocks \nby the BPT and LVSB approaches are presented in Fig. 3. In \ncase of the monoscopic image, to obtain the same PSNR at \nabout 36 dB the image is segmented into 479 blocks by BPT \nand 1017 blocks by LVSB. In addition, for the depth image, \nit is segmented into 49 blocks by BPT and 524 blocks by \nLVSB in order to obtain image quality of about 39 dB. \nMoreover, the bitrate used in BPT in the monoscopic video \nis about 7.5 % lower than in LVSB and about 57 % lower in \ndepth map. It means that the BPT can significantly reduce \nbitrate (compared to LVSB) in the depth map by using fewer \nblocks to provide good quality of motion compensation. As \na result, for the same bitrate the application of BPT will \nprovide higher decoding quality compared to the \ncompression which uses LVSB. \nThe average numbers of blocks used in all P and B \nframes of the test sequences are presented in Table 1. for \nalmost the same video quality. Since a typical depth map \nframe is smooth and its background occupies large portion \nof frame, assignment of larger blocks to background area \nreduces the amount of motion information. On the other \nhand, assignment of smaller blocks on object edges is \nneeded to obtain the accurate motion prediction for those \nareas that change faster. As a result, a smaller number of \nblocks can be used in BPT to provide better rate-distortion \noptimisation. Especially, at the B-frame where bi-directional \nprediction is applied, even smaller number of blocks is used. \nConsequently, fewer bits are required to encode the motion \ncomponent. On the other hand, a block size of LVSB, which \nhas the same block structure used in H.264 \/ AVC, is varied \nbetween 4x4 to 16x16 pixels.  \n575\nAuthorized licensed use limited to: University of Surrey. Downloaded on April 16,2010 at 10:51:25 UTC from IEEE Xplore.  Restrictions apply. \n  \nFig. 4. Rate-Distortion results on Orbi \nand Interview  \n(depth map) \n \nFig. 5. Rate-Distortion results on Orbi \nand Interview \n(depth map) at P-frames \n \nFig. 6. Rate-Distortion results on Orbi \nand Interview \n(depth map) at B-frames \n \n \nTherefore, the biggest block is limited to 16x16 pixels, \nleading to high number of bits required for the motion \ncomponent. This reflects to the overall bitrate which is \nlarger when LVSB is used. Most importantly, it can be seen \nthat the bit savings achieved by application of BPT are much \nhigher for the depth map compared to the monoscopic video. \nThe rate-distortion results for test sequences (depth map) \nare presented in Fig. 4. for wide range of bit-rates. The \npresented results suggest that the performance of BPT is \nmuch superior to the performance of LVSB. This is quite \nobvious at the low bitrate region since the rate-distortion \noptimization algorithm used in BPT is capable to find the \noptimum trade-off between bitrate for motion information \nand residual to provide the possible best video quality. \nMoreover, the rate distortion results in P and B frames are \nshown in Fig. 5. and Fig. 6. The experiment results suggest \nthat the performance of BPT is better than LVSB in both \nframe types, especially in case of the B-frame where bi-\ndirectional prediction is implemented. The bi-directional \nprediction allows for more accurate motion estimation. As a \nresult, even fewer blocks can be used leading to reduction in \nmotion information. \n \n5. CONCLUSIONS \n \nIn this paper, a flexible motion model is proposed to code \nthe depth map in DIBR. We have used the features of the \ndepth map and based on that we used BPT to design a \nflexible motion model to encode the frame. Simulation \nresults clearly suggest that the flexible motion model can \nimprove the RD performance quite significantly compared to \nthe LVSB which is used in standard video codecs. The \nproposed technique will add some computational complexity \nto the system to optimise the partitioning of the frames. In \nour future work we will address this issue. \n \nACKNOWLEDGEMENT \n \nThis work was partly supported by the European \nCommission IST FP6 program, under VISNET II project, a \nEuropean Network of Excellence. \n \n5. REFERENCES \n \n[1] W. A. IJsselsteijn, P. J. H. Seutiens, and L. M. J. \nMeesters, \"State-of-the-Art in Human Factors and \nQuality Isses of Stereoscopic Broadcast Television,\" \nTechnical Report D1, IST-2001-34396 ATTEST 2002. \n[2] A. Bourge and C. Fehn, \"ISO\/IEC CD 23002-3 Auxiliary \nVideo Data Representation,\" ISO\/IEC JTC 1\/SC 29\/WG \n11\/N8038, April 2006. \n[3] R. Krishnamurthy, B.-B. Chai, H. Tao, and S. \nSethuraman, \"Compression and Transmission of Depth \nMaps for Image-Based Rendering,\" Int. Conf. Image \nProcessing, pp. 828-831, 2001. \n[4] S. Grewatsch and E. Miiler, \"Sharing of Motion Vectors \nin 3D Video Coding,\" Int. Conf. Image Processing, pp. \n3271-3274, 2004. \n[5] \"Draft ITU-T recommendation and final draf \ninternational standard of joint video specification (ITU-T \nRec. H.264\/ISO\/IEC 14 496-10 AVC,\" in Joint Video \nTeam (JVT) of ISO\/IEC MPEG and ITU-T VCEG, \nJVTG050, 2003. \n[6] M. P. Servais, T. Vlachos, and T. Davies, \"Motion \nCompensation using Variable-Size-Block-Matching with \nBinary Partition Trees,\" Int. Conf. Image Processing, pp. \n157-60, 2005. \n \n576\nAuthorized licensed use limited to: University of Surrey. Downloaded on April 16,2010 at 10:51:25 UTC from IEEE Xplore.  Restrictions apply. \n"}