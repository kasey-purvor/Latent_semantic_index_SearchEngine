{"doi":"10.1007\/978-3-642-13182-0_22","coreId":"15418","oai":"oai:dro.dur.ac.uk.OAI2:7416","identifiers":["oai:dro.dur.ac.uk.OAI2:7416","10.1007\/978-3-642-13182-0_22"],"title":"Obtaining online ecological colourings by generalizing first-fit.","authors":["Johnson, M.","Patel, V.","Paulusma, Daniel","Trunck, T."],"enrichments":{"references":[{"id":947488,"title":"Coloring graphs on-line. In: Online algorithms: the state of the art","authors":[],"date":"1998","doi":null,"raw":null,"cites":null},{"id":947480,"title":"Ecological and perfect colorings,","authors":[],"date":"1994","doi":null,"raw":null,"cites":null},{"id":947479,"title":"Graph colorings and power in experimental exchange networks,","authors":[],"date":"1992","doi":null,"raw":null,"cites":null},{"id":947486,"title":"On the complexity of H-colouring,","authors":[],"date":"1990","doi":null,"raw":null,"cites":null},{"id":947482,"title":"On the existence of Ecological Colouring,","authors":[],"date":"2008","doi":null,"raw":null,"cites":null},{"id":947485,"title":"On-line and first-fit colorings of graphs.","authors":[],"date":"1988","doi":null,"raw":null,"cites":null},{"id":947484,"title":"Role colouring a graph,","authors":[],"date":"1991","doi":null,"raw":null,"cites":null},{"id":947487,"title":"Social networks as normal science,","authors":[],"date":"1993","doi":null,"raw":null,"cites":null},{"id":947481,"title":"STRUCTURE Version 4.2 Reference Manual, Center for the Social Sciences,","authors":[],"date":"1991","doi":null,"raw":null,"cites":null},{"id":947483,"title":"The relational basis of attitudes, Social Structures: A Network Approach, Cambridge,","authors":[],"date":"1988","doi":null,"raw":null,"cites":null}],"documentType":{"type":1}},"contributors":["Ablayev, Farid","Mayr, Ernst W."],"datePublished":"2010-06-20","abstract":"A colouring of a graph is ecological if every pair of vertices that have the same set of colours in their neighbourhood are coloured alike. We consider the following problem: if a graph G and an ecological colouring c of G are given, can further vertices added to G, one at a time, be coloured using colours from some finite set C so that at each stage the current graph is ecologically coloured? If the answer is yes, then we say that the pair (G,c) is ecologically online extendible. By generalizing the well-known First-Fit algorithm, we are able to characterize when (G,c) is ecologically online extendible. For the case where c is a colouring of G in which each vertex is coloured distinctly, we give a simple characterization of when (G,c) is ecologically online extendible using only the colours of c, and we also show that (G,c) is always online extendible if we permit ourselves to use one extra colour. We also study (off-line) ecological H-colourings where the colouring must satisfy further restrictions imposed by some fixed pattern graph H. We characterize the computational complexity of this problem. This solves an open question posed by Crescenzi et al","downloadUrl":"https:\/\/core.ac.uk\/download\/pdf\/15418.pdf","fullTextIdentifier":"http:\/\/dro.dur.ac.uk\/7416\/1\/7416.pdf","pdfHashValue":"52f8a2195f280d67871c3530179b210c1095d472","publisher":"Springer","rawRecordXml":"<record><header><identifier>\n  \n    \n      oai:dro.dur.ac.uk.OAI2:7416<\/identifier><datestamp>\n      2015-03-31T12:11:43Z<\/datestamp><\/header><metadata><oai_dc:dc xmlns:oai_dc=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/\" xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/ http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc.xsd\" ><dc:title>\n    \n      \n        Obtaining online ecological colourings by generalizing first-fit.<\/dc:title><dc:creator>\n        Johnson, M.<\/dc:creator><dc:creator>\n        Patel, V.<\/dc:creator><dc:creator>\n        Paulusma, Daniel<\/dc:creator><dc:creator>\n        Trunck, T.<\/dc:creator><dc:description>\n        A colouring of a graph is ecological if every pair of vertices that have the same set of colours in their neighbourhood are coloured alike. We consider the following problem: if a graph G and an ecological colouring c of G are given, can further vertices added to G, one at a time, be coloured using colours from some finite set C so that at each stage the current graph is ecologically coloured? If the answer is yes, then we say that the pair (G,c) is ecologically online extendible. By generalizing the well-known First-Fit algorithm, we are able to characterize when (G,c) is ecologically online extendible. For the case where c is a colouring of G in which each vertex is coloured distinctly, we give a simple characterization of when (G,c) is ecologically online extendible using only the colours of c, and we also show that (G,c) is always online extendible if we permit ourselves to use one extra colour. We also study (off-line) ecological H-colourings where the colouring must satisfy further restrictions imposed by some fixed pattern graph H. We characterize the computational complexity of this problem. This solves an open question posed by Crescenzi et al. <\/dc:description><dc:publisher>\n        Springer<\/dc:publisher><dc:source>\n        Ablayev, Farid  & Mayr, Ernst W.  (Eds.). (2010). Computer science : theory and applications : 5th International Computer Science Symposium in Russia, CSR, 16-20 June 2010, Kazan, Russia ; proceedings. Berlin ; Heidelberg: Springer, pp. 240-251, Lecture notes in computer science(6072)<\/dc:source><dc:contributor>\n        Ablayev, Farid <\/dc:contributor><dc:contributor>\n        Mayr, Ernst W. <\/dc:contributor><dc:date>\n        2010-06-20<\/dc:date><dc:type>\n        Book chapter<\/dc:type><dc:type>\n        PeerReviewed<\/dc:type><dc:identifier>\n        dro:7416<\/dc:identifier><dc:identifier>\n        issn:0302-9743<\/dc:identifier><dc:identifier>\n        issn: 1611-3349<\/dc:identifier><dc:identifier>\n        doi:10.1007\/978-3-642-13182-0_22<\/dc:identifier><dc:identifier>\n        http:\/\/dro.dur.ac.uk\/7416\/<\/dc:identifier><dc:identifier>\n        http:\/\/dx.doi.org\/10.1007\/978-3-642-13182-0_22<\/dc:identifier><dc:format>\n        application\/pdf<\/dc:format><dc:identifier>\n        http:\/\/dro.dur.ac.uk\/7416\/1\/7416.pdf<\/dc:identifier><dc:rights>\n        The final publication is available at Springer via http:\/\/dx.doi.org\/10.1007\/978-3-642-13182-0_22<\/dc:rights><dc:accessRights>\n        info:en-repo\/semantics\/openAccess<\/dc:accessRights><\/oai_dc:dc><\/metadata><\/record>","journals":[{"title":null,"identifiers":["0302-9743"," 1611-3349","issn: 1611-3349","issn:0302-9743"]}],"language":{"code":"en","id":9,"name":"English"},"relations":[],"year":2010,"topics":[],"subject":["Book chapter","PeerReviewed"],"fullText":"Durham Research Online\nDeposited in DRO:\n29 October 2010\nVersion of attached file:\nAccepted Version\nPeer-review status of attached file:\nPeer-reviewed\nCitation for published item:\nJohnson, M. and Patel, V. and Paulusma, D. and Trunck, T. (2010) \u2019Obtaining online ecological colourings by\ngeneralizing first-fit.\u2019, in Computer science : theory and applications : 5th International Computer Science\nSymposium in Russia, CSR, 16-20 June 2010, Kazan, Russia ; proceedings. Berlin ; Heidelberg: Springer, pp.\n240-251. Lecture notes in computer science. (6072).\nFurther information on publisher\u2019s website:\nhttp:\/\/dx.doi.org\/10.1007\/978-3-642-13182-022\nPublisher\u2019s copyright statement:\nThe original publication is available at www.springerlink.com\nAdditional information:\nUse policy\nThe full-text may be used and\/or reproduced, and given to third parties in any format or medium, without prior permission or charge, for\npersonal research or study, educational, or not-for-profit purposes provided that:\n\u2022 a full bibliographic reference is made to the original source\n\u2022 a link is made to the metadata record in DRO\n\u2022 the full-text is not changed in any way\nThe full-text must not be sold in any format or medium without the formal permission of the copyright holders.\nPlease consult the full DRO policy for further details.\nDurham University Library, Stockton Road, Durham DH1 3LY, United Kingdom\nTel : +44 (0)191 334 3042 \u2014 Fax : +44 (0)191 334 2971\nhttp:\/\/dro.dur.ac.uk\nObtaining Online Ecological Colourings by Generalizing\nFirst-Fit\nMatthew Johnson1?, Viresh Patel1??, Danie\u00a8l Paulusma1? ? ?, and The\u00b4ophile Trunck2\n1Department of Computer Science, Durham University,\nScience Laboratories, South Road, Durham DH1 3LE, U.K.\n{matthew.johnson2,viresh.patel,daniel.paulusma}@dur.ac.uk\n2E\u00b4cole Normale Supe\u00b4rieure de Lyon,\n46 Alle\u00b4e d\u2019Italie, 69364 Lyon Cedex 07, France.\ntheophile.trunck@ens-lyon.fr\nAbstract. A colouring of a graph is ecological if every pair of vertices that have\nthe same set of colours in their neighbourhood are coloured alike. We consider the\nfollowing problem: if a graphG and an ecological colouring c ofG are given, can\nfurther vertices added to G, one at a time, be coloured using colours from some\nfinite set C so that at each stage the current graph is ecologically coloured? If the\nanswer is yes, then we say that the pair (G, c) is ecologically online extendible.\nBy generalizing the well-known First-Fit algorithm, we are able to characterize\nwhen (G, c) is ecologically online extendible. For the case where c is a colouring\nofG in which each vertex is coloured distinctly, we give a simple characterization\nof when (G, c) is ecologically online extendible using only the colours of c, and\nwe also show that (G, c) is always online extendible if we permit ourselves to\nuse one extra colour. We also study (off-line) ecological H-colourings where the\ncolouring must satisfy further restrictions imposed by some fixed pattern graph\nH . We characterize the computational complexity of this problem. This solves an\nopen question posed by Crescenzi et al.\n1 Introduction\nOne of the goals of social network theory is to determine patterns of relationships\namongst actors in a society. Social networks can be represented by graphs, where ver-\ntices of the graph represent individuals and edges represent relationships amongst them.\nOne way to study patterns of relationships in such networks is to assign labels in such\na way that those who are assigned the same label have similar sorts of relationships\nwithin the network; see e.g. Hummon and Carley [9]. Several graph-theoretic concepts\nsuch as ecological colourings [1], role assignments [6] and perfect colourings [2], have\nbeen introduced to facilitate the study of social networks in this way.\nThis paper focuses on ecological colourings. The term \u201cecological\u201d is derived from\ncertain models of population ecology in which individuals are assumed to be determined\nby their environment. For example, in biology, features of a species\u2019 morphology are\n? Supported by EPSRC Grant EP\/E048374\/1\n?? Supported by EPSRC Grant EP\/F064551\/1\n? ? ? Supported by EPRSC Grant EP\/G043434\/1\nusually defined in relation to the way such a species interacts with other species. Also,\nsome network theories of attitude formation assume that one\u2019s attitude is predicted by\nthe combination of the attitudes of surrounding individuals [3, 5].\nWe introduce some basic notation and terminology. Throughout the paper, all graphs\nare undirected and without loops or multiple edges unless otherwise stated. We denote\nthe vertex and edge sets of a graph G by VG and EG respectively. An edge between u\nand v is denoted (u, v). The neighbourhood of u inG is denotedNG(u) = {v | (u, v) \u2208\nEG}. For a subset S \u2286 VG and a function c on VG (for example, a colouring of the ver-\ntices), we use the short-hand notation c(S) for the set {c(u) | u \u2208 S}. The colourhood\nof a vertex v in a graph G with colouring c is defined to be c(NG(v)). For a set C, we\nwrite A+ x to denote A \u222a {x} for some subset A \u2286 C and x \u2208 C.\nEcological colourings were introduced by Borgatti and Everett in [1] to analyse\npower in experimental exchange networks. Formally, an ecological colouring of a graph\nG = (V,E) is a vertex mapping c : V \u2192 {1, . . .} such that any u, v \u2208 V with the\nsame colourhood, i.e. with c(N(u)) = c(N(v)), have the same colour c(u) = c(v).\nNote that such a colouring does not have to be proper, i.e. two adjacent vertices may\nreceive the same colour. This reflects that two individuals that play the same role in\ntheir environment might be related to each other. See Fig. 1 for an example of a proper\necological colouring.\n1 2 1 2\n3\nFig. 1. A proper ecological colouring that is also an ecological K3-colouring.\nOne of the appealing features of ecological colourings is a result of Crescenzi et\nal. [4]. In order to state the result precisely, we need to introduce some terminology.\nA twin-free graph (also known as a neighbourhood-distinct graph) is a graph in which\nno two vertices have the same neighbourhood (including empty neighbourhoods). A\ngraph G that is not twin-free can be made twin-free as follows: whenever we find a pair\nof vertices u and v for which NG(u) = NG(v), we delete one of them until no such\npair remains. It is easy to check that the resulting graph is independent of the order in\nwhich vertices are deleted and is twin-free; it is called the neighbourhood graph of G\nand is denoted by GN . The main result of Crescenzi et al. [4] states that an ecological\ncolouring of a graph G using exactly k colours can be found in polynomial time for\neach 1 \u2264 k \u2264 |VGN | and does not exist for k \u2265 |VGN |+ 1.\nOur motivation for studying online ecological colourings. In static optimization\nproblems, one is often faced with the challenge of determining efficient algorithms\nthat solve a particular problem optimally for any given instance of the problem. In the\narea of dynamic optimization the situation is more complicated: here, one often lacks\nknowledge of the complete instance of the problem.\n2\nThis paper studies ecological colourings for dynamic networks. Gya\u00b4rfa\u00b4s and Lehel [7]\nintroduced the concept of online colouring to tackle dynamical storage allocations. An\nonline colouring algorithm irrevocably colours the vertices of a graph one by one, as\nthey are revealed, where determination of the colour of a new vertex can only depend\non the coloured subgraph induced by the revealed vertices. See [10] for a survey on\nonline colouring.\nPerhaps the most well-known online colouring algorithm is FIRST-FIT. Starting\nfrom the empty graph, this algorithm assigns each new vertex the least colour from\n{1, 2, . . .} that does not appear in its neighbourhood. It is easy to check that an eco-\nlogical colouring is obtained at each stage and hence FIRST-FIT is an example of an\non-line ecological colouring algorithm. Note, however, that it may use an unbounded\nnumber of colours. If we wish to use at most k colours when we start from the empty\ngraph, then we can alter FIRST-FIT so that each new vertex v is assigned, if possible,\nthe least colour in {1, 2, . . . , k \u2212 1} not in the colourhood of v, or else v is coloured k.\nWe call the modified algorithm k-FIRST-FIT. It gives a colouring that is ecological but\nnot necessarily proper (cf. 1-FIRST-FIT which assigns all vertices the same colour).\nA natural situation to consider is when we are given a nonempty start graph G0 =\nG, the vertices of which are coloured by an ecological colouring c. At each stage i, a\nnew vertex vi is added to Gi\u22121 (the graph from the previous stage) together with (zero\nor more) edges between vi and the vertices ofGi\u22121, to give the graphGi. Knowledge of\nGi is the only information we have at stage i. Our task is to colour the new vertex vi at\neach stage i, without changing the colours of the existing vertices, to give an ecological\ncolouring of Gi. If there exists an online colouring algorithm that accomplishes this\ntask using some colours from a finite set C \u2287 c(VG), we say that the pair (G, c) is\n(ecologically) online extendible with C. Sometimes we do not give C explicitly and say\nsimply that (G, c) is (ecologically) online extendible. Motivated by our observation that\ncolourings obtained by FIRST-FIT and k-FIRST-FIT are ecological, we examine which\npairs (G, c) are online extendible.\nOur motivation for studying ecological H-colourings. In order to analyse the salient\nfeatures of a large networkG, it is often desirable to compressG into a smaller network\nH in such a way that important aspects of G are maintained in H . Extracting relevant\ninformation about G becomes much easier using H . This idea of compression is en-\ncapsulated by the notion of graph homomorphisms, which are generalizations of graph\ncolourings. Let G and H be two graphs. An H-colouring or homomorphism from G\nto H is a function f : VG \u2192 VH such that for all (u, v) \u2208 EG we have (f(u), f(v)) \u2208\nEH . An ecological H-colouring of G is a homomorphism f : VG \u2192 VH such that, for\nall pairs of vertices u, v \u2208 VG, we have f(NG(u)) = f(NG(v)) =\u21d2 f(u) = f(v).\nSee Fig. 1 for an example of an ecological K3-colouring, where K3 denotes the com-\nplete graph on {1, 2, 3}. The ECOLOGICAL H -COLOURING problem asks if a graph G\nhas an ecological H-Colouring. Classifying the computational complexity of this prob-\nlem is our second main goal in this paper. This research was motivated by Crescenzi et\nal. [4] who posed this question as an interesting open problem.\nOur results and paper organisation. In Section 2, we characterize when a pair (G, c),\nwhere G is a graph and c is an ecological colouring of G, is online extendible with a\nfixed set of colours C. We then focus on the case where each vertex of a k-vertex graph\n3\nG is coloured distinctly by c. We show that such a pair (G, c) is always online extendible\nwith k+1 colours, and give a polynomial-time online colouring algorithm for achieving\nthis. We show that this result is tight by giving a simple characterization of exactly\nwhich (G, c) are not ecologically online extendible with k colours. This characterization\ncan be verified in polynomial time. In Section 3, we give a complete answer to the\nopen problem of Crescenzi et al. [4] and classify the computational complexity of the\nECOLOGICAL H -COLOURING problem. We show that if H is bipartite or contains\na loop then ECOLOGICAL H -COLOURING is polynomial-time solvable, and is NP-\ncomplete otherwise. Section 4 contains the conclusions and open problems.\n2 Online Ecological Colouring\nWe first give an example to demonstrate that not all pairs (G, c) are online extendible.\nConsider the ecologically coloured graph in Fig. 2.(i). Suppose that a further vertex is\nadded as shown in Fig. 2.(ii). Its colourhood is {1, 3, 4} so it must be coloured 2 to keep\nthe colouring ecological (since there is already a vertex with that colourhood). Finally\nsuppose that a vertex is added as shown in Fig. 2.(iii). Its colourhood is {2, 3, 4} so it\nmust be coloured 1. But now the two vertices of degree 2 have the same colourhood but\nare not coloured alike so the colouring is not ecological.\n3\n1\n4\n2\n4 3\n(i)\n3\n1\n4\n2\n4 3\n2\n(ii)\n3\n1\n4\n2\n4 3\n2 1\n(iii)\nFig. 2. A pair (G, c) that is not online extendible.\nWe also give an example of a pair (G, c) that is online extendible but for which we\ncannot use FIRST-FIT or k-FIRST-FIT. Let G be the path v1v2v3v4 on four vertices\ncoloured abcd. We will show in Theorem 2 that (G, c) is online extendible (even if we\nare forced to use only colours from {a, b, c, d}). However, FIRST-FIT or k-FIRST FIT\n(arbitrary k) cannot be used with any ordering of {a, b, c, d}. To see this, add a new\nvertex adjacent to v1 and v3. Any correct online colouring algorithm must colour it b.\nSo if the algorithm is FIRST-FIT, b is before d in the ordering of the colours. Next add\na new vertex adjacent to v3. If this vertex is not coloured d then the colouring will not\nbe ecological, but FIRST-FIT will not use d as b (or possibly a) is preferred.\nLet us now describe our general approach for obtaining online ecological colourings\nwhen they exist. As before, let G be a graph with an ecological colouring c and let C\nbe a set of colours where C \u2287 c(VG). What we would like to do is to write down a\nset of instructions: for each subset A \u2286 C, a colour x should be specified such that\n4\nwhenever a vertex is added and its colourhood is exactly A, we will colour it x. We\nwould like to construct a fixed set of instructions that, when applied, always yields\necological colourings. We make the following definitions.\n(i) A rule on C is a pair A \u2286 C and x \u2208 C and is denoted A\u2192 x.\n(ii) A rule A\u2192 x represents a vertex v in G if v has colourhood A and c(v) = x.\n(iii) The set of rules that represent each vertex of G is said to be induced by (G, c) and\nis denoted R(G,c).\n(iv) A set of rules R on C is valid for (G, c) if R \u2287 R(G,c) and R contains at most one\nrule involving A for each subset A \u2286 C.\n(v) A set of rules R on C is full if R contains exactly one rule involving A for each\nsubset A \u2286 C.\nNotice that a full set of rulesR constitutes an online colouring algorithm: if v is a newly\nrevealed vertex with colourhood A and A \u2192 x is the unique rule for A in R, then v is\ncoloured x by R. Notice also that the k-FIRST-FIT algorithm can be written down as\nthe full set of rules\nRkFF = {A\u2192 min{y \u2265 1 | y \/\u2208 A} | A \u2282 {1, . . . , k}} \u222a {{1, . . . , k} \u2192 k},\nthat is, the k-FIRST-FIT algorithm assigns colours to new vertices purely as a function\nof their colourhoods. In this way, the notion of rules generalises FIRST-FIT. There is\nno reason a priori that a general online colouring algorithm should follow a set of rules;\nhowever, one consequence of Theorem 1 below is that every online ecological colouring\nalgorithm can be assumed to follow a set of rules.\nWhile a full set of rulesR gives an online colouring algorithm, it does not guarantee\nthat each colouring will be ecological. For this, we must impose conditions on R. The\nfollowing observation, which follows trivially from definitions, shows that having a\nvalid set of rules for a coloured graph ensures that it is ecologically coloured. We state\nthe observation formally so that we can refer to it later.\nObservation 1 Let G = (V,E) be a graph with colouring c. Let R be a valid set of\nrules on some C \u2287 c(V ) for (G, c). Then c is an ecological colouring of G.\nProof. Suppose c is not ecological. Then there are two vertices coloured x and y, x 6= y,\nwhich both have colourhood A \u2286 c(V ) \u2286 C. Then the set of rules induced by (G, c)\ncontains two rules A \u2192 x and A \u2192 y. Since R is valid for (G, c), it must contain the\nrules induced by (G, c), but this contradicts that R must contain at most one rule for\neach A \u2286 C. uunionsq\nNote, however, that if we have a valid and full set of rules R on C for (G, c) and\nfurther vertices are added and coloured according to the rules, R might not necessarily\nremain valid for the new graph, that is, R might not be a superset of the induced rules\nfor the new graph. Let us see what might happen. Suppose that a new vertex u is added\nsuch that the colours in its neighbourhood are B and that, according to a rule B \u2192 y in\nR, it is coloured y. Now consider a neighbour v of u. Suppose that it had been coloured\nx at some previous stage according to a rule A \u2192 x in R. But now the colour y has\nbeen added to its colourhood. So R is valid for the altered graph only if it contains\n5\nthe rule A + y \u2192 x. This motivates the following definition. Let R be a set of rules\non C \u2287 c(VG). We say that R is a good set of rules on C if for any A,B \u2286 C and\nx, y \u2208 C the following holds:\nif (A\u2192 x) \u2208 R and (B \u2192 y) \u2208 R and x \u2208 B then (A+ y \u2192 x) \u2208 R.\nIt is an easy exercise to check that the rules RkFF for k-FIRST-FIT are good.\nWe are now able to present the main results of this paper. First we characterize when\na pair (G, c) is online extendible.\nTheorem 1. Let G be a graph with ecological colouring c. Then (G, c) is online ex-\ntendible with a finite set C if and only if there exists a set of rules that is valid for (G, c),\ngood, and full on C \u2032, where C \u2032 is a set of colours satisfying C \u2287 C \u2032 \u2287 c(VG).\nThe purpose of C \u2032 in the statement of Theorem 1 is to account for the possibility that\nsome of the colours of C may, under all circumstances, not be required.\nProof. (=\u21d2) If (G, c) is online extendible with finite C, then there exists, by defini-\ntion, an algorithm \u03b1 that can be used to obtain an ecological colouring of any graph\nconstructed by adding vertices to G. We shall show that, by carefully choosing how to\nadd vertices to G and colouring them with \u03b1, we can obtain a graph which induces a\nset of rules that is valid for (G, c), good and full on some set C \u2032 \u2286 C.\nFirst, we describe one way in which we add vertices. If a graph contains a vertex\nu coloured x with colourhood A, then the set of rules induced by the graph includes\nA\u2192 x. To protect that rule means to add another vertex v with the same neighbourhood\n(and thus also the same colourhood) as u, to colour it x (as any correct algorithm must),\nand to state that no further vertices will be added that are adjacent to v. Hence all future\ngraphs obtained by adding additional vertices will also induce the rule A\u2192 x.\nWe use this method immediately: we protect each of the rules induced by (G, c). In\nthis way, we ensure that the set of induced rules for any future graph is valid for (G, c).\nAs long as the set of rules R induced by the current graph G\u2217 is not full for the set\nof colours C\u2217 used on G\u2217, we add a new vertex as follows:\nLet B \u2286 C\u2217 be a set for which R does not contain a rule. Add to G\u2217 a new\nvertex u with colourhood B and use the algorithm \u03b1 to obtain an ecological\ncolouring. Add vertices to protect any rule induced by the new graph not in R.\nNote that it is possible to add such a vertex u without making it adjacent to vertices that\nhave been used for protection. There is at least one rule induced by the new graph not\ninduced by the previous graph, namely B \u2192 y, where y is the colour \u03b1 assigns to u.\nSo if we continue in this way, the number of rules will increase and eventually a full\nset of rules will be obtained for some set C \u2032 \u2286 C (since, by definition, \u03b1 only uses\ncolours from such a set). Let GF be the graph for which the induced rules are full. It\nonly remains to prove that these rules are good.\nIf the rules are not good, then they include rules A \u2192 x, B \u2192 y, A + y \u2192 z such\nthat x \u2208 B and x 6= z. Let u be a vertex in GF coloured x with colourhood A. Choose\na set of vertices S 3 u coloured B such that each vertex, except possibly u, is not one\nthat was created to protect a rule. Add a new vertex adjacent to the vertices of S. This\n6\nmust be coloured y by \u03b1. But now the neighbourhood of u is A + y and the colouring\nis not ecological (since no vertex has been added adjacent to the vertex protecting the\nrule A+ y \u2192 z); this contradicts the definition of \u03b1.\n(\u21d0=) Suppose R is a set of rules that is valid for (G, c), good, and full on some\nC \u2032 where C \u2283 C \u2032 \u2287 c(V ). Set G0 = G and suppose, in the online process, vertices\nv1, . . . , vr are added one at a time to obtain graphs G1, . . . , Gr. Colouring each new\nvertex according to R, we obtain the colouring ci for Gi. We must show that ci is an\necological colouring of Gi. By Observation 1, we can do this by proving inductively\nthat R is valid for each (Gi, ci).\nWe have that R is valid for (G0, c). Assume, for induction, that R is valid for\n(Gi\u22121, ci\u22121). Let B be colourhood of vi in Gi. If R contains the rule B \u2192 y, then\nvi is coloured y, giving the colouring ci of Gi. We must check that there are rules in R\nto represent each vertex of Gi. Clearly the rule B \u2192 y represents vi. Let v 6= vi be a\nvertex of Gi. Suppose, as a vertex of Gi\u22121, it is represented by the rule A \u2192 x. If v is\nnot adjacent to vi, then v is still represented by the rule A \u2192 x in Gi. If v is adjacent\nto vi, then v is represented by the rule A + y \u2192 x; this rule is present in R since R is\ngood and contains the rules A\u2192 x and B \u2192 y, where x \u2208 B. uunionsq\nCorollary 1. Fix a colour set C. Given an input graph G = (V,E) together with an\necological colouring c, where c(V ) \u2286 C, the problem of deciding if (G, c) is ecologi-\ncally online extendible with C is solvable in polynomial time.\nProof. Suppose |C| = ` for some fixed integer `. We enumerate all full sets of rules on\nall C \u2032 \u2286 C and check whether they are good and valid for (G, c). The number of sets\nof rules to be checked depends only on ` and is independent of |G|, and checking a set\nof rules requires polynomial time. uunionsq\nSo far, we have not been able to prove the computational complexity of the above\ndecision problem if C is part of the input. A natural question to start with is to consider\nthe case in which all vertices ofG have distinct colours. Thus we assume thatG is twin-\nfree else the colouring would not be ecological. Theorem 2 solves this case by showing\nthat any such pair (G, c) is online extendible using one extra colour in addition to c(V ).\nWe show in the second part of this theorem that the above is tight by characterizing\nthose pairs (G, c) for which we always need the extra colour. The simple necessary and\nsufficient conditions in our characterization can easily be checked in polynomial time.\nTheorem 2. LetG = (V,E) be a twin-free graph on k vertices and let c be a colouring\nof G with |c(V )| = k (thus c is an ecological colouring of G).\n1. (G, c) is online extendible with c(V ) and one extra colour.\n2. (G, c) is online extendible with c(V ) if and only if G contains a vertex u\u2217 such that\n(i) the neighbourhood of u\u2217 is maximal in G, that is N(u\u2217) is not a proper subset\nof NG(v) for all v \u2208 V , and\n(ii) the graph G\u2212 u\u2217 is twin-free.\nThe smallest twin-free graph that does not satisfy the two conditions (i) and (ii) in\nTheorem 2 is a graph on two components, one of which is an isolated vertex and the\n7\nother is an edge. The smallest connected twin-free graph that does not satisfy these two\nconditions is obtained from a complete graph on four vertices u1, u2, u3, u4 after adding\ntwo new vertices v1, v2 with edges (u1, v1), (u2, v1), (u3, v2), (u4, v2) and (v1, v2).\nWe can construct an infinite family of such examples as follows. Take two disjoint\ncopies, H and H \u2032, of the complete graph K2n on 2n vertices with a perfect matching\nremoved. Let (v1, w1), (v2, w2), . . . , (vn, wn) be the perfect matching removed from\nH , and let (v\u20321, w\n\u2032\n1), (v\n\u2032\n2, w\n\u2032\n2), . . . , (v\n\u2032\nn, w\n\u2032\nn) be the perfect matching removed from H\n\u2032.\nLet G be the graph obtained by adding the edges (v1, v\u20321), (v2, v\n\u2032\n2), . . . , (vn, v\n\u2032\nn) to H \u222a\nH \u2032. Clearly, the vertices with maximal neighbourhoods are v1, . . . , vn, v\u20321, . . . , v\n\u2032\nn, but\nremoving vi (resp. v\u2032i) from G leaves twins v\n\u2032\ni, w\n\u2032\ni (resp. vi, wi).\nProof. We restate that G is a twin-free graph on k vertices and that c is an ecological\ncolouring ofG with |c(V )| = k. Define C := c(V ) = {1, 2, . . . , k}. To prove each part\nof the theorem, we must find a valid, good, full set of rules R for (G, c). We know that\nR must contain rules that represent each vertex of G; we must describe how to define\nthe remaining rules. Here is a useful technique.\nLet A contain the subsets A \u2286 C for which R(G,c) contains a rule involving A. To\npropagate R(G,c) apply the following to obtain a set of rules R\u2217(G,c):\n\u2022 for each 1 \u2264 i \u2264 |C|, fix an ordering for the collection of sets inA of cardinality i;\n\u2022 for each subset A \u2286 C, let, if possible, A\u2217 be the smallest member of A, first\nordered, that is a superset of A (possibly A\u2217 = A). If A\u2217 exists and A\u2217 \u2192 x is a\nrule in R(G,c), then add A\u2192 x to R\u2217(G,c).\nWe make two claims. The first is a simple observation.\nClaim 1. We have that R\u2217(G,c) is valid for (G, c). Furthermore R\n\u2217\n(G,c) is a full set of\nrules on C if and only if R(G,c) contains a rule C \u2192 x for some x.\nClaim 2. We have that R\u2217(G,c) is good.\nWe prove Claim 2 as follows. If R\u2217(G,c) is not good, then there are rules A \u2192 x and\nB \u2192 y in R\u2217(G,c), where x \u2208 B, but A+ y \u2192 x is not in R\u2217(G,c). By definition, R(G,c)\ncontains a rule A\u2217 \u2192 x. Notice that A\u2217 is the set of colours used on the neighbours\nof the vertex in G coloured x. Similarly R(G,c) must contain a rule B\u2217 \u2192 y, where\nx \u2208 B \u2286 B\u2217 and B\u2217 is the set of colours used on the neighbours of the vertex in G\ncoloured y. So the vertices in G coloured x and y are adjacent and so y \u2208 A\u2217. But then\nA\u2217 contains A+ y so we must have A\u2217 = (A+ y)\u2217. Thus A+ y \u2192 x is in R\u2217(G,c). This\nproves Claim 2.\nWe now prove the first part of the theorem. Let G\u2032 be obtained from G by adding a new\nvertex v\u2217 adjacent to all existing vertices and to itself (we could avoid having a loop by\nadding two new vertices adjacent to every vertex in G and each other; but allowing the\nloop makes the analysis a little tidier). Colour v\u2217 with colour k+1 to obtain a colouring\nc\u2032 of G\u2032, and write C \u2032 = {1, . . . , k + 1}. Note that G\u2032 is twin-free.\nAsR\u2217(G\u2032,c\u2032) contains a rule involving C\n\u2032, Claim 1 tells us that it is a full and valid set\nof rules on C \u2032 for (G\u2032, c\u2032). By Claim 2, R\u2217(G\u2032,c\u2032) is also good. It remains only to show\nthat R\u2217(G\u2032,c\u2032) is valid for (G, c).\nNote that each vertex v ofG has the colour k+1 in itsG\u2032-neighbourhood. Therefore,\nas a vertex of G\u2032, v is represented in R(G\u2032,c\u2032) by a rule A + (k + 1) \u2192 x (where A is\n8\nthe set of colours in the G-neighbourhood of v). Observe that, sinceA\u2217 is a minimal set\ncontaining A that is involved in a rule of R(G\u2032,c\u2032), and since all rules B \u2192 y in R(G\u2032,c\u2032)\nsatisfy k+ 1 \u2208 B, we have A\u2217 = A+ (k+ 1). Thus R\u2217(G\u2032,c\u2032) contains the rule A\u2192 x,\nwhich represents the vertex v of G. This is true for all vertices of G, and so R\u2217(G\u2032,c\u2032) is\nalso valid for (G, c). Thus R\u2217(G\u2032,c\u2032) is a full set of rules on C\n\u2032 = {1, . . . , k + 1} that\nis good and valid for (G, c). Thus (G, c) is online extendible with {1, . . . , k + 1} by\nTheorem 1. This completes the proof of the first part of Theorem 2.\nNow we prove the second part of the theorem.\n(=\u21d2) We begin by showing that if G contains a vertex u\u2217 such that G\u2212 u\u2217 is twin-\nfree and the neighbourhood of u\u2217 in G is maximal (that is, it is not a proper subset\nof the neighbourhood of another vertex in G), then (G, c) is online extendible with\nc(V ) = C = {1, . . . , k}. If we can construct a full set of rules on C that is good and\nvalid for (G, c) then we are done by Theorem 1.\nWe may assume that u\u2217 is coloured k. Let G\u2032 be obtained from G by adding edges\nto G so that u\u2217 is adjacent to every vertex in G, including itself. Note that G\u2032 is twin-\nfree: u\u2217 is the only vertex adjacent to every vertex in the graph and if two other vertices\nboth have neighbourhoods A+ u\u2217, then in G one must have neighbourhood A and the\nother A+ u\u2217, contradicting that G\u2212 u\u2217 is twin-free.\nLet R\u2217(G\u2032,c) be obtained from R(G\u2032,c) by propagation. As R(G\u2032,c) contains the rule\nC \u2192 k, we have that R\u2217(G\u2032,c) is a full set of rules on C that is valid for (G\u2032, c) by Claim\n1 and that is good for (G\u2032, c) by Claim 2.\nIt remains only to show that R\u2217(G\u2032,c) is valid for (G, c). Note that for each vertex\nv 6= u\u2217 of G, if c(NG(v)) = A, then R(G\u2032,c) contains the rule A+k \u2192 x. Also R\u2217(G\u2032,c)\ncontains the rule A\u2192 x as A\u2217 = A+ k (since A\u2217 is a minimal superset of A and must\ncontain k). In G, the set of colours in the neighbourhood of v is either A or A + k; in\neither case there is a rule in R\u2217(G\u2032,c) to represent it.\nLet B be the colours in the neighbourhood of u\u2217 in G. Then B\u2217 = C as, by the\nmaximality of B, there is no other superset of B involved in a rule of R(G\u2032,c). Since\nR(G\u2032,c) contains C \u2192 k, R\u2217(G\u2032,c) contains B \u2192 k which represents u\u2217. So R\u2217(G\u2032,c) is\nvalid for (G, c) as required.\n(\u21d0=) Suppose that for every vertex u\u2217 of G, either G \u2212 u\u2217 is not twin-free or the\nneighbourhood of u\u2217 in G is not maximal. We show that (G, c) is not online extendible\nwith C = {1, . . . , k}.\nSuppose, for a contradiction, that there is an online algorithm to extend (G, c). Add\nvertex v to G adjacent to all vertices in G to form G1. Without loss of generality, our\nalgorithm assigns colour k to v to give us a colouring c1 of G1. Let u be the vertex\nof G0 := G that is coloured k. There are two cases to consider: either G0 \u2212 u is not\ntwin-free or NG0(u) is not maximal.\nSupposeG0\u2212u has twins, that is two vertices a and bwith the same neighbourhood\n(inG0\u2212u). The colouring c0 = c, and therefore c1, colours a and b differently; however\nwe have c1(NG1(a)) = c1(NG1(b)), a contradiction.\nSuppose NG0(u) is not maximal; suppose S = NG0(u) and T = NG0(u\n\u2032), where\nT = S \u222a{t1, . . . , tr}. Let Ni = NG0(ti). (Note that r 6= 0 since G0 = G is twin-free.)\nAdd vertices w1, . . . , wr to G1 one at a time, where wi is adjacent to each vertex in\nNi \u222a {u}. Our online algorithm is forced to assign the colour of ti to wi (since they\n9\nhave the same colours in their neighbourhoods). Let Gr+1 be the graph obtained after\naddition of w1, . . . , wr and let cr+1 be its colouring. In Gr+1, cr+1, we find that u and\nu\u2032 have the same set of colours in their neighbourhoods but are coloured differently\n(since they were coloured differently by c0). This is a contradiction. uunionsq\nNow we show that the online algorithms implied by Theorem 2 run in polynomial\ntime. Let G be a twin-free graph with ecological colouring c. We compute the sets\nA\u2217 required for the propagation. When a new vertex vi is presented and needs to be\ncoloured, we first determine the set of colours A in the neighbourhood of vi. We then\ncompute A\u2217 by checking whether A is a subset of any member of A, and if so, finding\nthe smallest and first ordered such member of A. This determines the rule by which vi\nshould be coloured and can be done in time polynomial in the size of G.\n3 EcologicalH-Colouring\nCrescenzi et al. [4] mention that ECOLOGICAL K3-COLOURING is NP-complete and\nask if the computational complexity of ECOLOGICAL H -COLOURING can be classi-\nfied. We classify the computational complexity of the ECOLOGICAL H -COLOURING\nproblem for all fixed target graphs H .\nBefore doing this, we must introduce some further terminology. Given a graph H\non k vertices, we define the product graph Hk. The vertex set of Hk is the Cartesian\nproduct\nVHk = VH \u00d7 \u00b7 \u00b7 \u00b7VH\ufe38 \ufe37\ufe37 \ufe38\nk times\n.\nThus a vertex u of Hk has k coordinates ui, 1 \u2264 i \u2264 k, where each ui is a vertex\nof H (note that these coordinates of u need not be distinct vertices of H). The edge set\nof Hk, EHk , contains an edge (u, v) in EHk if and only if, for 1 \u2264 i \u2264 k, there is an\nedge (ui, vi) in H . For 1 \u2264 i \u2264 k, the projection on the ith coordinate of Hk is the\nfunction pi : VHk \u2192 VH where pi(u) = ui. It is clear that each projection is a graph\nhomomorphism.\nTheorem 3. If H is bipartite or contains a loop, then ECOLOGICAL H -COLOURING\nis in P . IfH is not bipartite and contains no loops, then ECOLOGICAL H -COLOURING\nis NP-complete.\nProof. The first sentence of the theorem is an easy observation which we briefly justify.\nIf H has no edges, then G has an ecological H-colouring if and only if G has no edges.\nSuppose H is bipartite and contains at least one edge (x, y). If G is bipartite, then we\ncan find an ecological H-colouring by mapping each vertex of G to either x or y. If G\nis not bipartite then it is clear that there is no homomorphism from G to H . If H has a\nloop, then any graph has an ecological H-colouring since we can map every vertex to a\nvertex with a loop.\nWe prove that the ECOLOGICAL H -COLOURING problem isNP-complete for loop-\nless non-bipartite H by reduction from H -COLOURING which is known to be NP-\ncomplete for loopless non-bipartite H [8].\n10\nLet G be an instance of H-colouring and let n be the number of vertices in G. Let\nk denote the number of vertices in HN , the neighbourhood graph of H (recall that the\nneighbourhood graph of H is a graph in which each vertex has a unique neighbourhood\nand is obtained from H by repeatedly deleting one vertex from any pair with the same\nneighbourhood). Let pi denote a vertex in HkN whose k coordinates are the k distinct\nvertices of HN (the order is unimportant). Let G\u2032 be a graph formed from G and n\ncopies of HkN by identifying each vertex u of G with a distinct copy of the vertex pi; see\nFig. 3. We can distinguish the copies of HkN by referring to the vertex of G to which\nthey are attached.\nG G\u2032\nu = pi\nHkN\nFig. 3. The graph G\u2032 formed by attaching G to copies of HkN .\nWe claim that G has an H-colouring if and only if G\u2032 has an ecological HN -\ncolouring which is clearly equivalent to G\u2032 having an ecological H-colouring. As it\nis clear that if G\u2032 has an ecological HN -colouring, the restriction to VG provides an\nH-colouring for G, all we need to prove is that when G has an H-colouring, we can\nfind an ecological HN -colouring for G\u2032.\nIf G has an H-colouring, then clearly it also has an HN -colouring f . We use f to\nfind an ecologicalHN -colouring g forG\u2032. For each vertex u \u2208 VG, f(u) = pii for some\ni (this is possible because of the choice of pi as a vertex that has each vertex of HN as a\ncoordinate). For each vertex v in the copy of HkN attached to u, let g(v) = pi(v). Note\nthat g(u) = pi(u) = pii = f(u) for each vertex u in VG.\nCertainly g is anHN -colouring: the edges ofEG are mapped to edges ofHN since g\nis the same as f on VG, and the edges of each copy of HkN are mapped to edges of HN\nas g is the same as one of the projections of HkN on these edges.\nWe must show that it is ecological; that is, for each pair of vertices s and t in G\u2032, we\nmust show that\ng(NG\u2032(s)) = g(NG\u2032(t)) =\u21d2 g(s) = g(t). (1)\nSuppose that g(NG\u2032(s)) = g(NG\u2032(t)). We know that g(s) = pi(s) = si for some value\nof i. Then for each x \u2208 NHN (si), there is a vertex s\u2032 \u2208 NG\u2032(s) with g(s\u2032) = x (since\nwe can choose as s\u2032 a vertex in the same copy of HkN as s with s\n\u2032\ni = x and s\n\u2032\nj being any\nneighbour of sj , 1 \u2264 j \u2264 k, j 6= i). Thus g(NG\u2032(s)) \u2287 NHN (si) and so, since g is an\nHN -colouring, g(NG\u2032(s)) = NHN (si) and then, by (1), g(NG\u2032(t)) = NHN (si). But\nas the neighbourhoods of vertices in HN are distinct, we must have g(t) = si = g(s).\nThis completes the proof of Theorem 3. uunionsq\n11\n4 Conclusions and Open Problems\nIn the first part of our paper, we show that checking whether a pair (G, c) is online\nextendible with some finite set C \u2287 c(VG) can be done in polynomial time for fixed C.\nDetermining the computational complexity of this problem when C is part of the input\nremains an open problem. We obtain a positive result when considering pairs (G, c) in\nwhich each vertex of the k-vertex graph G has a distinct colour. For such (G, c), we\ncan check in time polynomial in k if (G, c) is online extendible with any C \u2287 c(VG).\nIndeed, we find that if |C| = k+1, then (G, c) is always online extendible with C, and\nthere are infinitely many examples of (G, c) that are not online extendible with C when\n|C| = k. It would be interesting to know whether there are examples of graphs that can\nbe extended online with an infinite number of colours but not with a finite number. We\nhave not been able to find such examples.\nIn the second part of our paper we gave a complete computational complexity\nclassification of the ECOLOGICAL H -COLOURING problem, thus answering an open\nproblem posed in [4]. What about the computational complexity of the problems that\nask whether a given graph G allows an edge-surjective or vertex-surjective ecological\ncolouring to a fixed target graph H? If H is not a neighbourhood graph, G allows nei-\nther an edge-surjective nor a vertex-surjective ecological colouring. Hence, both prob-\nlems differ from the ECOLOGICAL H -COLOURING problem and are only interesting\nfor neighbourhood graphsH . We note, however, that determining the complexity of the\ncorresponding problems that ask if a graph allows an edge-surjective homomorphism,\nor a vertex-surjective homomorphism, respectively, to a fixed graph H are notoriously\ndifficult open problems.\nReferences\n1. S. P. Borgatti and M. G. Everett, Graph colorings and power in experimental exchange net-\nworks, Social Networks 14 (1992) 287\u2013308.\n2. S.P. Borgatti, M.G. Everett, Ecological and perfect colorings, Social Networks 16 (1994) 43\u2013\n55.\n3. R.S. Burt, STRUCTURE Version 4.2 Reference Manual, Center for the Social Sciences,\nColumbia University, New York, 1991.\n4. P. Crescenzi, M. Di Ianni, F. Greco, G. Rossi and P. Vocca, On the existence of Ecological\nColouring, Proc. of the 34th International Workshop on Graph-Theoretic Concepts in Com-\nputer Science, Lecture Notes in Computer Science 5344, Springer, Berlin (2008), pp. 90\u2013100.\n5. E.H. Erickson, The relational basis of attitudes, Social Structures: A Network Approach, Cam-\nbridge, Cambridge University Press, pp. 99\u2013121, 1988.\n6. M.G. Everett and S. P. Borgatti, Role colouring a graph, Mathematical Social Sciences 21\n(1991) 183\u2013188.\n7. A. Gya\u00b4rfa\u00b4s and J. Lehel, On-line and first-fit colorings of graphs. Journal of Graph Theory\n12 (1988), 217\u2013227.\n8. P. Hell and J. Nes\u02c7etr\u02c7il, On the complexity of H-colouring, Journal of Combinatorial Theory,\nSeries B 48 (1990) 92\u2013110.\n9. N. Hummon and K. Carley, Social networks as normal science, Social Networks 15 (1993),\n71\u2013106.\n10. H.A. KIERSTEAD, Coloring graphs on-line. In: Online algorithms: the state of the art\n(1998), Lecture Notes in Computer Science 1442, Springer Verlag, pp. 281\u2013305.\n12\n"}