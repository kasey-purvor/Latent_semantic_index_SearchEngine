{"doi":"10.1109\/PESC.2008.4592650","coreId":"54790","oai":"oai:eprints.lincoln.ac.uk:2409","identifiers":["oai:eprints.lincoln.ac.uk:2409","10.1109\/PESC.2008.4592650"],"title":"Battery health determination by subspace parameter estimation and sliding mode control for an all-electric Personal Rapid Transit vehicle \u2014 the ULTra","authors":["Gould, C","Bingham, C M","Stone, D A","Bentley, P"],"enrichments":{"references":[{"id":1026744,"title":"Aging effects in valveregulated lead-acid batteries\u201d,","authors":[],"date":"1993","doi":"10.1109\/intlec.1993.388583","raw":"D. Berndt, E. Meissner, R. Rusch, \u201cAging effects in valveregulated lead-acid batteries\u201d, 15th International Telecommunications Energy Conference (INTELEC), vol.2, p139-145, Sep. 1993","cites":null},{"id":1027050,"title":"Aging mechanisms and service life of lead-acid batteries\u201d,","authors":[],"date":"2004","doi":"10.1016\/j.jpowsour.2003.09.052","raw":"P. Ruetschi, \u201cAging mechanisms and service life of lead-acid batteries\u201d, Journal of power souces, vol.127, p33-44, 2004","cites":null},{"id":1027670,"title":"An adaptive battery monitoring system for an electric vehicle,&quot;","authors":[],"date":"1998","doi":"10.1109\/pedes.1998.1330701","raw":"Sinclair, R. Duke, S. Round, &quot;An adaptive battery monitoring system for an electric vehicle,&quot; Proceedings. International Conference on Power Electronic Drives and Energy Systems for Industrial Growth, vol.2, p786-791, Dec. 1998","cites":null},{"id":1027355,"title":"Battery state of health estimation through coup de fouet,&quot;","authors":[],"date":"2000","doi":"10.1109\/intlec.2000.884309","raw":"C. S. C. Bose, F. C. Laman, &quot;Battery state of health estimation through coup de fouet,&quot; 22nd International Telecommunications Energy Conference (INTELEC), p597-601, 2000.","cites":null},{"id":1028272,"title":"Elecktrochemische Kinetik\u201d,","authors":[],"date":null,"doi":"10.1007\/978-3-642-86547-3","raw":"K. J. Vetter, \u201cElecktrochemische Kinetik\u201d, Springer, Berlin, p268,","cites":null},{"id":1026448,"title":"Fundamentals of battery dynamics\u201d,","authors":[],"date":"2006","doi":"10.1016\/j.jpowsour.2005.10.041","raw":"A. Jossen, \u201cFundamentals of battery dynamics\u201d, Journal of power souces, vol.154, p530-538, 2006","cites":null},{"id":1028122,"title":"New estimation filtering for battery management systems of lead-acid cells in hybrid electric vehicles\u201d,","authors":[],"date":"2007","doi":null,"raw":"Pyung-Soo Kim, \u201cNew estimation filtering for battery management systems of lead-acid cells in hybrid electric vehicles\u201d, International Journal of Computer Science and Network Security, vol.7, no.2, Feb. 2007\u201d","cites":null},{"id":1027082,"title":"Nonlinear observers for predicting state-of-charge and state-ofhealth of lead-acid batteries for hybrid-electric vehicles,&quot;","authors":[],"date":"2005","doi":"10.1109\/epe.2005.219601","raw":"B. S. Bhangu, P. Bentley, D. A. Stone, C. M. Bingham, &quot;Nonlinear observers for predicting state-of-charge and state-ofhealth of lead-acid batteries for hybrid-electric vehicles,&quot; IEEE Transactions on Vehicular Technology, vol.54, no.3, p783-794, May 2005","cites":null},{"id":1028578,"title":"System identification \u2013 Theory for the user\u201d, 2nd ed,","authors":[],"date":"1999","doi":"10.1109\/mra.2012.2192817","raw":"L.Ljung, \u201cSystem identification \u2013 Theory for the user\u201d, 2nd ed, PTR Prentice Hall, p317-353, 1999","cites":null},{"id":1027897,"title":"Takahiro Yanagihara, \u201cState of charge estimation of sealed lead-acid batteries used for electric vehicles\u201d,","authors":[],"date":"1998","doi":"10.1109\/pesc.1998.701957","raw":"Atsuo Kawamura, Takahiro Yanagihara, \u201cState of charge estimation of sealed lead-acid batteries used for electric vehicles\u201d, 29th Annual IEEE Power Electronics Specialists Conference, vol.1, p583-587, May 1998","cites":null}],"documentType":{"type":1}},"contributors":[],"datePublished":"2008","abstract":"The paper describes a real-time adaptive battery modelling methodology for use in an all electric personal rapid transit (PRT) vehicle. Through use of a sliding-mode observer and online subspace parameter estimation, the voltages associated with monitoring the state of charge (SoC) of the battery system are shown to be accurately estimated, even with erroneous initial conditions in both the model and parameters. In this way, problems such as self- discharge during storage of the cells and SoC drift (as usually incurred by coulomb-counting methods due to overcharging or ambient temperature fluctuations) are overcome. Moreover, through online monitoring of the degradation of the estimated parameters, battery ageing (State of Health) can be monitored and, in the case of safety- critical systems, cell failure may be predicted in time to avoid inconvenience to passenger networks. Due to the adaptive nature of the proposed methodology, this system can be implemented over a wide range of operating environments, applications and battery topologies, by adjustment of the underlying state-space model","downloadUrl":"https:\/\/core.ac.uk\/download\/pdf\/54790.pdf","fullTextIdentifier":"http:\/\/eprints.lincoln.ac.uk\/2409\/1\/gould_2.pdf","pdfHashValue":"7cd2b9031caba3063ce504633a0b8fcb987c11c0","publisher":"Institution of Electronic and Electrical Engineers","rawRecordXml":"<record><header><identifier>\n    \n    \n      oai:eprints.lincoln.ac.uk:2409<\/identifier><datestamp>\n      2013-03-13T08:37:15Z<\/datestamp><setSpec>\n      7374617475733D707562<\/setSpec><setSpec>\n      7375626A656374733D6A6163735F48:6A6163735F48363030<\/setSpec><setSpec>\n      74797065733D636F6E666572656E63655F6974656D<\/setSpec><\/header><metadata><oai_dc:dc xmlns:oai_dc=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/\" xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/ http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc.xsd\" ><dc:relation>\n    \n      \n        http:\/\/eprints.lincoln.ac.uk\/2409\/<\/dc:relation><dc:title>\n        Battery health determination by subspace parameter estimation and sliding mode control for an all-electric Personal Rapid Transit vehicle \u2014 the ULTra<\/dc:title><dc:creator>\n        Gould, C<\/dc:creator><dc:creator>\n        Bingham, C M<\/dc:creator><dc:creator>\n        Stone, D A<\/dc:creator><dc:creator>\n        Bentley, P<\/dc:creator><dc:subject>\n        H600 Electronic and Electrical Engineering<\/dc:subject><dc:description>\n        The paper describes a real-time adaptive battery modelling methodology for use in an all electric personal rapid transit (PRT) vehicle. Through use of a sliding-mode observer and online subspace parameter estimation, the voltages associated with monitoring the state of charge (SoC) of the battery system are shown to be accurately estimated, even with erroneous initial conditions in both the model and parameters. In this way, problems such as self- discharge during storage of the cells and SoC drift (as usually incurred by coulomb-counting methods due to overcharging or ambient temperature fluctuations) are overcome. Moreover, through online monitoring of the degradation of the estimated parameters, battery ageing (State of Health) can be monitored and, in the case of safety- critical systems, cell failure may be predicted in time to avoid inconvenience to passenger networks. Due to the adaptive nature of the proposed methodology, this system can be implemented over a wide range of operating environments, applications and battery topologies, by adjustment of the underlying state-space model.<\/dc:description><dc:publisher>\n        Institution of Electronic and Electrical Engineers<\/dc:publisher><dc:date>\n        2008<\/dc:date><dc:type>\n        Conference or Workshop contribution<\/dc:type><dc:type>\n        PeerReviewed<\/dc:type><dc:format>\n        application\/pdf<\/dc:format><dc:language>\n        en<\/dc:language><dc:identifier>\n        http:\/\/eprints.lincoln.ac.uk\/2409\/1\/gould_2.pdf<\/dc:identifier><dc:identifier>\n          Gould, C and Bingham, C M and Stone, D A and Bentley, P  (2008) Battery health determination by subspace parameter estimation and sliding mode control for an all-electric Personal Rapid Transit vehicle \u2014 the ULTra.  In: Power Electronics Specialists Conference, 2008. PESC 2008. IEEE, 15-19 June 2008, Rhodes, Greece.  <\/dc:identifier><dc:relation>\n        http:\/\/dx.doi.org\/10.1109\/PESC.2008.4592650<\/dc:relation><dc:relation>\n        10.1109\/PESC.2008.4592650<\/dc:relation><\/oai_dc:dc><\/metadata><\/record>","journals":null,"language":{"code":"en","id":9,"name":"English"},"relations":["http:\/\/eprints.lincoln.ac.uk\/2409\/","http:\/\/dx.doi.org\/10.1109\/PESC.2008.4592650","10.1109\/PESC.2008.4592650"],"year":2008,"topics":["H600 Electronic and Electrical Engineering"],"subject":["Conference or Workshop contribution","PeerReviewed"],"fullText":"4381\nBattery Health Determination by Subspace \nParameter Estimation and Sliding Mode Control \nfor an All-Electric Personal Rapid Transit \nVehicle \u2013 The ULTra \nC. R. Gould\u2020, C. M. Bingham, D. A. Stone, P. Bentley  \nUNIVERSITY OF SHEFFIELD \nDepartment of Electronic and Electrical Engineering \nMappin Street, Sheffield, S1 3JD, UK \nTel. +44 (0) 114 2225847, Fax. +44 (0) 114 2225196, \n\u2020E-mail: c.gould@sheffield.ac.uk \nAbstract\u2014 The paper describes a real-time adaptive battery \nmodelling methodology for use in an all electric Personal \nRapid Transit (PRT) vehicle. Through use of a sliding-mode \nobserver and online Subspace parameter estimation, the \nvoltages associated with monitoring the State of Charge \n(SoC) of the battery system are shown to be accurately \nestimated, even with erroneous initial conditions in both the \nmodel and parameters. In this way, problems such as self-\ndischarge during storage of the cells and SoC drift (as \nusually incurred by coulomb-counting methods due to over-\ncharging or ambient temperature fluctuations) are \novercome. Moreover, through online monitoring of the \ndegradation of the estimated parameters, battery ageing \n(State of Health) can be monitored and, in the case of safety-\ncritical systems, cell failure may be predicted in time to \navoid inconvenience to passenger networks.  \nDue to the adaptive nature of the proposed methodology, \nthis system can be implemented over a wide range of \noperating environments, applications and battery \ntopologies, by adjustment of the underlying state-space \nmodel.\nI. INTRODUCTION\nWith the development of environmentally-friendly, \nbattery-operated vehicles and the increased use of X-by-\nwire systems to control their operation, the demands on \nbattery systems become of utmost importance to the \noperational safety and reliability of the vehicles. Large \ntransient power demands coupled with the possibility of \nthe battery cells being in a state of partial discharge, \nrequire that the battery management system has \nknowledge of the exact capability of the cells so that safe \nand efficient peak performance of the vehicle is \nachievable at all times. As an example, Figure 1 depicts \nexample test-track transient demands on a Personal Rapid \nTransit (PRT) vehicle known as the ULTra (Urban Light \nTransport \u2013 Figure 2) developed by Advanced Transport \nSystems Ltd [1], which is an unmanned, steer-by-wire \nelectric vehicle capable of carrying a 500kg payload at \nspeeds up to 40kmph, for the purpose of improving the \ntransportation needs of a busy city or other public space \n(e.g. Heathrow airport in this case) with minimal \nenvironmental impact.  \n0 200 400 600 800 1000 1200 1400 1600 1800 2000 2200\n-200\n-150\n-100\n-50\n0\n50\n100\nTime (s)\nIn\npu\nt C\nur\nre\nnt\n (A\n)\nFigure 1. Example of ULTra driving cycle current-profile \nFigure 2. ULTra Personal Rapid Transit vehicle \nConsidering the many dynamic mechanisms occurring \ninside a battery to enable charge to be accepted and \n978-1-4244-1668-4\/08\/$25.00 \u00a92008 IEEE\n4382\nsupplied [2], it is generally accepted that monitoring of the \ncell\u2019s State-of-Charge (SoC) to prevent dangerous over-\ncharging, and the ability to estimate the State-of-Health\n(SoH) so that excessive transients may be confidently \nsourced\/sinked without catastrophic failure of the safety-\ncritical power-pack, is of primary importance in battery \nmanagement strategies.  \nWhilst SoC characterisation techniques have been \npublished for lead-acid battery technologies [5-9], SoH \ndetermination is less well-reported, primarily because the \nSoH is a qualitative rather than quantitative measure of the \nageing of a battery [3,4] and its ability to provide its \nnominal capacity over extended lengths of time. In most \ncases, the SoH is estimated by monitoring the degradation \nof specific battery model parameters, as suggested in [5], \nor close inspection of operational phenomena such as the \nCoup de Fouet technique used in [6]. \nThe SoC of a battery is also often inferred, usually from \nexternal measurements taken during either excitation or \ndormancy of the cell. Many authors have investigated \nmodelling strategies for accurate SoC estimation, such as \ncoulomb-counting methods [7], electrochemical battery \nmodels [6], or equivalent circuit battery models [5,8,9,10]. \nOf these, the simplest is coulomb-counting, whereby \nthe battery is treated as a simple capacitor charge store \n(where the voltage across its output terminals is a function \nof the total integrated current demand). The simplicity of \nthis method is, however, undermined by the need for \naccurate a priori knowledge of the initial capacity, and \nthat gassing reactions caused by overcharging are not \naccommodated, leading to SoC \u2018drift\u2019. Electrochemical \nmodels are used to predict energy storage occurring in the \ncells, similar to the coulomb-counting method, and often \nrequire complex models to accommodate gassing, aging \nor temperature effects.  \nMore popular is the equivalent circuit model \nmethodology, where the mechanics of charge transfer and \nchemical effects are modelled as circuit components, \ntraditionally resistor-capacitor networks. The authors of \n[5,8,9] demonstrate the estimation of static battery \nparameters through Kalman filter observer theory, circuit \ntheory, and estimation filtering theory according to \nmodels based on the well-known Randles\u2019 model [10]. \nThese result in good SoC estimation, and in the case of \n[5], a demonstration of SoH deterioration due to the use of \nclosed-loop observer theory. For dynamic drive cycles \ndescribed by Figure 1, however, static parameter values \nwill not suffice to produce an accurate model in either \nopen- or closed-loop.  \nThis paper focuses on providing an accurate dynamic \nmodel of systems under the stresses such as the ULTra \ndrive-cycle presents, with its large bipolar transients and \nrequirements for occasional charge scenarios. Here it will \nbe shown that a Subspace parameter estimation algorithm \ncan be performed online in combination with a simple \nsliding-mode observer to allow adaptive identification and \ncorrection of the model voltages associated with SoC and \nSoH monitoring. The resulting dynamic parameter \nestimates will also be shown to be useful for fault-\nprediction and battery end-of-life determination. \nII. BATTERY MODEL\nThe ULTra relies on a system of four 12V Valve-\nRegulated Lead-Acid (VRLA) batteries,  nominally rated \nbetween 45Ahrs (at the C5 rate) and 50Ahrs (at the C20 \nrate), which will be modelled individually using the \nRandles\u2019 model shown in Figure 3. In this model, Rd\nrepresents the self-discharge resistance, and is usually so \nlarge that minimal current is drawn and is therefore \nneglected in this dynamic model, resulting in the state-\nspace description given in (1). Classically, Cb is \nconsidered the main charge store (also known as the \u2018bulk \ncapacitance\u2019), and the voltage across it considered a \nsuitable indicator of SoC, whilst SoH deterioration can be \ninferred by any decrease in the value of Cb. Ri models the \nresistance of the battery\u2019s terminals and inter-cell \nconnections, whilst Rt and Cs (also known as transfer \nresistance and surface capacitance) describe transient \neffects resulting from shifting ion concentrations and plate \ncurrent densities. \nVCs\nRi\nFigure 3. Randles\u2019 equivalent circuit model \niinCCo\ntsCtinC\nbinC\nRIVVV\nRCVRIV\nCIV\nbs\nss\nb\n\u000e\u000e \n\u0010 \n \n\/)(\n\/\n\u0006\n\u0006\n(1)\nIII. SLIDING MODE OBSERVER THEORY\nAn uncertain dynamical system description (2) may be \n\u2018observed\u2019 using the discontinuous observer form (3) \nproposed by Utkin (1981), where  and  are the state \nestimates for  and\n1x\u02c6 y\u02c6\n1x y , whilst  and \u0083\u008fL \u000e\u0083\u008fM  are \nfeedback gains. This results in the discontinuous observer \nform given in (4), where iineqo RIVV \u000e :\n)()(\n),,()()()(\ntCxty\ntuxftButAxtx\n \n\u000e\u000e \u0006\n(2)\n)\u02c6sgn(\n\u02c6\u02c6\u02c6\n\u02c6\u02c6\u02c6\n2222121\n11121111\nyyMv\nvuByAxAy\nLvuByAxAx\ni \u0010 \n\u0010\u000e\u000e \n\u000e\u000e\u000e \n\u0006\n\u0006\n(3)\nVo\nRt\nCb Rd\n(optional)\nCs\nIin\nVeq VCb\n4383\n\u000b \f \u00bb\n\u00bb\n\u00bb\n\u00bc\n\u00ba\n\u00ab\n\u00ab\n\u00ab\n\u00ac\n\u00aa\n\u0010\u0010\u0010\n\u0010\u0010\n\u0010\u0010\n\u000e\n\u00bb\n\u00bb\n\u00bb\n\u00bc\n\u00ba\n\u00ab\n\u00ab\n\u00ab\n\u00ac\n\u00aa\n\u000e\n\u000e\n\u00bb\n\u00bb\n\u00bb\n\u00bc\n\u00ba\n\u00ab\n\u00ab\n\u00ab\n\u00ac\n\u00aa\n\u00bb\n\u00bb\n\u00bb\n\u00bc\n\u00ba\n\u00ab\n\u00ab\n\u00ab\n\u00ac\n\u00aa\n\u0010\n\u0010 \n\u00bb\n\u00bb\n\u00bb\n\u00bc\n\u00ba\n\u00ab\n\u00ab\n\u00ab\n\u00ac\n\u00aa\n)\u02c6sgn(\n)\u02c6sgn(\n)\u02c6sgn(\n\/\/\n\/1\n\/1\n0\/\/10\n0\/\/10\n000\n2\n1\niineq\niineq\niineq\nin\nsbsb\ns\nb\neq\nC\nC\nts\nts\neq\nC\nC\nRIVyM\nRIVyML\nRIVyML\nI\nCCCC\nC\nC\nV\nV\nV\nRC\nRC\nV\nV\nV\ns\nb\ns\nb\n\u0006\n\u0006\n\u0006\n(4)\nIV. SUBSPACE PARAMETER ESTIMATION\nThe input-output relationship of a discrete-time state \nspace model with system matrices Ad, Bd, Cd and Dd and \nwhite noises w(t), v(t) (5), can also be represented by the \nrelationship shown in (6), for any invertible matrix \u2018T\u2019. It \ncan be shown (Ljung 10.80-10.129 [11]), that the system \nof matrices Ad, Bd, Cd, Dd, and initial conditions )0(~x\ngiven sufficient input-output data, may then be estimated \nby solution of the resulting Subspace algorithms by a least \nsquares method. \n)()()()(\n)()()()1(\ntvtuDtxCty\ntwtuBtxAtx\ndd\ndd\n\u000e\u000e \n\u000e\u000e \u000e\n(5)\n)()()(~)(\n)(~)()(~)1(~ 11\ntvtuDtxTCty\ntwtuBTtxTATtx\ndd\ndd\n\u000e\u000e \n\u000e\u000e \u000e \u0010\u0010\n(6)\nThis allows static battery model parameters to be \nestimated for a \u2018window\u2019 of input-output data (Vo and Iin). \nTo capture the dynamic variation of the battery \nparameters, a FIFO buffer is used to store the \naccumulation of input-output data. Due to the large time-\nconstants involved with Cb, it is impossible to acquire \nsufficient buffered data for accurate estimation of the \nexact value of Cb, without neglecting other, more transient \nparameter variations (i.e. occasional charging periods), \nand so a structured Subspace estimation model is used in \nwhich Cb is assumed to be large (100000F) and constant, \nover a small buffer of data (90 seconds). Inaccuracies in \nCb will be corrected for by the inherent predictor-corrector \naction of the sliding mode observer, allowing \ndetermination of Cb, and hence SoH. \nV. RESULTS\nThe observer is initialised with ,11 \u0010 L 002.02 \u0010 L ,\n, , ,02.0 M : m6iR : m10tR F2000 sC ,\n,  and an erroneous initial \nvoltage, . The algorithms detailed in (1)-(6) \nare then used to monitor the effect that a continuous series \nof cycles constructed from Figure 1 has on a fully \ncharged, well-conditioned battery. After 90s, and at \nregular subsequent intervals (10s in this case) the \nSubspace algorithms of [11] are used to adapt the battery \nmodel parameters online, resulting in the time-varying \nparameters shown in Figures 4, 5 and 6, demonstrating \nthat careful monitoring of these parameters can indicate \ndangerous areas of operation such as over-\ncharge\/discharge situations as well as possible fault \nconditions such as cell short-circuits. \nF100000 bC V0)0(  sCV\nV11)0(  \nbC\nV\n0 2000 4000 6000 8000 10000 12000 14000 16000\n0\n0.005\n0.01\n0.015\n0.02\n0.025\n0.03\n0.035\n0.04\n0.045\n0.05\nTime (s)\nR\nes\nis\nta\nnc\ne \nR\ni (\n:\n)\nFigure 4. Online estimated battery parameters: Ri\n0 2000 4000 6000 8000 10000 12000 14000 16000\n0\n0.5\n1\n1.5\n2\n2.5\n3\n3.5 x 10\n4\nTime (s)\nC\nap\nac\nita\nnc\ne \nC\ns \n(F\n)\nFigure 5. Online estimated battery parameters: Cs\n0 2000 4000 6000 8000 10000 12000 14000 16000\n0\n0.01\n0.02\n0.03\n0.04\n0.05\n0.06\n0.07\n0.08\n0.09\n0.1\nTime (s)\nR\nes\nis\nta\nnc\ne \nR\nt (\n:\n)\nFigure 6. Online estimated battery parameters: Rt\n4384\nThe resulting observer estimate of \nb\n indicating the \nvariation of SoC, is filtered with a low-pass filter (\u0226c = \n0.057rads-1), and shown in Figure 7, demonstrating the \nability of the observer to correct for erroneous initial \nconditions compared to an initial open-circuit voltage \n(\nb\n) reading. Moreover, the variation in Cb\/SoH (Figure \n8) may be estimated by applying a linear curve-fit to \nbuffered estimations of \nb\n, and by considering the \nintegrated current through this capacitor over these sample \ntimes (typically 1800s to provide stable results). \nCV\nCV\nCV\n0 2000 4000 6000 8000 10000 12000 14000 16000\n9.5\n10\n10.5\n11\n11.5\n12\n12.5\n13\n13.5\nTime (s)\nVo\nlta\nge\n V\nC\nb \n(V\n)\nMeasured Open-Cct\n           Voltage\nFigure 7. Estimated VCb showing convergence of observer to correct \ninitial condition \n0 2000 4000 6000 8000 10000 12000 14000 16000\n0\n2\n4\n6\n8\n10\n12\n14 x 10\n4\nTime (s)\nC\nap\nac\nita\nnc\ne \nC\nb \n(F\n)\nCb from gradient of VCb estimate\nLinear approximation of constant Cb\nFigure 8. Resulting variation of Cb from gradient of Figure 7 and \ncurrent integration \nAfter the initial convergence of the Subspace parameter \nand observer algorithms, It can be seen that the value of \nCb settles to an almost constant value (especially in the \nregion of preferred operation occupied between ~80% \nSoC (Time=3000s) and ~30% SoC (Time=10500s). \n Through accelerated ageing tests, whereby the battery \nunder test is repeatedly charged (at the C10 rate) and then \ndischarged with a repetition of the cycles demonstrated in \nFigure (1), the methodology above can be used to \ndemonstrate the gradual degradation of SoH of the battery \nover time (Figure (9). This degradation can be \napproximated with the linear relationship described in (7)  \n0 5 10 15 20 25 30 35 40\n7\n7.5\n8\n8.5\n9\n9.5\n10 x 10\n4\nTest Number\nEs\ntim\nat\ned\n C\nb \n(F\n)\nCb = - 264*N + 9.06e+004\nEstimated values\nLinear approximation\nFigure 9. Decline in estimated Cb with \u2018age\u2019 of battery \n90600264 \u000e\u0010 NCb (7)\nwhere N is the test number. \nEquivalently, as each test is implemented, the total \ncurrent demand may be integrated over the test duration to \nestimate the total capacity of the battery under test at that \ntime (Figure (10)). Similarly, a linear relationship (8) can \nalso be applied. \n0 5 10 15 20 25 30 35 40\n43\n44\n45\n46\n47\n48\n49\n50\nTest Number\nC\nap\nac\nity\n b\ny \ncu\nrr\nen\nt i\nnt\neg\nra\ntio\nn \n(A\nhr\ns)\nAhrs = - 0.074*N + 48.9\nEstimated values\nLinear approximation\nFigure 10. Reduction of available capacity with \u2018age\u2019 of battery \n9.48074.0 \u000e\u0010 NAhrs (8)\nThe linear approximations of (7) and (8) may be \nmanipulated to provide a relationship (9) between the total \navailable capacity of a battery and the estimated value of \nCb at any time during its life (Figure 11). \n5.2300028.0 \u000e bCAhrs (9)\nTaking the example demonstrated in Figures (7) and \n(8), the estimated Cb of 87000F maps to an available \ncapacity of 47.86Ahrs, compared to that of 48.1Ahrs of a \npossible 45-50Ahrs achieved by integrating the total \n4385\ncurrent demand. The algorithms and linear approximations \nare therefore demonstrated to estimate the State-of-Health \nof a battery with good accuracy. \n7.8 8 8.2 8.4 8.6 8.8 9 9.2\nx 10\n4\n45.5\n46\n46.5\n47\n47.5\n48\n48.5\n49\nC\nap\nac\nity\n (A\nhr\ns)\nEstimated Cb (F)\n Ahrs=0.00028*Cb+23.5\nFigure 11. Relationship between estimated Cb and available capacity \nVI. CONCLUSION\nA novel modelling methodology of a battery for an all-\nelectric Personal Rapid Transit vehicle is proposed \nconsisting of Randles\u2019 circuit model, novel online \nSubspace parameter estimation and sliding-mode observer \nfor the purpose of battery SoH\/SoC Estimation. The use of \nSubspace estimation algorithms allows the sliding mode \nobserver to adaptively estimate voltages associated with \nthese functionality indicators even given erroneous initial \nconditions, so that ambient temperature effects and battery \nself-discharge issues are automatically compensated for. \nMoreover the resulting parameter estimations can identify \nfault conditions and areas of unsafe operation.  \nThe voltages estimated by the observer are shown to \nfacilitate the online monitoring of the model parameter \nassociated with the main charge store of a battery, \nallowing degradation of the State-of-Health to be \nassessed, and more importantly, estimation of the \navailable capacity of the battery under test over time. \nACKNOWLEDGMENT\nThe authors would like to thank the Engineering and \nPhysical Sciences Research Council for supporting this \nwork, whilst thanks also goes to Advanced Transport \nSystems Ltd for their cooperation, particularly Nicolas \nZurlinden for providing the ULTra driving cycle data and \npress-shots.\nREFERENCES\n[1] http:\/\/www.atsltd.co.uk \n[2] A. Jossen, \u201cFundamentals of battery dynamics\u201d, Journal of power \nsouces, vol.154, p530-538, 2006 \n[3] D. Berndt, E. Meissner, R. Rusch, \u201cAging effects in valve-\nregulated lead-acid batteries\u201d, 15th International \nTelecommunications Energy Conference (INTELEC), vol.2, \np139-145, Sep. 1993 \n[4] P. Ruetschi, \u201cAging mechanisms and service life of lead-acid \nbatteries\u201d, Journal of power souces, vol.127, p33-44, 2004 \n[5] B. S. Bhangu, P. Bentley, D. A. Stone, C. M. Bingham, \n\"Nonlinear observers for predicting state-of-charge and state-of-\nhealth of lead-acid batteries for hybrid-electric vehicles,\" IEEE \nTransactions on Vehicular Technology, vol.54, no.3, p783-794, \nMay 2005  \n[6] C. S. C. Bose, F. C. Laman, \"Battery state of health estimation \nthrough coup de fouet,\" 22nd International Telecommunications \nEnergy Conference (INTELEC), p597-601, 2000.  \n[7] Sinclair, R. Duke, S. Round, \"An adaptive battery monitoring \nsystem for an electric vehicle,\" Proceedings. International \nConference on Power Electronic Drives and Energy Systems for \nIndustrial Growth, vol.2, p786-791, Dec. 1998 \n[8] Atsuo Kawamura, Takahiro Yanagihara, \u201cState of charge \nestimation of sealed lead-acid batteries used for electric vehicles\u201d, \n29th Annual IEEE Power Electronics Specialists Conference, \nvol.1, p583-587, May 1998 \n[9] Pyung-Soo Kim, \u201cNew estimation filtering for battery \nmanagement systems of lead-acid cells in hybrid electric \nvehicles\u201d, International Journal of Computer Science and Network \nSecurity, vol.7, no.2, Feb. 2007\u201d \n[10] K. J. Vetter, \u201cElecktrochemische Kinetik\u201d, Springer, Berlin, p268, \n1961\n[11] L.Ljung, \u201cSystem identification \u2013 Theory for the user\u201d, 2nd ed, \nPTR Prentice Hall, p317-353, 1999 \n"}