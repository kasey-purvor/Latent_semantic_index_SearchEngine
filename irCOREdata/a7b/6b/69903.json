{"doi":"10.1049\/ip-cds:20040557","coreId":"69903","oai":"oai:eprints.lancs.ac.uk:20121","identifiers":["oai:eprints.lancs.ac.uk:20121","10.1049\/ip-cds:20040557"],"title":"Flexible embedded test solution for high-speed analogue front-end architectures.","authors":["Lechner, A.","Burbidge, Martin J.","Richardson, Andrew M. D."],"enrichments":{"references":[{"id":16319539,"title":"A high resolution error plotter for analog-to-digital converters\u2019,","authors":[],"date":null,"doi":"10.1109\/tim.1975.4314462","raw":"Corcoran, J.J., Hornak, T., and Skov, P.B.: \u2018A high resolution error plotter for analog-to-digital converters\u2019, IEEE Trans. Instrum. Meas.,","cites":null},{"id":16319533,"title":"A r n o l d ,B . :\u2018 B u i l t - i ns e l f - t e s tg a i n sg r o u n da sA T Et i m ea n dc o s ts o a r","authors":[],"date":"2000","doi":null,"raw":"A r n o l d ,B . :\u2018 B u i l t - i ns e l f - t e s tg a i n sg r o u n da sA T Et i m ea n dc o s ts o a r \u2019 , Electron. Des., 2000, 48, (19), pp. 117\u2013124","cites":null},{"id":16319528,"title":"Analogue synthesis for SoC\u2019,","authors":[],"date":null,"doi":"10.1049\/ess:20030403","raw":"Nandra, N.: \u2018Analogue synthesis for SoC\u2019, Electron. Syst. Softw.,","cites":null},{"id":16319543,"title":"Dynamic testing of high speed aid converters\u2019,","authors":[],"date":"1978","doi":"10.1109\/jssc.1978.1051056","raw":"Pretzl, G.: \u2018Dynamic testing of high speed aid converters\u2019, IEEE J. Solid-State Circuits, 1978, 13, pp. 368\u2013371","cites":null},{"id":16319535,"title":"Mini tutorial: mixed signal test\u2019.","authors":[],"date":null,"doi":"10.1109\/test.1997.639671","raw":"Sunter, S.: \u2018Mini tutorial: mixed signal test\u2019. Presented at 7th IEEE Int. Mixed-Signal Testing Workshop, IMSTW01, Atlanta, GA, USA, 13\u2013","cites":null},{"id":16319541,"title":"Optimum measurement ADC transitions using a feedback loop\u2019.","authors":[],"date":"1999","doi":"10.1109\/imtc.1999.776041","raw":"Max, S.: \u2018Optimum measurement ADC transitions using a feedback loop\u2019. Proc. 16th IEEE Conf. on Instrumentation and Measurement Technology, Venice, Italy, 24\u201326 May 1999, pp. 1415\u20131420","cites":null},{"id":16319530,"title":"Semiconductor Industry Association: \u2018International technology roadmap for semiconductors\u2019.","authors":[],"date":"2001","doi":null,"raw":"Semiconductor Industry Association: \u2018International technology roadmap for semiconductors\u2019. 2001 edn., and 2002 update, 2002","cites":null},{"id":16319532,"title":"System-on-a-chip mixed-signal test: issues, current industry practices and future trends\u2019.","authors":[],"date":null,"doi":null,"raw":"Nagi, N.: \u2018System-on-a-chip mixed-signal test: issues, current industry practices and future trends\u2019. Proc. Int. Mixed Signal Testing Workshop, IMSTW99, Whistler, British Columbia, Canada, 15\u201318 June","cites":null},{"id":16319537,"title":"Tutorial: Mixed-signal BIST - does industry need it?\u2019.","authors":[],"date":"1997","doi":null,"raw":"Sunter, S.: \u2018Tutorial: Mixed-signal BIST - does industry need it?\u2019. Presented at 3rd IEEE Int. Mixed Signal Testing Workshop, IMSTW97, Seattle, Washington, USA, 3\u20136 June 1997","cites":null}],"documentType":{"type":1}},"contributors":[],"datePublished":"2004","abstract":"A flexible embedded test solution for high-speed analogue front-end subsystems is presented. A novel concept of a flexible test solution that addresses virtual component test requirements in particular is introduced. The integration and application of the non-invasive digital test solution is demonstrated for a representative design. Its area overhead is assessed for different depths in on-chip test evaluation","downloadUrl":"https:\/\/core.ac.uk\/download\/pdf\/69903.pdf","fullTextIdentifier":"http:\/\/eprints.lancs.ac.uk\/20121\/1\/getPDF2.pdf","pdfHashValue":"0d0daf0904c5288f8d27b64c76838740ed8f7ef8","publisher":null,"rawRecordXml":"<record><header><identifier>\n    \n    \n      oai:eprints.lancs.ac.uk:20121<\/identifier><datestamp>\n      2018-01-24T02:34:09Z<\/datestamp><setSpec>\n      7374617475733D707562<\/setSpec><setSpec>\n      7375626A656374733D54:5441<\/setSpec><setSpec>\n      74797065733D61727469636C65<\/setSpec><\/header><metadata><oai_dc:dc xmlns:oai_dc=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/\" xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/ http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc.xsd\" ><dc:title>\n    \n      \n        Flexible embedded test solution for high-speed analogue front-end architectures.<\/dc:title><dc:creator>\n        Lechner, A.<\/dc:creator><dc:creator>\n        Burbidge, Martin J.<\/dc:creator><dc:creator>\n        Richardson, Andrew M. D.<\/dc:creator><dc:subject>\n        TA Engineering (General). Civil engineering (General)<\/dc:subject><dc:description>\n        A flexible embedded test solution for high-speed analogue front-end subsystems is presented. A novel concept of a flexible test solution that addresses virtual component test requirements in particular is introduced. The integration and application of the non-invasive digital test solution is demonstrated for a representative design. Its area overhead is assessed for different depths in on-chip test evaluation.<\/dc:description><dc:date>\n        2004<\/dc:date><dc:type>\n        Journal Article<\/dc:type><dc:type>\n        NonPeerReviewed<\/dc:type><dc:format>\n        application\/pdf<\/dc:format><dc:identifier>\n        http:\/\/eprints.lancs.ac.uk\/20121\/1\/getPDF2.pdf<\/dc:identifier><dc:relation>\n        http:\/\/dx.doi.org\/10.1049\/ip-cds:20040557<\/dc:relation><dc:identifier>\n        Lechner, A. and Burbidge, Martin J. and Richardson, Andrew M. D. (2004) Flexible embedded test solution for high-speed analogue front-end architectures. IEE Proceedings - Circuits, Devices and Systems, 151 (4). pp. 359-369. ISSN 1350-2409<\/dc:identifier><dc:relation>\n        http:\/\/eprints.lancs.ac.uk\/20121\/<\/dc:relation><\/oai_dc:dc><\/metadata><\/record>","journals":null,"language":{"code":"en","id":9,"name":"English"},"relations":["http:\/\/dx.doi.org\/10.1049\/ip-cds:20040557","http:\/\/eprints.lancs.ac.uk\/20121\/"],"year":2004,"topics":["TA Engineering (General). Civil engineering (General)"],"subject":["Journal Article","NonPeerReviewed"],"fullText":"ANALOGUE AND MIXED-SIGNAL TEST FOR SYSTEMS ON CHIP\nFlexible embedded test solution for high-speed\nanalogue front-end architectures\nA. Lechner, M.J. Burbidge and A.M.D. Richardson\nAbstract: A flexible embedded test solution for high-speed analogue front-end subsystems is\npresented. A novel concept of a flexible test solution that addresses virtual component test\nrequirements in particular is introduced. The integration and application of the non-invasive digital\ntest solution is demonstrated for a representative design. Its area overhead is assessed for different\ndepths in on-chip test evaluation.\n1 Introduction\nFor complex system-on-chip (SoC) implementations, design\nreuse is of crucial importance towards achieving productiv-\nity and meeting time-to-market requirements. This is\nespecially the case for analogue and mixed-signal compo-\nnents, as the number of analogue designers is not increasing\nand neither is their productivity [1]. Due to limited design\nengineering resources, importing third-party designs is\nbecoming common practice for digital structures. Here,\nthe third-party design house provides what is referred to as\na virtual component to the system integrator. This is\nessentially a reusable design that is also commonly referred\nto as an IP (intellectual property) block, reflecting the fact\nthat the IP provider retains ownership of the design IP.\nHowever, virtual component insertion involves new chal-\nlenges, such as tool development for reuse driven block and\nsystem characterisation, design data management and\nflexible functional or physical hierarchy management [2].\nThe main challenge for the IP provider is the design of a\nrelatively process-independent circuit, where technology\nretargeting is relatively straightforward. At the same time,\nSoC integrators have to synchronise design schedules for\nboth analogue and digital system components, which\ndemands the integration of analogue and mixed-signal\nvirtual components. Testing is predicted to be the most\ndifficult aspect in mixed-signal design, especially for\nimported virtual components [3]. Testability of such virtual\ncomponents has to be seen as part of the specifications\nguaranteed and provided with the IP block. The integration\nof on-chip tester functions can provide more independence\nfrom external tester resources, which is of particular interest\nwhere the analogue virtual component is integrated into a\nmainly digital system. However, the employed test solution\nhas to be independent of surrounding SoC components to\nmaintain reusability, should be scalable to similar virtual\ncomponents of alternative specification and incorporate\nflexibility in test application and the extent of using on-chip\ntester functions. In other words, any test solution for a\nparticular circuit type has to be reusable in itself, where it\ncan be tailored to particular design specifications, and to\nbalance the tradeoff between implementation cost of tester\nfunctions and achieved benefits in test cost savings.\nThis paper presents such a flexible embedded test solution\nfor high-speed analogue front-end subsystems containing a\nprogrammable gain amplifier and an A\/D converter. This\ntype of architecture has been targeted as it is one of the\nmost widely used analogue and mixed-signal components\nembedded in mainly digital SoCs. In high-speed analogue\nfront-ends, production test challenges are mainly seen in the\nincreasing performance gap between the circuit-under-test\n(CUT) and the external tester [2]. This performance gap\nbecomes most evident in high-speed or high-resolution\ninterfaces, where either the speed of required data capture\nor the core test time is escalating.\n2 Review\nThe built-in self-test (BIST) for analogue and mixed-signal\ncomponents has been identified as one of the major\nrequirements for the deep submicron IC test [2, 4\u20136]. The\nmain advantage of BIST is to reduce test access require-\nments and to address the growing performance gap between\nthe CUT and tester by integrating tester functions on the\nCUT. In addition, parasitics induced from external\nautomatic test equipment (ATE) and the demands on\nATE can be reduced. Finally, analogue BIST is expected to\neventually enable the use of cheaper, digital-only testers that\nwill help with the integration of analogue virtual compo-\nnents, including BIST, for digital SoC applications [2]. It is\nexpected that the SoC integrator will be able to avoid the\nuse of expensive mixed-signal automatic test equipment.\nAlso, for multichip modules, on-chip test support hardware\nis essential to migrate the test of analogue circuitry to the\nwafer level. It is expected that the reuse of BIST structures\nwill significantly reduce the escalating test generation cost,\ntest time and the time-to-market for a range of devices. Full\nBIST has to include both test stimulus generation and\noutput response analysis circuitry; in the majority of cases,\npartial BIST approaches include output response analysis\nstructures implemented on-chip and rely on external test\nstimulus generation. As mentioned above, embedded test\nsolutions will provide an inherent flexibility in the use of on-\nchip and off-chip tester resources.\nRegarding the conventional A\/D converter test, device\nperformance can be verified in terms of static performance\nparameters, such as offset error, gain error, differential\nThe authors are with the Center for Microsystems Engineering-FAS, Lancaster\nUniversity, Lancaster LA1 4YR, UK\nr IEE, 2004\nIEE Proceedings online no. 20040557\ndoi:10.1049\/ip-cds:20040557\nPaper first received 6th November 2003 and in revised form 29th March 2004\nIEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004 359\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\nnonlinearity (DNL) and integral nonlinearity (INL),\nthrough assessment of the transfer function. Instead of\nstepping a DC voltage through the converter input range,\ncontinuous signals are employed in the static performance\nproduction test. Two A\/D converter test methodologies are\nwidely in use today which measure code transition levels,\nnamely feedback loop testing [7, 8] and histogram testing\n[9\u201314]. A\/D converter performance can also be verified in\nterms of dynamic performance parameters, such as signal-\nto-noise and distortion ratio (SINAD), total harmonic\ndistortion (THD), etc. Generally, the aim in dynamic\nperformance parameter testing is to identify the signal\ncomponents at the A\/D converter output, such as the\nconverted input signal, harmonics and random noise, and\nto compute performance parameters. For the majority of\nthese parameters and for determination of signal compo-\nnents, a transformation from time domain to frequency\ndomain is required and an FFT analysis is performed\n[11, 14]. However, in the sine wave fitting methodology [15,\n16] some dynamic performance parameters can also be\ndetermined in the time domain from an A\/D converter\nmodel generated to match a data record taken from a real\nconverter. These conventional A\/D converter test meth-\nodologies have been standardised in the \u2018IEEE Standard\n1241\u20132000 for terminology and test methods for analog-to-\ndigital converters\u2019 [17].\nRegarding a potential on-chip test solution for high-\nspeed converters, each test technique has a number of\nlimitations. Histogram testing, for example, does generally\nrequire a large amount of data to be stored and evaluated\non-chip while requiring a long test time. For feedback loop\nbased solutions, the oscillation around a single transition\nedge can be difficult to achieve due to feedback loop\ndynamics. Sine wave fitting will require some significant\narea overhead for the on-chip computation, as do FFT-\nbased solutions. However, BIST techniques have been\npublished for the majority of conventional A\/D converter\ntest methodologies.\nBIST techniques that allow performing an FFT analysis\non-chip [18, 19] rely on the availability of a DSP core. Some\nBIST approaches employ more defect-oriented measure-\nments avoiding the extraction of converter performance\nparameters [20, 21]. BIST techniques for static performance\nparameter evaluation have been published based on the\nfeedback loop methodology [22] and histogram testing\n[23, 24]. A BIST technique targeting high-resolution\nconverters is published in [25, 26], where a polynomial\nfitting algorithm is employed to the converter\u2019s ramp\nresponse to determine gain error, offset error, and second-\nand third-order harmonics.\n3 Test requirements of high-speed analogue\nfront-end architecture\nPreviously published work by the authors describes the\ninvestigation into realistic failure modes and determination\nof test requirements for the analogue front-end circuitry\n(Fig. 1). In-depth testability analyses using fault simulation\ntechniques have been performed on a representative\nanalogue front-end. Fault lists were generated using\ninductive fault analysis [27] and included shorts, opens,\nfloating gate transistors and gate oxide shorts. Parametric\nfaults have been considered in the form of offset and gain\ndeviations at internal operational amplifiers beyond the\nnormal process spread.\nFor this purpose a 32-gain-set automatic gain control\ncircuit containing adjustable gain amplifier, a reconfigurable\nhigh-pass filter and a level shifter has been studied. Further\ndetails and results are provided in [28]. To achieve good test\nquality, this part of the analogue front-end requires the\nassessment of gain step sizes and output voltage swing.\nConventionally, gain step sizes are tested based on FFT\nanalyses performed in all gain settings. An initial on-chip\ntest solution evaluating average analogue front-end output\nvalues for DC input signals in all gain sets is published in\n[29], which led to a reduction in test time by 70% without\ndegradation in test quality. The test solution can also be\nextended by reconfiguration-based test stimulus generation\ntechniques [30]. An additional testability analysis has been\nperformed on a 6-bit folding and interpolating A\/D\nconverter. Its failure modes and test requirements are\ndescribed in [31], where the severity of failure modes is\nanalysed in terms of static and dynamic performance\nparameters. This particular architecture was chosen, as it\nallows conclusions to be drawn on the test requirements of\nother high-speed architectures, such as full-flash, folding,\ninterpolating and subranging A\/D converters that may or\nmay not include internal offset compensating resistor\nladders at differential amplifier outputs [32]. The test\nrequirements for the analogue front-end can be summarised\nas follows:\nA static performance parameter test set achieves superior\ntest quality compared to a dynamic performance parameter\ntest set. This is mainly attributed to untested regions of the\nconverters transfer function in dynamic performance\nparameter testing (including overflow and underflow\ncomputation) and potential test escapes caused by code\nsparkles. The converter has to be tested for DNL, INL, gain\nerror and monotonicity. The automatic gain control circuit\nrequires testing of gain step sizes and its output voltage\nswing. The test methodology satisfying the requirements for\nthe flexible embedded test solution is described in the\nfollowing Section.\n4 Test methodology\nThe investigation into the front-end test requirements\nidentified potential test escapes for the adaptation of any\nBIST technique mentioned in Section 2. Additionally, most\nof these do not satisfy the virtual component test\nrequirements, which can be summarised as follows:\n\u0001 embedded test solution should be scalable for particular\nCUT specifications\n\u0001 test solution that incorporates a flexible degree of on-chip\ntester resources allows balancing the tradeoff between area\noverhead and expected test cost savings\n\u0001 adjustable depth of testing is desirable\n\u0001 test solution has to be independent from surrounding\ncomponents in the SoC\nanalogue front-end\nin\nref\nAG\nC\nAD\nC \nS   5 \nD\n6\ndigital control loop\nout\nFig. 1 Front-end architecture with automatic gain control block\nand A\/D converter\n360 IEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\n\u0001 any test solution has to be provided with some\nspecification of achieved test quality\nThe test methodologies generated in this work have been\nbased on the results of the failure mode and testability\nanalyses. They are described separately for both analogue\nfront-end components.\n4.1 Automatic gain control circuit\nGain step sizes can be calculated from the change in average\nanalogue front-end output value when the gain set is\nincremented while a constant DC voltage is applied to the\ninput. The test approach is illustrated in Fig. 2 (32 gain sets\nare assumed). The DC voltage to apply for gain step size\ntesting has to be determined in such a way that the\nautomatic gain control circuit output signal (AGC output)\nlies within the A\/D converter input signal swing for all gain\nsets. Offset and noise effects have to be accounted for at\neither end of the scale, as represented by VOS in Fig. 2.\nStarting at the lowest gain set (S\u00bc 0), a certain number of\nA\/D converter output codes has to be averaged over time\n(F0). When the gain set has been incremented and the next\naverage A\/D converter output (F1) is determined, the\ncorresponding gain step size can be calculated. The loop has\nto be continued until the last gain step size is calculated.\nThis test routine is tolerant to noise effects due to the\nmeasurement of average output values for constant input\nvoltages. The test is also tolerant to A\/D converter offset\neffects, as the assessment of gain step sizes relies on relative\n(not absolute) measurements. Offset effects at the automatic\ngain control input can be eliminated using calibration\ntechniques. For differential architectures, the measurement\ncan be conducted for a positive and a negative DC input of\nidentical absolute value. The difference in gain step sizes\ncomputed for the positive and negative DC voltages will be\nindependent of amplifier input offset effects. The test time\ndepends on the A\/D converter speed, the number of output\nsamples to average in each time slot ts and the number of\ngain sets to test.\nFor output voltage swing testing, a similar test routine\ncan be defined where the gain set is kept constant while a\nramp stimulus is applied. The test approach is illustrated in\nFig. 3, where the time slot averages are represented by Fi.\nThe ramp stimulus has to lead to an output response that\nextends beyond the A\/D converter input signal swing to\ntolerate offset and noise effects (represented in Fig. 3 by\nVOS). The output voltage swing can be determined by\naccumulating the differences in time slot averages (Dfi ).\nAlternatively, an approximated value can be obtained by\naccumulating the number of time slots where the output\naverage is of a certain minimum\/maximum difference\ncompared to the previous time slot\u2019s average. The test is\ntolerant to noise due to the measurement of converter\noutput averages. Offset effects can be tolerated when the\nramp stimulus is defined as described above. The circuitry\nrequired for on-chip output response analysis of both, gain\nstep size and output voltage swing test is introduced in\nSection 5.\n4.2 A\/D converter\nFor the A\/D converter test approach, two major principles\ncan be identified. First, to reduce test time and to avoid\nnon-coherent sampling, the code width and INL data are\ncomputed for a single ramp input stimulus. Secondly, to\nachieve minimum area overhead, a small test evaluation\nwindow surrounding the converter response must be\nadjusted concurrently during the test sequence instead of\npermanently computing code occurrences over the entire\nA\/D converter output range.\nThe principle of the test theme facilitating a small code\ncount window is illustrated in Fig. 4 for a 6-bit converter.\nThe aim is to count code occurrences in a small code region\nsurrounding the converter\u2019s response to a rising ramp\nstimulus. Code counts within a window surrounding an\nexpected value C (held in a 6-bit counter) are accumulated\nin a string of x-bit counters contained in a code count\naccumulator macro. Each counter in the string holds the\nnumber of occurrences for one particular code and\nincrements its content on code identification. Assuming a\nchain of five x-bit counters as illustrated, the expected\nconverter output value C is continuously updated to adjust\nthe code count window covered by the code count\naccumulator macro (C\u00022 to C+2). For example, circuitry\ncan be implemented within the window control macro to\ndetect a sequence of two consecutive converter outputs (D)\nlarger than C. When this event occurs and the correspond-\ning code count has been updated, the 6-bit counter holding\nC has to be incremented. Also, a load operation has to be\ninstructed on the chain of x-bit counters, which effectively\nshifts all five code counts towards the code count sequence\noutput. Each time such a load operation is executed, the\ncode count previously held in counter Cnt_E can be\nanalysed.\nThe corresponding flow chart is illustrated in Fig. 5.\nAfter test initialisation, a ramp stimulus extending beyond\nthe input signal swing is applied to the A\/D converter. The\ncode counting initiates when the first valid converter output\nis detected (either non-underflow or larger than all-zero\nwhere no underflow flag is available). The window control\nmacro\u2019s comparator (COMP, Fig. 4) enables one of the x-\nbit counters to increment the corresponding code count. If\ntime \nAGC\noutput \nADC\noutput \nAD\nC\nin\npu\nt s\nig\nna\nl s\nwi\nng\n \n000000 \n111111 \ntSk\ngain step\nsize GSSk \nFk-1 \nFk \nFi : average A\/D converter output for gain set Si \nVOS\n32*tS \nVOS\nS \n= \n0\nS \n= \n1\nS \n= \nk-\n1\nS \n= \nk\nS \n= \n31\n... ...\n...\n...\nF0 \nFig. 2 Gain step size test methodology\ntime \nAGC\noutput\nADC\noutput \nAD\nC \nin\npu\nt s\nig\nna\nl s\nwi\nng\n \n000000 \n111111\ntSk\n\u2206fk Fk-1\nFk \nFi : average A\/D converter output for each time slot tSi\nVOS\nVOS\nFig. 3 Output voltage swing test methodology\nIEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004 361\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\nthe value expected for the next code count needs to be\nupdated, the load operation and incrementing of C needs to\nbe executed. The completed code count can be analysed.\nThis loop continues until the end of the conversion range is\ndetected, either in the form of an overflow flag or the all-one\noutput (where no overflow computation is implemented).\nDuring the test, the window control macro sets a window\noverflow flag if the converter output D leaves the\ncode count window. The test can be aborted, as test\nfailure is computed. Reasons for window overflow can be\nfound in non-monotonic behaviour, code sparkles or\nexcessive INL.\nRegarding the design of an embedded window control\nmacro and code count accumulator macro, the embedded\ntest solution has some key specifications to adapt the test\nroutine to particular A\/D converters. Compared to Fig. 4,\nthe number of bits in the code counters, the number of code\ncounters in the code count accumulator macro and the\ncomplexity of the required comparator in the window\ncontrol macro do not only have a major influence on area\noverhead but also to enable tailoring of the structure to the\nconverter under test. The size of the code count window is\ndetermined by the number of counters in the code count\naccumulator macro. The size of the counters within that\nmacro limits the number of code occurrences that can be\naccumulated. The required size of the code count window is\nmainly influenced by the extend to which noise effects have\nto be tolerated at the converter output. Higher-resolution\nconverters, for example, may exhibit noise levels in excess of\n1LSB, which can require the code count window to cover\nmore than five codes. To maintain test accuracy, the input\nstimulus slope can be decreased to effectively increase the\nideal code counts and improve noise averaging. In such\ncases the window control macro needs to assess a running\naverage of the converter output to determine when the code\ncount window has to be adjusted. Obviously the test\nstimulus accuracy requirements will become more stringent.\nThe converter\u2019s DNL test threshold and the required\nmeasurement accuracy have a major impact on the size of\nthe code counters. Assuming a DNL test threshold of\n71LSB, a measurement resolution of 0.2LSB and an ideal\nramp stimulus, 4-bit counters have to be implemented to\ncompute code counts ranging from 0 to 15. The ramp\nstimulus has to lead to eight code counts in the ideal case.\nObviously these are also the key parameters that determine\nthe kernel test time for a single ramp test evaluation, as\ndiscussed in Section 6. If the test stimulus is generated on-\nchip using techniques described in [30] or can only be\napplied through the automatic gain control block, fault\nmasking can be avoided by evaluating A\/D converter tests\nin more than one gain set. However, for the devices studied\nin this work the potential for such fault masking is\nnegligible, not only due to process and defect statistics but\nalso due to the different failure modes exhibited by either\nblock.\nC  6 \nD \n6 \nA\/\nD \nco\nn\nve\nrte\nr \nCOMP\nD <C-2\nD =C-2\nD =C-1\nD =C\nD =C +1\nD =C +2\nD >C +2\nwindow control \nmacro\nx-bit counters with common clock but separate enable signals supplied  \nby the window control macro \nA load operation will be instructed on all x-bit counters when the value of\nC (expected output code) is incremented in the window control macro\ncode count accumulator macro \nco\nde\n c\nou\nnt\n s\neq\nue\nnc\ne\nCnt_A\nx-bit\n[0]\n[1]\n[:]\n[x-1]\n[0]\n[1]\n[:]\n[x-1]\n[0]\n[1]\n[:]\n[x-1]\n[0]\n[1]\n[:]\n[x-1]\n[0]\n[1]\n[:]\n[x-1]\n0 \n0 \n: \n0 \n6-bit\nCNT \nCnt_B\nx-bit \nCnt_C\nx-bit\nCnt_D \nx-bit\nCnt_E\nx-bit \nw\nin\ndo\nw \no\nve\nrfl\now\n \ntime\nA\/D converter\nramp response\nco\nn\nve\nrte\nr o\nut\npu\nt D\ncode count window\nsurrounding A\/D\nconverter output \n:\nFig. 4 A\/D converter test methodology\nINIT\nstart ramp\nclock A\/D converter \ny\nn\ny\nEND \nand analysis \nn\nn\nn\nclock A\/D \nconverter\nFAIL\nand analysis y\nincrement one counter in \nevaluation macro\ny\nload counters \nanalyse new code count\nincrement C\nunderflow ?\noverflow ?\nwindow \noverflow ?\nupdate C ?\nFig. 5 Flowchart of A\/D converter test methodology\n362 IEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\n5 Flexible embedded test solution\nThe integration of the test methodology into a flexible\nembedded test solution and its general application is\ndescribed in this Section, followed by some information\non the application to a particular analogue front-end.\n5.1 Application of test methodology and\nimplementation of flexibility\nThe flexible embedded test solution for high-speed analogue\nfront-end circuits needs to be scalable for particular front-\nend circuit specifications, such as the resolution of the A\/D\nconversion. To satisfy the requirements for testable\nanalogue virtual component design, the test solution also\nhas to provide some flexibility to balance the tradeoff\nbetween implementation cost and test cost savings. This\nSection presents the flexible embedded test solution at a\nfunctional level. The test solution\u2019s features for A\/D\nconverter testing are described first followed by the\nautomatic gain control testing capabilities.\nThe A\/D converter test approach has been introduced in\nthe previous Section. However, the test evaluation itself\nneeds to be defined in more detail. The strategy described in\nthis Section provides a high degree of flexibility in the\nimplementation and application of the embedded test\nsolution. The window control macro and the code count\naccumulator macro (Fig. 4) implement a code count\ncomputation on-chip. As known from conventional histo-\ngram testing, the code counts support the calculation of\nstatic performance parameters. Figure 6 provides an\nillustration of the embedded test solution\u2019s flexibility in\nimplementation and application.\nIn its most basic form, the A\/D converter test approach\ncan be realised on-chip as outlined above where code counts\nare computed within the on-chip code count accumulator\nmacro. When the code count window is updated and new\ncode count data is available, data can be captured for\nprocessing in off-chip tester resources to extract the\nparticular code\u2019s DNL and INL. Accumulation and\ncomputation of maxima in these values yield absolute\nDNL and INL which can be compared to test thresholds\nfor pass\/fail decisions. In situations where the extracted\nvalues fall onto the pass\/fail boundary, multiple ramp\nsections may be applied to the A\/D converter to accumulate\nconventional histogram data sets off-chip.\nAlternatively, the code count analysis can be implemen-\nted on-chip, in the form of a DNL and an INL accumulator\nmacro. This provides a test solution even more independent\nof external tester resources and avoids future problems\ncaused by the growing performance gap between ATE and\nCUT. The functionality within these macros can range from\nsimple DNL and INL extraction for each separate code\n(off-chip computation of absolute DNL\/INL, comparison\nto thresholds etc.) to an on-chip comparison of absolute\nDNL\/INL to test thresholds. Multiple ramp tests may be\napplied to the CUT in any particular implementation.\nFor gain step size and output voltage swing testing of an\nautomatic gain control circuit an optional dedicated DC\nmeasurement and gain step accumulator macro is included\n(Fig. 6). Generally speaking this macro allows the calcula-\ntion of the average A\/D converter output over a number of\nsamples by employing an integration process. Furthermore\nthe macro can include circuitry to compare two measured\naverages to each other, extract the difference and compare\nthat difference to test thresholds. These analysis steps are\nrequired for gain step size testing and the assessment of the\noutput voltage swing. The functionality is identical to the\ncircuitry presented in [29]. However, an implementation\nwith significantly lower area overhead has been designed. In\naddition to the macros mentioned so far, a clock generation\nand test control macro has to be added.\nThe execution of the A\/D converter test is illustrated for\nan ideal device in Fig. 7. The upper plot illustrates the\nconverter output D and the expected value C for a small\nramp stimulus section. In this example, the value for C is\nincremented when two consecutive A\/D converter output\nsamples are larger than its current value. The shaded area\nsurrounding both curves represents the code range covered\nanalogue front-end\nin\nref\nAG\nC\nAD\nC\nS   5 \nADC: A\/D converter\nAGC: automatic gain control circuit\nD \n6 \nDC measurement and  \ngain step accumulator macro\nwindow control macro\nDNL extraction INL extraction\nabsolute DNL\naccumulation\nabsolute INL\naccumulation\nDNL pass\/fail INL pass\/fail \nDNL accumulator \nmacro \nINL accumulator \nmacro\ngain set increment \nclock generation and test control macro\ntest\nthresholds\ntest\nthresholds\nDC averages\ngain step sizes\nGSST pass\/fail\nOVST pass\/fail\ncode count\nsequence\nDNLi and INLi\nDNL and INL\npass\/fail flag\non-chip circuitry\noptional on-chip circuitry\ncode count accumulator\noff-chip\nanalysis\ntransition level\nmeasurements\npass\/fail decision\nfailure analysis\nfault diagnosis\nDNLi and INLi\ncomputation \nDNL and INL\ncomputation \npass\/fail decision\nloop over\nmultiple cycles \nfailure diagnosis\nor \nfull histogram test\nGSST: gain step size test \nOVST: output voltage swing test\nDNLi: DNL for code i \nINLi: INL for code i\nFig. 6 Block diagram of flexible embedded test solution\nIEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004 363\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\nby the code count window. The A\/D converter clock Ca is\ndepicted below, as well as the clock signal Cc generated\nwithin the clock generation macro and supplied to the code\ncount accumulator macro. Note that two clock pulses occur\nwithin one A\/D converter clock period. While the first clock\npulse controls the code counting process, the second pulse is\nused to trigger the load operation in the code count\naccumulator macro. At the bottom of the diagram the code\ncounting and counter loading progress is illustrated for five\ncounters (Cnt_A to Cnt_E as in Fig. 4). Within each A\/D\nconverter clock period, one counter is incremented. In the\nillustrated ideal case this is mostly counter Cnt_C when the\nconverter output is of the expected value (D\u00bcC). A LOAD\nsignal becomes active when two consecutive converter\noutputs are larger than the expected value. As a result, code\ncounts are shifted towards the code count sequence output.\nThis data is available for code width, DNL and INL\ncomputation.\nThe implementation of the flexible embedded test\nsolution is described in the following Section using the\nmaximum degree of on-chip tester resources for DNL and\nINL accumulation, indication of missing bins and non-\nmonotonicity, gain step size testing and output voltage\nswing assessment.\n5.2 Implementation and application of the\ntest solution\nThe on-chip tester macros required for the evaluation of the\nanalogue front-end test set have been introduced above. A\nmore detailed block diagram is provided in Fig. 8. In this\nparticular case, the flexible embedded test solution has been\ndesigned for an analogue front-end containing a 32-gain-set\nautomatic gain control circuit and a 6-bit A\/D converter.\nDetails of the analogue front-end originally analysed in\n[28, 31] and the designed test solution are listed in Table 1.\nApart from the indication of window overflow discussed\nabove, the designed circuitry also indicates overflow in\nDNL and INL computation and allows test application for\nboth rising and falling ramp stimulus sections.\nThe flexible embedded test solution illustrated in Fig. 8\nhas been designed at gate level. Digital XSPICE models for\na standard CMOS process were used. A particular process\nwas selected to match the folding and interpolating A\/D\nconverter technology. Simulation results show that the\ndesigned embedded test solution has a maximum clock\nfrequency of 330MHz (identical to the maximum converter\nsampling frequency). Some simulation results are presented\nin the following Section.\nThe area overhead for the test solution with maximum\non-chip tester capabilities is equivalent to 1214 standard\nCMOS two-input NAND gates. The area overhead\ncontribution is identified for each test solution macro in\nFig. 9. Clock generation circuitry and macros to control the\ntest routines account for 32% (387 gates) of the maximum\narea overhead. If a minimum degree of on-chip tester\nhardware is selected that computes the code count sequence\nonly, the overall area overhead corresponds to 691 gates.\nThe on-chip extraction of DNL and INL data requires an\nadditional 314 gates. Circuitry for automatic gain control\ntests accounts for 17% of the maximum area overhead. Test\ntimes and simulation results are provided in the following\nSection.\n6 Simulation results\nTo test the automatic gain control block for gain step sizes,\na DC voltage is applied to the primary analogue front-end\ninput. Starting at the lowest gain set, the DC measurement\nand gain set accumulator macro integrates a defined\nnumber of A\/D converter output codes at maximum clock\nspeed. In the particular simulation illustrated in Fig. 10,\n6-bit converter outputs are integrated to form the 10-bit\naverage accumulated in latch A (Fig. 8). The 10-bit average\ntherefore provides a measurement resolution of 0.0625 LSB\nand dithering techniques can be employed to achieve this\nresolution. When a gain set\u2019s average has been computed,\nthe difference from the previous gain set\u2019s average output is\ncalculated in a 10-bit adder. The test signature GSno is\nincremented when the gain step size is of a certain minimum\nsize and the latest average is moved to latch B. The test is\ncompleted when all gain step sizes have been determined.\nThe test signature for good devices with 32 gain sets is\nprovided as a pass\/fail flag (GSpass). The plot for the\ncontent of latch A (LaA in Fig. 10) illustrates the\naccumulation of output averages for all 32 gain sets while\nlatch B (LaB in Fig. 10) provides the previous gain set\u2019s\naverage. In the ideal case, the test signature GSno is\nincremented with each gain set from 0 to 31.\n[binary]\n001001\n001000\n000111\n000110\n000101\n000100\n000011\neight samples\/ code D  > C\ntime\nD (A\/D converter output) \nC (expected value)\ncode count window\n(for five 4-bit counters)\nA\/D converter sample points\nCa : A\/D sample clock)\nCc : count and load clock\nLOAD : enable for counter load\n0  0  0  0  0  0  0  0 0  0  0 0 0 0 0 0 0 0 0 0 0  0  0 Cnt_A (D = C+2)  5-bit\n0 1  2  0  0  0  0  0 0 1  2  0  0  0  0 0 0 1  2  0  0  0 0 Cnt_B (D = C+1)  counter\n8  8  8 3  4  5  6  7 8  8  8 3  4  5  6  7 8  8  8  3 4  5  6 Cnt_C (D = C) content in\n8  8  8  8  8  8  8  8 8  8  8 8 8 8 8 8 8 8 8 8 8  8  8 Cnt_D (D = C-1) decimal\n8  8  8  8  8  8  8  8 8  8  8 8 8 8 8 8 8 8 8 8 8  8  8 Cnt_E (D = C+2)  notation\n 8 8 8 code count sequence \n(available for analysis)\ncode count \nfor 000011\ncode count\nfor 000100\ncode count \nfor 000101\nFig. 7 Code count window, clocking scheme and content of code count accumulator\n364 IEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\nCompared to the block diagram in Fig. 8, the DC\nmeasurement and gain set accumulator macro has been\ndesigned using only one 10-bit adder that is reconfigured for\naverage accumulation and gain step size calculation. With\nthe reconfiguration of the 10-bit adder, the test time can be\ndetermined as follows: 16 clock periods are required for\naverage accumulation and four additional clock periods\nhave to be spent on the calculation of the difference in\nDNLovf \nwindow control macro \nINL accumulator macro \nD<\n 0\n: 5\n>\nCa\nclock generation macro A \nEnadc : enable for A\/D converter test\nCa,Cb: ADC and inverted clock \nCc : code count accumulator clock \nCe,Co : evaluation, comparator clock \nLOAD : enable signal for loading \nRt : test reset signal \nWovf : window overfow flag\nCC_data : accumulated code counts \nCC_ideal : ideal code count \nDNL: absolute DNL (4-bit) \nDNLi : DNL of code i (4-bit) \nDNLovf : overflow in DNL\nINL: absolute INL (6-bit) \nINLi : INL of code i (6-bit) \nINLovf : overflow in INL \ndelay Cb\nCc\nCo\nCe\nLOAD\nCC\n_d\nat\na \ncode count accumulator macro \nCC\n_d\nat\na \nCC\n_id\nea\nl \n4bit\nCnt_A\nRt\nCc\nEN\nLOAD\nWovf\np0 P<Q \np1 P = Q-2 \np2 P = Q-1 \np3 P = Q \np4 P = Q+1 \np5 P = Q+2 \nP >Q \nq0 \nq1 \nq2 \nq3 \nq4 \nq5 \n6bit \nCOMPCo\nRt\nCc\n1bit\nDFF\ndelay (1\/4*TCa)\nRt\nCo\n1bit \nDFF\nd0 q0\nq0\nq1\nq2\nq3\nq4\nq5\nRt\nCc\nEN\n6bit\nCNT1\nd0 q0\nd1 q1\nd2 q2\nd3 q3\n4bit\nCnt_B\nRt\nCc\nEN\nLOAD\nd0 q0\nd1 q1\nd2 q2\nd3 q3\n4bit\nCnt_C\nRt\nCc\nEN\nLOAD\nd0 q0\nd1 q1\nd2 q2\nd3 q3\n4bit \nCnt_D\nRt\nCc\nEN\nLOAD\nd0 q0 \nd1 q1 \nd2 q2 \nd3 q3\n4bit \nCnt_E\nRt\nCc\nEN\nLOAD\nd0 q0\nd1 q1\nd2 q2\nd3 q3\ncode_C+2 code_C+1 code_C code_C-1 code_C-2\n1\nRt\nCe\nCin \n4bit\nADD\nDNLi\nDNL\n6bit\nADD\n6bit\nCOMP\n4bit\nCOMP\nC< 0:5>\n4bit\nDFF\nRt\nCe\n4bit \nDFF\nRt\nCe\nEN\nINLi\n6bit\nDFF\nRt\nCe\n6bit\nDFF\nRt\nCe\nEN\nINL \nINLovf\np0\np1\np2 |P|>|Q| \np3\nq0\nq1\nq2\nq3\np0 dovf\np1\np2\np3\nd0 \nq0 d1 \nq1 d2 \nq2 d3 \nq3\nd0 q0\nd1 q1\nd2 q2\nd3 q3\nd0 q0\nd1 q1\nd2 q2\nd3 q3\np0 s0\np1 s1\np2 s2\np3 s3\np4 s4\np5 s5\nq0\nq1\nq2\nq3\nq4\nq5 sovf\nd0 q0\nd1 q1\nd2 q2\nd2 q3\nd4 q4\nd5 q5\nd0 q0\nd1 q1\nd2 q2\nd3 q3\nd4 q4\nd5 q5\np0 |P|>|Q| \np1\np2\np3\np4\np5\nq0\nq1\nq2\nq3\nq4\nq5\nDNL accumulator macro \nd0 q0\nENadc\nLOAD\nDC measurement and gain set accumulator macro \nCla: clock identical to Ca (when enabled)\nClb: clock in ratio of 1:16 to Cla\nRla: reset to integrator latch \nC< 0:5>: A\/D converter output\nT< 0:9>: integral of C over 16 codes \nU< 0:9>: integral of previous 16 codes \nV< 0:9>: difference between integralsT and U\nGSno< 0:4>: number of passed gain step sizes\nGSpass:  pass flag for gain step size test D<\n 0\n:5\n>\n \n1Cin\n10bit \nADD\np0 s0\n: :\n: :\np9 s9\nsovf\nq0\n:\n:\nq9\nRla\nCla\n10bit \nDFF\nd0 q0\n: :\n: :\nd9 q9\nCin \n10bit\nADD\np0 d0 \n: : \n: : \np9 d9 \ndovf\nq0\n:\n:\nq9\nRt\nClb\n10bit\nDFF\nd0 q0\n: :\n: :\nd9 q9\n0\nS<\n 0:\n9>\nT< 0:9>\nU<\n 0:\n9>\n \nV<\n 0\n:9\n>\nCa\nENagc \nCla\nClb\nRla\n4bit\nCnt_B\nd0 q0\n: : \nd3 q3\nqovf\nRt\nCla \nde\nla\ny \nclock generation macro B \nRla \nCib\n5bit\nCNT\nd0 q0\nq4\nqovf\nG\nSn\no<\n 0:\n4>\n \nG\nSp\nas\ns \nlatchA\nlatchB\nFig. 8 Detailed block level diagram of flexible embedded test solution\nIEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004 365\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\naverages. Therefore, the gain step test time tGSST can be\ngiven as\ntGSST \u00bc GSfS \u0003 \u00f0NS \u00fe 4\u00de \u00f01\u00de\nwhere fS is the maximum A\/D conversion rate, GS is the\nnumber of gain sets andNS is the number of A\/D converter\noutputs to average for each gain set. For the representative\ndesign, with fS\u00bc 330MHz, GS\u00bc 32 and NS\u00bc 16, the test\ntime results to 1.94ms.\nIn output voltage swing tests, the DC measurement and\ngain step accumulator macro performs a similar algorithm\nwhile the gain set is kept constant and a ramp stimulus is\napplied to the primary input of the analogue front-end. The\ncomputed test signature GSno corresponds to the number\nof time slots with a verified minimum difference compared\nto the previous time slot\u2019s average. The output voltage\nswing test time tOVST can be given as:\ntOVST \u00bc TSfS \u0003 \u00f0NS \u00fe 4\u00de \u00f02\u00de\nwhere fS is the maximum A\/D conversion rate, TS is the\nnumber of time slots covered by the ramp response and NS\nis the number of A\/D converter outputs to average for each\ntime slot. For the representative design, with fS\u00bc 330MHz,\nTS\u00bc 32 and NS\u00bc 16, the test time results to 1.94ms.\nThe A\/D converter ramp test approach has been\nintroduced above. Simulation results for the representative\nanalogue front-end circuit are illustrated in Fig. 11, where\nthe upper graph shows the A\/D converter output D and its\nexpected value C. The ramp input stimulus is defined to\nextend into converter underflow and overflow and to lead\nto an ideal code count of eight for all 64 code bins. The\nshaded region surrounding the staircase waveform for C\nrepresents the code count window that allows computation\nof codes occurring in the range from C\u00022 to C+2. Each\ntime the expected valueC is incremented, the load operation\nis performed on all code counters and one code count value\nbecomes available for analysis. The bottom graph illustrates\nthe generated code count sequence available for DNL and\nINL computation at the output of the code count\naccumulator macro (CC_data in Fig. 8). When A\/D\nTable 1: Specifications for flexible embedded test solution\nParameter name Parameter Value Description and comments\nA\/D converter resolution N 6 number of bits\nSampling frequency fS 330MHz maximum A\/D converter frequency\nNumber of gain sets GS 32 number of gain sets in the automatic gain control circuit\nDNL test threshold DNL 70.5LSB as determined for representative design\nINL test threshold INL 71LSB as determined for representative design\nIdeal code count CC_ideal 8 ideal code width in number of samples for ramp stimulus used in\nA\/D converter test\nDNL measurement range \u00021LSB to 0.875LSB range before DNL overflow occurs\nINL measurement range \u00024LSB to 3.875LSB range before INL overflow occurs\nDNL\/INL resolution 70.2LSB accuracy of code count\/width computation\nMaximum noise level 1LSB maximum amplitude of acceptable noise effects\nwindow control \nand gain set\nmacros\n20%; 240\nclock generation and \ntest control macro \n12%; 147\ncode count \naccumulator macro\n25%; 304\nDNL accumulator \nmacro\n7%; \n88\nINL accumulator\nmacro \n19%; 226\nDC measurement and  \ngain set accumulator\nmacro \n17%; 209\nFig. 9 Area overhead (in two-input NAND gate equivalents)\ntime, \u00b5s\n0.0 0.5 1.0 1.5 2.0\nG\nSn\no \n[de\ncim\nal]\n31\n20\n0\nLa\nA \nLa\nB \n[bi\nna\nry]\n111100 0000\n101000 0000\n010100 0000\n000000 0000\nclock latches A and B\nlatch A holds difference in gain set integrals\nGSno\nGSpass\nLaA\nLaB\nG Spass\nPass flag\nLaB: content latch B\n(previous gain set\nintegral) \nLaA: content latch A\n(current gain set\nintegral and difference) \nGSNO\n(number of passed\ngain step sizes)\nFig. 10 Simulation of gain step size test\n366 IEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\nconverter overflow is detected and the test is completed, the\ncode counts for the three highest converter bins need to be\nshifted out of the code counter chain. The plot illustrates 64\ncode counts equal to eight.\nThe A\/D converter single ramp test time tSRT can be\ngiven as\ntSRT \u00bc \u00f02\nN \u00fe 2 \u0003 OS\u00de \u0003 CCideal\nfS\n\u00f03\u00de\nwhere fS is the maximumA\/D conversion rate,CCideal is the\nideal code count corresponding to 1 LSB, N is the\nresolution of the converter and OS is the extend of offset\nin LSB to tolerate (at either end of the ramp stimulus). For\nthe representative design, with fS \u00bc 330MHz, OS\u00bc 1LSB\nand CCideal \u00bc 8, the test time for a single ramp stimulus\nresults to 1.6ms.\nFailure mode detection capabilities have been assessed\nthrough simulation. Typical failure modes, some of which\nare discussed in [31], were modelled within the input stimuli\nto the ideal converter model. Figure 12 illustrates the code\ncount sequence, DNL and INL computation for a\nconverter suffering from nonlinearity in the centre of its\ninput range. Such failure modes affecting a region of output\ncodes can be exhibited by interpolating converters in\nparticular. Fault F27 is chosen here, as it is an example\nfor a more difficult to detect failure mode with DNL values\nwell within the tolerance window. The test evaluation\n(Fig. 12) allows clear identification of the fault-affected code\nregion in the centre of the input voltage swing, where code\nwidths decrease to a lowest count of five. The region of\ncodes with a small negative DNL leads to the computation\nof a detectable absolute INL of \u20131.75 LSB. This kind of\nfailure mode can be exhibited by other converter architec-\ntures employing compensation resistor ladders. However,\nwhere such structures are not included, similar underlying\nfaults will have a harder effect on the code width of one\nparticular code easily extracted as DNL failure.\nTable 2 provides a summary of test results obtained from\nthe application of the flexible embedded test solution to a\nselection of failure modes. The \u2018window overflow\u2019 column\nlists whether a fault leads to code count window overflow.\nWhere this is the case, the test will normally be aborted\nwithout further analysis of other test results. Similarly,\nnonlinearity overflow in DNL and\/or INL will result in test\nabortion. The three following columns list the measured\nvalues for absolute DNL and INL in LSB and indicate\nwhether a missing bin is detected. The last column states if\nthe particular failure mode passes the test.\nCatastrophic failure modes (Gr. 3) are all detected due to\noverflow in the code count window. Faults F210, F219 and\nF249 are examples for potential test escapes in conventional\ndynamic performance tests, as they cause failure in untested\nregions of the transfer function and difficult to detect code\ntime, \u00b5s\ntime, \u00b5s\n0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6\nC\nexpected value\n111100\n101000\n010100\n000000\nD\nA\/D converter \noutput\nD\nC\ncode count window\nranges from C -2 to C +2\n0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6\n[bi\nna\nry]\n[bi\nna\nry]\n1000\n0000\ncode count sequence captured at counter E on shift operation \ncode count shift operations three remaining code counts at end of test\nFig. 11 Simulation for ideal A\/D converter\n0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6\nCC\n [d\nec\nim\nal] 8\n4\n0\nDNLi INLi CC : code count sequence\ncode count sequence\ntime, \u00b5s\nINLi\nDNLi \nD\nN\nL\/\nIN\nL,\n L\nSB\n20\/8\n10\/8\n0\n\u221210\/8\n\u221220\/8\n\u221230\/8\nFig. 12 Code count sequence and signature analysis for fault F 27\nIEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004 367\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\nsparkles. Less severe failure modes, where no window\noverflow is caused (Gr. 2), are mostly detected by INL\nmeasurements evaluated on-chip. However, this is due to\nthe spreading of failure modes caused by interpolation and\nother compensation resistor ladders. In converter architec-\ntures that do not include such functions, the failure mode\nwill remain restricted to one or two adjacent bins leading to\nsignificantly higher DNL. Where the failure mode is even\nsofter (Gr. 1), fault detection depends on the test thresholds\napplied to the particular design. The absolute INL\ncomputed for faults F276 and F278, for example, is right\nat the boundary of the pass\/fail decision, while the DNL is\nslightly beyond the normal process spread. These faults are\ndetected for the representative design. In Table 2, however,\nthey have not been classified as generally detected. Gain\nerrors are generally detectable in INL measurements.\n7 Conclusions and future work\nA flexible embedded test solution for high-speed analogue\nfront-end circuits has been presented. The novel concept of\na flexible test solution that addresses virtual component test\nrequirements in particular has been discussed. The non-\ninvasive test solution has been designed for a representative\nanalogue front-end circuit. Its area overhead has been\nassessed for different depths in on-chip test evaluation.\nTest results are generated in the form of average A\/D\nconverter output for DC measurements and pass\/fail flags\nfor gain step size tests and output voltage swing tests.\nAdditionally, code count sequences for off-chip analysis,\nDNL and INL sequences and absolute values are provided\nas well as the gain error and flags for missing bins and non-\nmonotonic behaviour. The test solution can be used for\nsingle rising\/falling ramp A\/D converter test and for test\ndata compression in conventional full-histogram tests\n(supported by further off-chip data accumulation and\nanalysis). The test solution is generically applicable to\nanalogue front-end sub-systems and achieves largest benefit\nfor high-speed architectures.\nAs test signatures are extracted on-chip, the test solution\nprevents one of the major bottlenecks in analogue high-\nspeed circuit test, the performance gap between CUT and\nATE. The purely digital embedded test solution also has\nadvantages compared to conventional circuit testing,\nranging from the use of digital standard access structures\nto an automatic synthesis of on-chip tester functions.\nThe results of testability analyses performed on repre-\nsentative analogue front\u2013end components [28, 31] and the\ninterpretation of these for other high-speed architectures\n[32] provides evidence for superior test quality compared to\nconventional FFT-based testing. The kernel test time for the\nprogrammable gain block is reduced significantly while\nmore time-consuming data capturing is avoided in A\/D\nconverter testing.\nFuture work will address the incorporation of test\nstimulus generation techniques and assessment of accuracy\nrequirements. Further work is required for automatic\ngeneration and scaling of the test solution for particular\ndesigns, specifications, stimulus accuracy, test thresholds,\navailable silicon area and acceptable test time. Additionally,\nsimilar flexible embedded test solutions are required that\naddress high-resolution A\/D converter testing.\n8 Acknowledgments\nThis work has been supported by EPSRC through the\n\u2018ATOM\u2019 project (Analogue and Mixed Signal Integrated\nCircuit Test Support for High Quality, Low Cost\nManufacture) - EPSRC GR\/M7553, through EC Frame-\nwork 4 program \u2018ASTERIS\u2019 ref: ESPRIT 26354 and the\nEC Framework V program \u2018TAMES-2\u2019 IST-2001-34283.\n9 References\n1 Nandra, N.: \u2018Analogue synthesis for SoC\u2019, Electron. Syst. Softw.,\n2003, 1, (4), pp. 16\u201319\n2 Semiconductor Industry Association: \u2018International technology road-\nmap for semiconductors\u2019. 2001 edn., and 2002 update, 2002\n3 Nagi, N.: \u2018System-on-a-chip mixed-signal test: issues, current industry\npractices and future trends\u2019. Proc. Int. Mixed Signal Testing Work-\nshop, IMSTW99, Whistler, British Columbia, Canada, 15\u201318 June\n1999, pp. 201\u2013211\n4 Arnold, B.: \u2018Built-in self-test gains ground as ATE time and cost soar\u2019,\nElectron. Des., 2000, 48, (19), pp. 117\u2013124\n5 Sunter, S.: \u2018Mini tutorial: mixed signal test\u2019. Presented at 7th IEEE Int.\nMixed-Signal TestingWorkshop, IMSTW01, Atlanta, GA, USA, 13\u2013\n15 June 2001\n6 Sunter, S.: \u2018Tutorial: Mixed-signal BIST - does industry need it?\u2019.\nPresented at 3rd IEEE Int. Mixed Signal Testing Workshop,\nIMSTW97, Seattle, Washington, USA, 3\u20136 June 1997\n7 Corcoran, J.J., Hornak, T., and Skov, P.B.: \u2018A high resolution error\nplotter for analog-to-digital converters\u2019, IEEE Trans. Instrum. Meas.,\n1975, IM-24, (4), pp. 370\u2013374\n8 Max, S.: \u2018Optimum measurement ADC transitions using a feedback\nloop\u2019. Proc. 16th IEEE Conf. on Instrumentation and Measurement\nTechnology, Venice, Italy, 24\u201326 May 1999, pp. 1415\u20131420\n9 Pretzl, G.: \u2018Dynamic testing of high speed aid converters\u2019, IEEE J.\nSolid-State Circuits, 1978, 13, pp. 368\u2013371\n10 Doernberg, J., Lee, H.S., and Hodges, D.A.: \u2018Full-speed testing of A\/\nD converters\u2019, IEEE J. Solid-State Circuits, 1984, 19, (6), pp. 820\u2013827\nTable 2: Test results for a selection of representative failure modes\nFaults Window overflow Nonlinearity overflow DNL [LSB] INL [LSB] Missing bin Pass test\nFault free 0 0 0 0 0 yes\nGr. 1 F27 0 0 \u00020.375 \u00021.75 0 no\nF276 0 0 \u00020.75 \u00021 0 yes\/no\nF278 0 0 \u00020.625 \u00021.125 0 yes\/no\nGr. 2 F77 0 0 0.875 3.25 0 no\nF78 0 0 0.875 \u00022.875 0 no\nF356 0 DNL\/INL \u00020.875 \u00021.125 1 no\nGr. 3 F21 1 INL \u00020.875 +3.5 0 no\nF112 1 DNL\/INL 0 0 0 no\nF210 1 0 0 0 0 no\nF219 1 0 0 0 0 no\nF249 1 INL 0 0 1 no\n368 IEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\n11 Mahoney, M.: \u2018DSP-based testing of analog and mixed-signal circuits\u2019\n(IEEE Computer Society, USA, 1987)\n12 Blair, J.: \u2018Histogram measurement of ADC nonlinearities using sine\nwaves\u2019, IEEE Trans. Instrum. Meas., 1994, 43, (3), pp. 373\u2013383\n13 Max, S.: \u2018Testing high speed high accuracy analog to digital converters\nembedded in systems on a chip\u2019. Proc. IEEE Int. Test Conf., Atlantic\nCity, NJ, USA, 28\u201330 Sept. 1999, pp. 763\u2013771\n14 Burns, M., and Roberts, G.W.: \u2018An introduction to mixed-signal IC\ntest and measurement\u2019 (Oxford University Press, UK, 2001)\n15 Peetz, B.E.: \u2018Dynamic testing of waveform recorders\u2019, IEEE Trans.\nInstrum. Meas., 1983, 32, (1), pp. 12\u201317\n16 Linnenbrink, T.: \u2018Effective bits: is that all there is?\u2019, IEEE Trans.\nInstrum. Meas., 1984, IM-33, (3), pp. 184\u2013187\n17 IEEE Standard 1241-2000: \u2018IEEE standard for terminology and test\nmethods for analog-to-digital converters\u2019. Institute of Electrical and\nElectronics Engineers Inc., 2000\n18 Toner, M.F., and Roberts, G.W.: \u2018A frequency response, harmonic\ndistortion test for BIST of a sigma-delta ADC\u2019, IEEE Trans. Circuits\nSyst. II, Analog Digit. Signal Process., 1996, 43, (8), pp. 608\u2013613\n19 Teraoka, E., Kengaku, T., Yasui, I., Ishikawa, K., Matsuo, T., and\nWakada, H.: \u2018Built-in self-test for ADC and DAC in a single-chip\nspeech CODEC\u2019, IEICE Trans. Fundam. Electron. Commun. Comput.\nSci., 1997, e80a, (2), pp. 339\u2013345\n20 Mir, S., Lubaszewski, M., and Courtois, B.: \u2018Unified built-in self-test\nfor fully differential analog circuits\u2019, J. Electron. Test., Theory Appl.,\n1996, 9, (1\u20132), pp. 135\u2013151\n21 Mir, S., Rueda, A., Huertas, J.L., and Liberali, V.: \u2018A BIST technique\nfor sigma-delta modulators based on circuit reconfiguration\u2019. Proc. 3rd\nIEEE Int. Mixed Signal Testing Workshop, IMSTW97, Seattle, WA,\nUSA, 3\u20136 June 1997, pp. 179\u2013184\n22 Arabi, K., and Kaminska, B.: \u2018Oscillation built-in self test (OBIST)\nscheme for functional and structural testing of analog and mixed-\nsignal circuits\u2019. Proc. IEEE Int. Test Conf., ITC97, Washington, DC,\nUSA, 3\u20135 Nov. 1997, pp. 786\u2013795\n23 Frisch, A., and Almy, T.: \u2018HABIST: histogram-based analog built in\nself test\u2019. Proc. IEEE Int. Test Conf. ITC97, Washington, DC, USA,\n3\u20135 Nov. 1997, pp. 760\u2013767\n24 Aza.\u0131s, F., Bernard, S., Bertrand, Y., and Renovell, M.: \u2018Implementa-\ntion of a linear histogram BIST for ADCs\u2019. Proc. Design, Automation\nand Test in Europe, DATE01, Munich, Germany, 13\u201316 March\n2001, pp. 590\u2013595\n25 Sunter, S.K., and Nagi, N.: \u2018A simplified polynomial-fitting algorithm\nfor DAC and ADC BIST\u2019. Proc. IEEE Int. Test Conf., ITC97,\nWashington, DC, USA, 3\u20135 Nov. 1997, pp. 389\u2013395\n26 Roy, A., Sunter, S., Fudoli, A., and Appello, D.: \u2018High accuracy\nstimulus generation for A\/D converter BIST\u2019. Proc. IEEE Int. Test\nConf., ITC02, Baltimore, MD, USA, 8\u201310 Oct. 2002, pp. 1031\u20131039\n27 Sachdev, M., and Atzema, B.: \u2018Industrial relevance of analog IFA: a\nfact or a fiction\u2019. Proc. IEEE Int. Test Conf., ITC95, Washington,\nDC, USA, 21\u201325 Oct. 1995, pp. 61\u201370\n28 Lechner, A., Richardson, A., Hermes, B., and Ohletz, M.: \u2018A design\nfor testability study on a high performance automatic gain control\ncircuit\u2019. Proc. 16th IEEE VLSI Test Symp., VTS98, Monterey, CA,\nUSA, 26\u201330 April 1998, pp. 376\u2013385\n29 Lechner, A., Ferguson, J., Richardson, A., and Hermes, B.: \u2018A digital\npartial built-in self-test for a high performance automatic gain control\ncircuit\u2019. Proc. Design, Automation and Test in Europe, DATE99,\nMunich, Germany, 9\u201312 March 1999, pp. 232\u2013238\n30 Lechner, A., Richardson, A., and Hermes, B.: \u2018Reconfiguration-based\nbuilt-in self-test for analogue front-end circuits\u2019. Proc. 5th IEEE Int.\nMixed Signal Testing Workshop, IMSTW99, Whistler, Canada, 15\u2013\n18 June 1999, pp. 243\u2013247\n31 Lechner, A., Richardson, A., and Hermes, B.: \u2018Short circuit faults in\nstate-of-the-art ADCs - are they hard or soft\u2019. Proc. 10th Asian Test\nConf., ATS01, Kyoto, Japan, 19\u201321 Nov. 2001, pp. 417\u2013422\n32 Lechner, A.: \u2018Flexible embedded test solution for high-speed analogue\nfront end circuits\u2019. PhD dissertation, Lancaster University, Lancaster,\nUK, Aug 2003\nIEE Proc.-Circuits Devices Syst., Vol. 151, No. 4, August 2004 369\nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 10, 2008 at 11:48 from IEEE Xplore.  Restrictions apply.\n"}