{"doi":"10.1109\/ETW.2002.1029645","coreId":"69896","oai":"oai:eprints.lancs.ac.uk:20214","identifiers":["oai:eprints.lancs.ac.uk:20214","10.1109\/ETW.2002.1029645"],"title":"Investigations for minimum invasion digital only built in \u2018ramp\u2019 based test techniques for charge pump PLLs.","authors":["Burbidge, Martin J.","Tijou, Jim","Poullet, Frederic","Richardson, Andrew M. D."],"enrichments":{"references":[],"documentType":{"type":1}},"contributors":[],"datePublished":"2002","abstract":"Due to a number of desirable operational and design characteristics, CP-PLL's (Charge Pump Phase Locked Loops) have, in recent years become a pervasive PLL architecture. CP-PLL architectures are exploited for a variety of applications such as on chip clock generation, CRC (clock recovery circuits) and radio frequency synthesis applications. This paper describes a simple, digital only, minimally invasive and fully automated test approach for high performance CP-PLL's that can be used to provide more information about the CP-PLL function beyond that obtained through the commonly used FLT (Frequency Lock Test). The test strategy described here allows the estimation of forward path gain and relative leakage in the forward path loop components. Applications of the test are focussed towards digital only testing of fully embedded CP-PLL's, however further test modifications could yield marked test time improvements for embedded and board level CP-PLL's incorporating multiple CP currents and or multiple loop filter configurations","downloadUrl":"https:\/\/core.ac.uk\/download\/pdf\/69896.pdf","fullTextIdentifier":"http:\/\/eprints.lancs.ac.uk\/20214\/1\/getPDF3.pdf","pdfHashValue":"194d02d0df0b9716fde18b8182e88f8138328489","publisher":"IEEE","rawRecordXml":"<record><header><identifier>\n    \n    \n      oai:eprints.lancs.ac.uk:20214<\/identifier><datestamp>\n      2018-01-24T01:57:21Z<\/datestamp><setSpec>\n      7374617475733D707562<\/setSpec><setSpec>\n      7375626A656374733D54:5441<\/setSpec><setSpec>\n      74797065733D626F6F6B5F73656374696F6E<\/setSpec><\/header><metadata><oai_dc:dc xmlns:oai_dc=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/\" xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/ http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc.xsd\" ><dc:title>\n    \n      \n        Investigations for minimum invasion digital only built in \u2018ramp\u2019 based test techniques for charge pump PLLs.<\/dc:title><dc:creator>\n        Burbidge, Martin J.<\/dc:creator><dc:creator>\n        Tijou, Jim<\/dc:creator><dc:creator>\n        Poullet, Frederic<\/dc:creator><dc:creator>\n        Richardson, Andrew M. D.<\/dc:creator><dc:subject>\n        TA Engineering (General). Civil engineering (General)<\/dc:subject><dc:description>\n        Due to a number of desirable operational and design characteristics, CP-PLL's (Charge Pump Phase Locked Loops) have, in recent years become a pervasive PLL architecture. CP-PLL architectures are exploited for a variety of applications such as on chip clock generation, CRC (clock recovery circuits) and radio frequency synthesis applications. This paper describes a simple, digital only, minimally invasive and fully automated test approach for high performance CP-PLL's that can be used to provide more information about the CP-PLL function beyond that obtained through the commonly used FLT (Frequency Lock Test). The test strategy described here allows the estimation of forward path gain and relative leakage in the forward path loop components. Applications of the test are focussed towards digital only testing of fully embedded CP-PLL's, however further test modifications could yield marked test time improvements for embedded and board level CP-PLL's incorporating multiple CP currents and or multiple loop filter configurations.<\/dc:description><dc:publisher>\n        IEEE<\/dc:publisher><dc:date>\n        2002<\/dc:date><dc:type>\n        Contribution in Book\/Report\/Proceedings<\/dc:type><dc:type>\n        NonPeerReviewed<\/dc:type><dc:format>\n        application\/pdf<\/dc:format><dc:identifier>\n        http:\/\/eprints.lancs.ac.uk\/20214\/1\/getPDF3.pdf<\/dc:identifier><dc:relation>\n        http:\/\/dx.doi.org\/10.1109\/ETW.2002.1029645<\/dc:relation><dc:identifier>\n        Burbidge, Martin J. and Tijou, Jim and Poullet, Frederic and Richardson, Andrew M. D. (2002) Investigations for minimum invasion digital only built in \u2018ramp\u2019 based test techniques for charge pump PLLs. In: Proceedings of the Seventh IEEE European Test Workshop, 2002. IEEE, pp. 95-102. ISBN 0-7695-1715-3<\/dc:identifier><dc:relation>\n        http:\/\/eprints.lancs.ac.uk\/20214\/<\/dc:relation><\/oai_dc:dc><\/metadata><\/record>","journals":null,"language":{"code":"en","id":9,"name":"English"},"relations":["http:\/\/dx.doi.org\/10.1109\/ETW.2002.1029645","http:\/\/eprints.lancs.ac.uk\/20214\/"],"year":2002,"topics":["TA Engineering (General). Civil engineering (General)"],"subject":["Contribution in Book\/Report\/Proceedings","NonPeerReviewed"],"fullText":"Investigations for Minimum Invasion Digital Only Built-In \u201cRamp\u201d Based Test \nTechniques for Charge Pump PLL\u2019s \nMartin John Burbidge1, Frederic Poullet2, Jim Tijou3, Andrew Richardson1 \n1\n Lancaster University UK, 2 Dolphin Integration, Grenoble FR, 3 Philips Semiconductors, \nSouthampton UK.  \nemail: m.burbidge@lancaster.ac.uk \n \n \nAbstract \n Due to a number of desirable operational and design \ncharacteristics, CP-PLL\u2019s (Charge Pump Phase locked \nloops) have, in recent years become a pervasive PLL \narchitecture. CP-PLL architectures are exploited for a \nvariety of applications such as on chip clock generation, \nCRC (clock recovery circuits) and Radio frequency \nsynthesis applications. This paper describes a simple, \ndigital only, minimally invasive and fully automated test \napproach for high performance CP-PLL\u2019s that can be \nused to provide more information about the CP-PLL \nfunction beyond that obtained through the commonly \nused FLT (Frequency Lock Test). The test strategy \ndescribed here allows the estimation of forward path (FP) \ngain and relative leakage in the forward path loop \ncomponents.  Applications of the test are focussed \ntowards digital only testing of fully embedded CP-PLL\u2019s, \nhowever further test modifications could yield marked \ntest time improvements for embedded and board level \nCP-PLL\u2019s incorporating multiple CP currents and or \nmultiple loop filter (LF) configurations.  \nKeywords: Phase locked loop, Charge pump, Phase \nfrequency detector, Voltage controlled oscillator, BIST, \nDft, Test, Jitter. \n \n1. Introduction \nIn recent years the CP-PLL has become a commonly \nused M\/S (Mixed Signal) building block. A popular \napplication for the CP-PLL is for on chip clock \nregeneration. All other on chip functions will be reliant on \nthe PLL function, thus it is essential that it is verified \ncorrectly.  Unfortunately, problems relating to test time, \nand test access, can lead to the PLL being insufficiently \ntested. Often only a simple FLT is implemented on the \nPLL. Although the FLT will uncover many internal hard \nfaults, [1][2] it does not generally provide sufficient \ninformation relating to short-term transient characteristics \n(instability and jitter effects). Parameters, such as CP \nmismatch, CP leakage, CP non-linearity, LF (loop filter) \nleakage, voltage controlled oscillator (VCO) non-linearity \nand static phase offset can have a significant impact on \nPLL performance. In consequence there has been recent \ninterest in methods that can provide enhanced PLL test \nsupport.  \nInitial focus for the test strategy described in this \npaper is towards fully embedded CP-PLL\u2019s. These types \nof PLL\u2019s are generally used for on chip clock synthesis, \nand in many situations comprise the only analogue \ncircuitry on a large digital SOC (System on Chip). In \nconsequence of this fact a significant motivating factor is \ntowards tests that can be facilitated using a digital only \ntester. Furthermore, it must be emphasized that for PLL\u2019s \nincorporating embedded loop filter components, the \nphysical capacitance of the main LF capacitor is relatively \nsmall (in the order of 100pF) when compared to external \ncomponents, also considering that the LF node is a critical \ncontrolling node of the PLL, screening of this node is \nusually required.  Thus in direct consequence, another test \nmotivation is to facilitate tests without access to the LF \nnodes.  \nIt must be noted that although the main focus of this \npaper is towards the test of fully embedded CP- PLL\u2019s, \nmany of the suggestions are directly applicable to the test \nof  \u201cChipset\u201d PLL\u2019s that have external LF components.  \nPLL\u2019s utilising external LF components are widely used \nin cellular RF (Radio Frequency) applications, however, \nin the trend towards miniaturization it is likely that many \nof the current chipset applications will become fully \nembedded.  In either case the volume of communications \napplications is great and in consequence, any test methods \nthat have the potential of reducing test time or allow \nreliable fast screening of defective components are to be \npreferred.  \n  Further explanations and motivations towards BIST \nsolutions, such as reduced pin count and better integration \ninto a higher level test plan are provided in [3].  \nValuable information concerning the characteristics \nmentioned in the previous sections can be generated by \napplying stimulus to the PLL FP whilst the PLL is \noperated in an open loop (OL) configuration.  Using \nProceedings of the Seventh IEEE European Test Workshop (ETW\u201902) \n1530-1877\/02 $17.00 \u00a9 2002 IEEE \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 18, 2008 at 10:20 from IEEE Xplore.  Restrictions apply.\nselected sequences allows extraction of information \nappertaining to FP gain, FP non-linearity, and leakage and \nmismatch in critical FP blocks. It will be explained in \nlater sections of this paper, that any of these errors can \nlead to close in phase noise (or jitter) on the PLL\u2019s output. \nAny direct measurement of jitter at the PLL output will \ninclude jitter due to the aforementioned errors as well as \njitter due to oscillator noise. Although the test approach \nmentioned in this paper does not cover direct \nmeasurement of jitter, this does not mean that the problem \nis disregarded. It is recognised that certain non-idealities \nwill produce output jitter. However, it is also noticed that \nPLL jitter is not the only parameter of importance relating \nto PLL evaluation. Other parameters include the FP gain \nestimates and estimates of settling time (from the FLT) \nare equally important. In many communications \napplications settling time and linearity of the FP \ncomponents will be particularly important.  As the FP \ngain measurements are relatively simple to make when \ncompared to jitter measurements, and will uncover some \nchief jitter contributors it is sensible to carry out these \ntests prior to any more elaborate jitter measurements, \nthereby facilitating \u201cfast binning\u201d of defective \ncomponents. Suitable references concerning non-idealities   \nand their relationship to phase noise are provided in \nsection 3. For completeness, concerning on-chip jitter \nmeasurement techniques, various direct methods have \nbeen suggested [4][5][6] but all require a clean reference \nclock for sampling purposes, this clock may not be \navailable for all applications.  In addition, [7][8] give \nmethods of jitter extraction without an external reference \nclock. \n \nIn recent years various solutions for PLL BIST (Built In \nSelf Test) have been presented [4][9]. All of the BIST \ntechniques use a common method of measuring the VCO \noutput frequency to give an indication of the test output \nresponse. The test method proposed in this paper uses the \nsame approach for response evaluation, however, the \nmethod of stimulus injection is innovative, requiring only \nthe insertion of one T flip-flop into the PLL input path \nwhilst the PLL is in test mode. Furthermore, response \nmonitoring is based upon measurement of relative and \nabsolute FP component leakage rates during a \u201chold \nmode\u201d. Although the \u201chold mode\u201d is carried out in an \nopen loop configuration, application of identical signals \nto the PLL inputs emulates an ideal locked condition. \nNote that this condition will only be true for the most \ncommonly used PFD (Phase and frequency detectors). \nThe technique allows measurement of leakage \/ mismatch \neffects that would normally not be observable whilst the \nPLL is in a closed loop configuration. Measurement of \nleakage and mismatches in this way has not been \nmentioned previously. Principles of this test approach are \nprovided in sections 2 and 3. Note that the flip-flop and \nsignal redirection circuitry are switched out of the critical \nsignal paths when the PLL is in mission mode. In \naddition, techniques to allow relative measurements of \nmultiple loop settings are provided in section 4. These \ntechniques are to the author\u2019s knowledge entirely new.  \nA summary of the paper including further and ongoing \nwork is provided in section 5. \n2. Basic PLL architecture and operational \ndescription. \n \nZ f(s) \nP LL R E F  \n+ ICH \nV C O  \nF out\n =  K V C O\u2022  V C \nK vco\/s \nP FD  \nK P D  \n \nU P  \nD N  \nV C \nfO SC=N \u2022P L LR E F \nP LLFB  \n\u00f7N\n \n \n-ICH  \nN o te  Idea lly + IC H=-IC H  \n \nFigure 1 Basic PLL architecture \nKPD = Phase detector gain = Ich\/2\u03c0  (A  r-1) \nZf(s) = Loop filter transfer function \nKvco = VCO gain         (r s-1 v-1)  \nIn figure 1 PLLREF and PLLFB are pulse streams. \nThe phase frequency detector is an edge sensitive device \nthat closes UP or DN for a time proportional to the time \ndifference between the PLLREF and PLLFB edges. This \naction charges  (or discharges) the LF (Zf), thus VC \nincreases (or decreases), and fosc increases or (or \ndecreases). \n In normal operation, connection of the blocks as \nshown, allows generation of an output signal that is phase \naligned to the input signal. Further information on CP-\nPLL operation can be found in [10][11][12]. \nTo further illustrate the operation of the PFD, LF and \nCP combination, the waveforms for PLLREF = PLLFB \/ \n2, with the PLL in an open loop configuration, are \nillustrated in Fig. 2.  This basic operation can be exploited \nto facilitate testing of the forward path blocks of the PLL.   \nProceedings of the Seventh IEEE European Test Workshop (ETW\u201902) \n1530-1877\/02 $17.00 \u00a9 2002 IEEE \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 18, 2008 at 10:20 from IEEE Xplore.  Restrictions apply.\n EXTREF \nDIV2 \n-Ich \nPLLFB \nPLLREF \nVc and Fout \n\u2206t \n \nFigure 2 Wave forms for PLLREF = PLLFB\/2 \n(Note: Extref is the external clock reference to the PLL \nand DIV2 is the divided output derived from EXTREF. \nAlso the bottom graph indicates that Vc changes in \nproportion to the input stimuli and that the frequency \noutput of the PLL (Fout) will change in proportion to Vc ) \nIt is important to note that in figure 2 if the signals on \nPLLFB and PLLREF are swapped Vc(Fout) will increase. \n3. Ramp generator circuitry and vector \napplication.  \nWhen considering generic digital only test of \nembedded CP-PLLs the following main constraints were \nidentified. \n\u2022 No access to critical analogue PLL nodes, e.g. the \nloop filter node. \n\u2022 The test must be fully autonomous. \n\u2022 Outputs must be in a digital only format. \n\u2022 Hardware overhead should be small enough to allow \nthe circuitry to be included as part of the PLL core. \nFurther identification of critical nodes and generic test \nmethodologies are given in [9]. With this in mind the \nunderlying principles of the test are given below. \nIt must be noted that the term \u201cRamp\u201d in the context of \nthis paper does indicate that the test input stimuli is a \nramp, but indicates that the output response of the PLL, is \nin the form of a ramp (cf. figure 2) \n3.1. Forward path transfer equations for open \nloop CP-PLL. \n Figure 3, illustrates a commonly used configuration \nfor Zf(s): \n \n \nVc \n+-Ich \nCp \nRp \n \n \n \nFigure 3 Typical loop filter configuration. \nFor a positive input current (Ich) the continuous time \ndomain response for this network is: \n\uf8f7\uf8f7\uf8f8\n\uf8f6\uf8ec\uf8ec\uf8ed\n\uf8eb\n+\u22c5+= Rp\nCp\ntIchVstarttVc )(                 (1) \n(Where t represents the time the input current is applied \nfor, and Vstart is the initial value of Vc.) \nEquation (1) is valid for a constant current, however when \nconsidering the waveforms of figure 2 we note that the \napplied drive current is essentially zero for a portion of \nthe cycle, hence the voltage drop across Rp is removed \nand only Vc remains. Thus (1) is modified as. \nRpIchRp\nCp\ntIchVstarttVc N \u22c5\u2212\uf8f7\uf8f7\uf8f8\n\uf8f6\n\uf8ec\uf8ec\uf8ed\n\uf8eb\n+\u22c5+=)(       (2) \nand (2) can be rearranged to yield \n\uf8f7\uf8f7\uf8f8\n\uf8f6\n\uf8ec\uf8ec\uf8ed\n\uf8eb\n\u22c5+=\np\nn\nC\ntIchVstarttVc )(   (V)    (3) \n(Where tN represents the total accumulated time of the \ncurrent pulses.) \nThe above equations are valid for a linear CP structure. \nFrom (1), (2) and figure 2 it can be seen that forcing a \ntime delay between the edges of PLLFB and PLLREF \nwhilst the PLL is in an OL configuration will allow the \nCP and LF components of the PLL to be exercised. This \ntechnique can be used to allow direct mesurment of the \nforward path PLL blocks (FP gain estimation). \n \nFrom [11] the Laplace domain open loop transfer \nfunction of figure 1 is \ns\nKvco\nCps\nRpKPDsHo \u22c5\uf8f7\uf8f7\uf8f8\n\uf8f6\n\uf8ec\uf8ec\uf8ed\n\uf8eb\n\u22c5\n+\u22c5=\n1)(               (4) \nTaking the inverse transform of (4) and modifying as in 2 \nyields. \n \n\u03c02\n)( KvcoRpIchRp\nCp\ntNIchtho \u22c5\uf8fa\uf8fa\uf8fb\n\uf8f9\n\uf8ef\uf8ef\uf8f0\n\uf8ee\n\u22c5\u2212\n\uf8fe\uf8fd\n\uf8fc\n\uf8f3\uf8f2\n\uf8f1\n+\u22c5= ,  (Hz)     (5) \nUsing (5) it is possible to obtain a measure of the FP PLL \ngain in terms of frequency change at the PLL output with \nrespect to a time delay applied at the input.  \nProceedings of the Seventh IEEE European Test Workshop (ETW\u201902) \n1530-1877\/02 $17.00 \u00a9 2002 IEEE \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 18, 2008 at 10:20 from IEEE Xplore.  Restrictions apply.\n3.2.  Test architecture. \nThe basic test architecture is illustrated below. \n \nPLLFB \nPLLREF \nEXTREF \nDivide by \n2 \nForward Path \nPLL Blocks \n \nDivide by N \n \nA \nB \nC \nD \nE \nExisting PLL Core \nVCOOUT \nFrequency \ncounter \n \nTest sequencing \nand control \n \nInput MUX \nMatched \nDelay \n \nFigure 4 Basic test architecture \nIn figure 4 the connection arrows indicated in the Input \nMUX block show the PLL connected in normal \noperational mode. The most important part of the Input \nMUX design is ensuring that delays are matched for the \nsignal paths in operational mode and test mode. For \nexample, in figure 4 the matched delay block \ncompensates for the delay of the divide by two block. \nCareful matching of the delays will help to mitigate any \nconstant offset errors that will affect measurement \naccuracy, and most importantly will ensure that test \ncircuitry does not adversely effect the PLL operation. A \nsimplified diagram of the input MUX is shown below. \nThe dashed lines indicate the signal flow when the PLL is \nconfigured in a normal operational mode. \n \n \n \n0 \n1 \n \n0 \n1 \n \n0 \n1 \n \n0 \n1 \n \n0 \n1 \n \n0 \n1 \nEXTREF\/\n2 \nEXTREF \nEXTREF \nPLLFB \nPLLREF \nPLLFB \nTEST \/HOLD \/RAMPDN \n \nFigure 5 Detail of input multiplexer \nAs can be seen in figure 5 when the PLL is in normal \noperational mode only one 2 input MUX delay is present \nin each PLL input path. It is likely that to achieve optimal \nperformance for a high speed PLL system, the highlighted \nMUX circuitry would have to be subject to hand layout \ntechniques. However, this will be an insignificant \noverhead when weighed against the added value in terms \nof test access. It is important to note that as the test mode \ncircuitry (non highlighted circuitry) is operated at \nrelatively low speeds, the matching requirements for this \ncircuitry is not as severe, thus automatic layout can be \nused for the remainder of the test circuitry.  In addition, it \nmust be mentioned that all of the referenced BIST \ntechniques [3][4] include multiplexers in the signal paths, \ntherefore the same design constraints will apply, \nespecially when considering high speed and high \nperformance PLL\u2019s. \n  The Input MUX (and other depicted circuitry) has \nbeen evaluated on an FPGA and by using symmetrical \ndesign techniques, delay matching errors present at \nPLLREF and PLLFB have been minimised. The \npropagation delays between the input signals from the \nmultiplexer have been examined on an oscilloscope and \nappear to introduce negligible delays. \nIt is important to note that recently tests have been \npublished that propose application of stimulus injection \ndirectly to the charge pump switch control inputs [4]. \nHowever, the UP and DN CP switches are not operated \non a cyclic basis, with current being applied continuously \nto the LF structures during ramp up and ramp down \nmode. A major draw back of this approach is that for \npractical CP-PLL implementations the switches are \nconstructed from PMOS and NMOS transistors and \nduring each operation charge is stored on their associated \ncapacitances and subsequently discharged to the loop \nfilter node. A continuous application of current will not \nhighlight effects due to charge injection; additionally \nerrors in circuitry often used to cancel charge injection \neffects, may not be exercised.    \n3.3. MUX connections and output results for \nbasic test vectors. \nThe following table describes the tests carried out for \nvarious Input MUX connections (cf  fig 4) \nStep Description MUX \nConnections \nResult \n1) Frequncy lock test \n(normal operation) \nD=B E=C F1 \n2) Ramp down (OL) D=A E=B F2 \n3) Hold mode  (OL) D=B E=B F2 \n4) Ramp up     (OL) D=B E=A F3 \n5) Hold mode  (OL) D=B E=B F4 \nTable 1 Multiplexer connections \n \n \n(Note that F# indicates the frequencies measured at the \nend of each test phase.) \nUsing the above connections in conjunction with \nsuitable sequencing will allow comparison of counted \noutput frequencies (F1 \u2013 F4) against expected results. The \ntable below outlines typical information that can be \ninferred from the tests. \nStep Description Information Value \n1) Frequency \nlock test \nEnsures lock is attained \nSets reference \nF1 \nProceedings of the Seventh IEEE European Test Workshop (ETW\u201902) \n1530-1877\/02 $17.00 \u00a9 2002 IEEE \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 18, 2008 at 10:20 from IEEE Xplore.  Restrictions apply.\nfrequency \nExercise all PLL \ncomponents at \nmaximum frequency \n(with N set to Nmax) \n2) Ramp down Gain of forward path \nPLL components. \n \nF1-F2 \n3) Hold mode To allow measurement \nof F2. \n \nGain of forward path \nPLL components. \nCP \/ VCO non-linearity \n(with extra stages). \nF2-F3 4) Ramp up \nCharge pump \nmismatch. \nF1-F3 \n5) Hold mode Loop filter leakage \/ \nCharge pump leakage. \nExcessive phase offsets \nin the forward path. \nF3-F4 \nTable 2 Summary of output response from tests. \nNote that in step 1) if the feedback divider (cf fig 1) is \nset to its maximum setting Fout will be at a maximum. \nEnforcing this requirement for the test will ensure that all \nof the PLL components are exercised at maximum \noperational speed, after this, simple functional tests will \nbe adequate for feedback divider testing.  \nAlso in steps 2 and 3 applications of the stimuli over \ndifferent ranges of Fout will reveal any excessive non-\nlinearity in the FP blocks.    \nA further important point to note from table 2 is that \nexcessive CP mismatches or Loop filter leakage will lead \nto \u201cclose in\u201d phase noise or jitter on the VCO output \nwhen the PLL is in lock [11][13]. Note that, for \nembedded CP-PLLs the LF storage component is usually \nconstructed using large MOS capacitors with the gate \noxide (GO) as the dielectric. Spot defects causing GO \nfaults can be common [14], and will lead to \u201cleaky\u201d LF \ncomponents, this in turn will contribute to short term \nfluctuations of the LF voltage, that will in turn contribute \nto jitter of the PLL output. Therefore it is proposed that \nthe basic tests are carried out before any more elaborate \njitter measurement techniques are applied. A recent paper \nconcerning investigation of PLL noise sources [15] \nidentifies power supply coupling mechanisms as a major \ncontributory factor to PLL VCO jitter. Further useful \nmaterial concerning jitter measurement is given in [16]. \nCorrelation of phase noise and jitter to FP non-idealities \nand power supply coupling is being carried out as further \nwork. \nA sketch of the typical output response for the \nsequences of table 1 is provided below in figure 6.  \n \nTime \n \n1) \n \n2) \n \n4) \n \n5) \n \nF1 \n \nF2 \n \nF3 \n \nF4 \n \nAve \nOsc \nFreq \nNclk \n \nNclk \n \nNclk \n \nNclk \n \nStep \n \n\u2206M1 \n \n\u2206M2 \n \n\u2206M3 \n \nF# = Measured frequencies after each test step. \n\u2206M# = Allowable tolerances on each measurement. \nNclk = Number of clock cycles that are derived from EXTREF. Each test    \nstep is run for an equal number of cycles. \n3) \n \nFigure 6 expected outputs for Ramp based tests. \nTo further illustrate the test concept, the output voltage at \nthe loop filter node for a CP-PLL with the following \ncomponent values and test settings is shown in figure 7. \n \nIchp KPD Rp Cp Kvco \n1mA 159uAr-1 680 470nF 2\u00d7106r s-1 \nv-1 \nExtref Textref Ncycles \u0001Tn(Ichp) Fstart \n100KHz 10us 20 100us 3MHz \nTable 3 Test and simulation parameters. \nTIME 0.0 V(VCTRL) +4.172e-309 D(TIME) 0.0 D(V(VCTRL)) +4.172e-309\nRamp Output Time (s)\n(V)\n+3.000\n+3.200\n+3.400\n+3.600\n+3.800\n+4.000\n+4.200\n+4.400\n+4.600\n+4.800\n+5.000\n0.0 +100.000u +200.000u +300.000u +400.000u +500.000u +600.000u +700.000u +800.000u +900.000u\n \nFigure 7 Output waveforms from PLL LF node (cf \nfigures 1 and 3). \nComparisons between the predicted output frequency \nshift and the measured output frequency shift (F1-F2) are \ngiven below.  \n \nIP=1mA \nValue Measured Calculated \n\u2206Vc -212.658mV -212.8mV \n\u2206Fout 68.02KHz 68KHz \nIP=1.2mA \n\u2206Vc -255.316mV -255.319 \n\u2206Fout 84.6391KHz 81.2705KHz \nTable 4 Comparison of results \nF1 F2 F3 F4 \n(1) (2) (3) (4) (5) \nProceedings of the Seventh IEEE European Test Workshop (ETW\u201902) \n1530-1877\/02 $17.00 \u00a9 2002 IEEE \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 18, 2008 at 10:20 from IEEE Xplore.  Restrictions apply.\n(Measurement results have been taken from M\/S \nsimulations and correlate well with measurements carried \nout upon actual hardware.) \nFurther basic tests have been carried out on actual \nhardware to provide an indication of the link of jitter to \nleakage of the loop filter node. The PLL used for the test \nwas a 74HCT9046A PLL and the component values used \nare the same as for table 3. Note however, for this circuit \nthe nominal output frequency was 2.5MHz. Leakage of \nthe loop filter node was emulated by placing various \nresistors in parallel with Cp. Measured results are \nprovided in table 5 (cf fig 8). \nRes Value \n(ohm) \nV max V min Fmax \nMHz \nFmin \nMHz \nJitter \nPk-Pk \n(ns) \nNone 2.488 2.238 2.4038 2.3041 1 \n1M  2.063 1.813 2.2124 2.1088 4.5 \n680K 1.919 1.706 2.1368 2.0833 5.2 \n100K 1.556 0.9831 1.8116 1.7301 8 \nTable 5 Jitter and loop filter leakage \n The average output frequency of the PLL was \nmeasured to be 2.5 MHz for each case, which indicates \nthat these effects will not be uncovered by a simple FLT. \nFurther tests were made with a 10Kohm and 1Kohm \nresistor. For these cases jitter was measured as 28ns and \n158ns respectively, however in the latter case the average \noutput frequency was measured to be 1.7MHz.  Estimates \nof the jitter were made using a Tektronix 11402 \noscilloscope. Plots of the loop filter voltage were taken \nfrom an Agilent 54622D oscilloscope and are shown \nbelow. \n0.5\n1\n1.5\n2\n2.5\n3\n-0.0006 -0.0004 -0.0002 0 0.0002\nSeconds\nVo\nlts\nNormal\n1M ohm\n680K ohm\n100K ohm\n \nFigure 8 Loop filter output voltage versus \nleakage resistance. \n(Note that the order of the above outputs corresponds with \nthe order of the resistance values used i.e. the normal (no \nresistance) plot is the top output graph) \nIn the currently developed hardware, to realise a full \nBIST solution, limit values are stored on chip and \ncompared against the output results using a magnitude \ncomparator. Results can be provided as a pass \/ fail flag; \nhowever an option will also be included to allow \nextraction of actual measured values.  \nAt present for the applied tests the gate count is less \nthan a thousand. \n4. Application for functional verification of \nmultiple charge pump current and loop \nfilter component settings. \nNumerous PLL applications require that analogue \ncomponents in the PLL can be altered. Other published \nmethodologies only concentrate on measurement of a \nfixed PLL. Modification of components is generally \nrequired to facilitate alteration of the loop dynamics, so \nthat the PLL can function over wide operational ranges. \nCommon modifications to the simple architecture of fig 1 \ninclude provision to allow multiple CP current settings \nand loop filter settings to be used for the PLL. \nBoth of the above methods are used in embedded PLLs \nand board level synthesiser chipsets.  \nIf applications require that adjustable components are \nto be alterable during the operational lifetime of the PLL \nit is mandatory to verify all used settings. Unfortunately, \nfull operational verification for multiple loop filter and \nCP settings is time prohibitive, and can be difficult to \nrealise when considering embedded PLL test.  Even in the \ncase of PLL chipset test, where direct access to the \nimportant PLL nodes is permitted, direct measurement of \nparameters such as multiple CP currents can be time \nconsuming.      \nThe sequences proposed in section 3 can be used to \nprovide a relative test to allow verification of multiple \ncharge pump current or loop filter component settings. \nThe basic principle of the test considering the case of \nmultiple CP currents is outlined below. \n1) Initially Fout of the PLL is set to provide a reference \nfrequency. Setting of the datum frequency can be \nachieved by relocking the PLL after the ramp tests \nhave been applied.  \n2) The stimuli of section 2 are applied for N cycles of \nPLLREF with the largest CP current (Ichref) setting \nactivated. \n3) At the end of N cycles place the PLL in hold mode \nand measure Fout. Note N remains the same for all \ntests. \n4) Repeat steps 1 to 3 for all other smaller magnitude \nCP Currents (Ichn). \n From the results of the above test it is easy to show using \nequation (4) that  \nIchnIchref\nFref\nFn\n\u2248\u22c5\n\u2206\n\u2206\n (6) \nand  \nIchref\nIchn\nFref\nFn\n\u2248\n\u2206\n\u2206\n (7) \nProceedings of the Seventh IEEE European Test Workshop (ETW\u201902) \n1530-1877\/02 $17.00 \u00a9 2002 IEEE \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 18, 2008 at 10:20 from IEEE Xplore.  Restrictions apply.\n(Where: \u2206Fn is the frequency change corresponding to \nthe associated CP current setting, and \u2206Fref is the \nfrequency change corresponding to the main CP current.) \nTherefore with knowledge of Ichref all other CP currents \ncan be deduced. Also, even if direct measurement of \nIchref is impractical an estimate of matching between \ncurrents can be obtained. This type of test can also be \ncarried out for multiple loop filter settings. To illustrate \nthe concept further a CP-PLL circuit with: Rp = 680ohms, \nCp = 470nF, and KVCO = 2Mrad\/s was simulated. \nThe simulated results for CP currents of 1 to 5ma with \ninput stimuli applied for 20 cycles of PLLREF are given \nin figure 9. \n \nComparisons of the outputs of the tests are provided in \nthe following table. \n \nIchn \u0001Fn KHz \u0001Fn\/\u0001Fref \u0001Fn\/\u0001Fref*Ichref \n5mA* 339* 1 5mA \n4mA 270 0.8 4mA \n3mA 203 0.6 3mA \n2mA 136 0.4 2mA \n1mA 68 0.2 1mA \nTable 6 Illustrating method of multi CP match \nestimation \n(In the above table all values are rounded to 1d.p. \n* Indicates the datum measurement.) \nFor the relative tests described in this section the \nfollowing constraint applies: \nThe VCO control voltage must be relatively linear over \nthe measurement range. \nEven in the worst case, that is, when no direct \nmeasurement of a reference charge pump current is \npossible, the tests will still produce an accurate \nmeasurement of relative matching between the CP \ncurrents. Furthermore the test will provide direct \nindication of basic functionality of the component \nswitching circuitry. For a full BIST solution the test \nresponse outputs can be evaluated on chip against a stored \nset of calculated limit values. \n5. Conclusions and further work. \nThis paper has presented promising techniques for the \ntest of embedded CP-PLLs that can reveal valuable \ninformation about the forward path PLL Blocks. In \naddition, ideas have been presented that allow functional \nrelative tests to be carried out for multiple PLL settings, \nwhich does not seem to have been covered in other test \napproaches. All test vectors have been evaluated through \nsimulations and hardware prototyping techniques. Further \nwork will focus primarily upon investigation of \nalternative vector sequences for the test, to allow \nextraction of more operational details. In addition, some \nwork will be carried out into accurate correlations of \nphase noise \/ jitter to forward path block operation and \nadaptation of the proposed tests to allow coarse jitter \nestimation.   \n \n \n \nAcknowledgement \nThis work has been supported by EPSRC through the \n\u201cATOM\u201d project (Analogue and Mixed Signal Integrated \nCircuit Test Support for High Quality, Low Cost Manufacture) - \nEPSRC GR\/M7553 and through EC Framework 4 program \n\u201cASTERIS\u201d ref: ESPRIT 26354. \nReferences \n[1] Dalmia M, Ivanov A, Tabatabaei S, \u201cPower Supply Current \nMonitoring Techniques for Testing PLL\u2019s\u201d, Proc ATS 97, pp \n366-71. \n \n[2] F Azais, M Renovell, Y Bertrand, Ivanov A, Tabatabaei S, \n\u201cA Unified Digital Test Technique for PLL\u2019s; Catastropic Faults \nCovered\u201d Proc 5th IMSTW. \n \n[3] M. Burbidge, A Richardson, A Lechner, \u201cTest Techniques \nfor Embedded Charge Pump PLL\u2019s; Problems, Current BIST \nTechniques, and Alternative Suggestions. \n \n[4] S. Sunter, A Roy, \u201cBIST for Phased locked loops in digital \napplications\u201d, IEEE ITC99, pp532-540. \n \n[5] G W Roberts, M Hafed N Abraskharoun, \u201cA Stand Alone \nIntegrated Test Core For Time And Frequency Based \nMeasurements\u201d, Proc. Int. Test Conf, 2000, pp 1031-1041 \n \n[6] A DeHon, \u201cIn-System Timing Extraction and Control \nThrough Scan-Based, Test-Access Ports\u201d, M.I.T Transit \nProject, Transit Note #102, 1994 \n \n[7] A Chan, G W Roberts \u201c A Synthesizeable, Fast And High-\nResolution Timing Measurement Device Using A Component-\nInvariant Vernier Delay Line\u201d, ITC01proc, pp858-867 \n \n[8] Fluence, \u201cVCOBIST\u201d, IEEE DAC 99. \n \nF o u t V s  Ic h  \n1  0  \n5 0  \n1 0 0\n1 5 0\n2 0 0\n2 5 0\n3 0 0\n3 5 0\n4 0 0\n0  2 0  \nN c y c le s  ( \u0001T c h a rg e  =  N \/2 *1 \/P L L R E F )  \nK\nH\nz  \nIc h = 1 m A  \nIc h = 4 m A  \nIc h = 3 m A  \nIc h = 2 m A  \nIc h re f= 5 m A  \nFigure 9 Change in OP Freq Vs CPCurrent \nProceedings of the Seventh IEEE European Test Workshop (ETW\u201902) \n1530-1877\/02 $17.00 \u00a9 2002 IEEE \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 18, 2008 at 10:20 from IEEE Xplore.  Restrictions apply.\n [9] S. Kim, M Soma, \u201cAn Effective Defect-Oriented BIST \nArchitecture for High Speed Phase Locked Loops\u201d, IEEE VLSI \nTest Symposium 2000, pp231-236. \n \n[10] F M Gardner, \u201cCharge-Pump Phase-Lock Loops\u201d, IEEE \nTrans Comm, 28th Nov 1980, pp 1849-1858. \n \n[11] B Razavi (Editor), \u201cMonolithic Phase-Locked Loops and \nClock Recovery Circuits; Theory and Design\u201d, IEEE Press \n1996, ISBN 0780311493. \n \n[12] R Best, \u201cPhase Locked Loops, Design Simulation and \nApplications\u201d, 4th Edition, Mc-Graw-Hill, ISBN 0071349030 \n \n[13] D Banerjee, \u201cPLL Performance Simulation and Design\u201d \nCopyright 1998 National Semiconductors. \n \n[14] M Sachdev, \u201c Defect Oriented Testing for CMOS Analog \nand Digital Circuits\u201d, Kluwer Academic Publishers, 1998, pp \n37-38 and 79-81, ISBN 0-7923-8083-5. \n \n[15] P Larson, \u201cMeasurements and Analysis of PLL Jitter \nCaused by Digital Switching Noise\u201d, IEEE Journal of Solid-\nState Circuits, July 2001, pp1113-1120. \n \n[16] K. Jenkins, J Eckhardt, \u201cMeasuring Jitter and Phase Error \nin Microprocessor Phase-Locked Loops, IEEE Design and Test \nof Computers, Apr-Jun 2000, Issue 17, Vol 2, pp 86-93 \n \n \n \n \n \n \n \nProceedings of the Seventh IEEE European Test Workshop (ETW\u201902) \n1530-1877\/02 $17.00 \u00a9 2002 IEEE \nAuthorized licensed use limited to: Lancaster University Library. Downloaded on December 18, 2008 at 10:20 from IEEE Xplore.  Restrictions apply.\n"}