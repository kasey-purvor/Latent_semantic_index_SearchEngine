{"doi":"10.1017\/S0963548304006546","coreId":"93791","oai":"oai:eprints.lse.ac.uk:5769","identifiers":["oai:eprints.lse.ac.uk:5769","10.1017\/S0963548304006546"],"title":"Counting small cliques in 3-uniform hypergraphs","authors":["Peng, Yuejian","R\u00f6dl, Vojtech","Skokan, Jozef"],"enrichments":{"references":[{"id":17312367,"title":"A fast approximation algorithm for computing the frequencies of subgraphs in a given graph.","authors":[],"date":"1995","doi":"10.1137\/s0097539793247634","raw":"Duke, R., Lefmann, H. and R\u00a8 odl, V. (1995) A fast approximation algorithm for computing the frequencies of subgraphs in a given graph. SIAM J. Comput. 24 598\u2013620.Counting Small Cliques in 3-uniform Hypergraphs 413","cites":null},{"id":17312372,"title":"Counting small cliques in 3-uniform hypergraphs.","authors":[],"date":"2001","doi":"10.1017\/s0963548304006546","raw":"Peng, Y. (2001) Counting small cliques in 3-uniform hypergraphs. PhD Thesis, Emory University (available at http:\/\/www.mathcs.emory.edu\/\u223crodl\/grads.html).","cites":null},{"id":17312368,"title":"Extremal problems on set systems.","authors":[],"date":"2002","doi":"10.1002\/rsa.10017.abs","raw":"Frankl, P. and R\u00a8 odl, V. (2002) Extremal problems on set systems. Random Struct. Alg. 20 131\u2013164.","cites":null},{"id":17312370,"title":"Hypergraphs, quasi-randomness, and conditions for regularity.","authors":[],"date":"2002","doi":"10.1006\/jcta.2001.3217","raw":"Kohayakawa, Y., R\u00a8 odl, V. and Skokan, J. (2002) Hypergraphs, quasi-randomness, and conditions for regularity. J. Combin. Theory Ser. A 97 307\u2013352.","cites":null},{"id":17312369,"title":"L u c z a k ,T .a n dR u c i \u00b4 nski,","authors":[],"date":"2000","doi":null,"raw":"Janson, S,   L u c z a k ,T .a n dR u c i \u00b4 nski, A. (2000) Random Graphs, Wiley-Interscience Series in Discrete Mathematics and Optimization, Wiley-Interscience, New York.","cites":null},{"id":17312366,"title":"On characterizing hypergraph regularity.","authors":[],"date":"2002","doi":"10.1002\/rsa.10058","raw":"Dementieva, Y., Haxell, P., Nagle, B. and R\u00a8 odl, V. (2002) On characterizing hypergraph regularity. Random Struct. Alg. 21 293\u2013335.","cites":null},{"id":17312373,"title":"Regular partitions of graphs.","authors":[],"date":"1978","doi":null,"raw":"Szemer\u00b4 edi, E. (1978) Regular partitions of graphs. In Probl` emes Combinatoires et Th\u00b4 eorie des Graphes (Colloq. Internat. CNRS, Univ. Orsay, Orsay, 1976), Vol. 260 of Colloq. Internat. CNRS, CNRS, Paris, pp. 399\u2013401.","cites":null},{"id":17312371,"title":"Regularity properties for triple systems.","authors":[],"date":"2003","doi":"10.1002\/rsa.10094","raw":"Nagle, B. and R\u00a8 odl, V. (2003) Regularity properties for triple systems. Random Struct. Alg. 23 264\u2013332.","cites":null},{"id":17312365,"title":"The algorithmic aspects of the regularity lemma.","authors":[],"date":"1994","doi":"10.1006\/jagm.1994.1005","raw":"Alon, N., Duke, R., Lefmann, H., R\u00a8 odl, V. and Yuster, R. (1994) The algorithmic aspects of the regularity lemma. J. Algorithms 16 80\u2013109.","cites":null}],"documentType":{"type":1}},"contributors":[],"datePublished":"2005-05","abstract":"Many applications of Szemer\u00e9di's Regularity Lemma for graphs are based on the following counting result. If ${\\mathcal G}$ is an $s$-partite graph with partition $V({\\mathcal G}) =\\bigcup_{i=1}^{s} V_i$, $\\vert V_i\\vert =m$ for all $i\\in [s]$, and all pairs $(V_i, V_j)$, $1\\leq i < j\\leq s$, are $\\epsilon$-regular of density $d$, then $\\mathcal{G}$ contains $(1\\pm f(\\epsilon))d^{({s\\atop 2})}m^s$ cliques $K_{s}$, provided $\\epsilon<\\epsilon(d)$, where $f(\\epsilon)$ tends to 0 as $\\epsilon$ tends to 0. Guided by the regularity lemma for 3-uniform hypergraphs established earlier by Frankl and R\u00f6dl, Nagle and R\u00f6dl proved a corresponding counting lemma. Their proof is rather technical, mostly due to the fact that the \u2018quasi-random\u2019 hypergraph arising after application of Frankl and R\u00f6dl's regularity lemma is \u2018sparse\u2019, and consequently difficult to handle. When the \u2018quasi-random\u2019 hypergraph is \u2018dense\u2019 Kohayakawa, R\u00f6dl and Skokan (J. Combin. Theory Ser. A 97 307\u2013352) found a simpler proof of the counting lemma. Their result applies even to $k$-uniform hypergraphs for arbitrary $k$. While the Frankl\u2013R\u00f6dl regularity lemma will not render the dense case, in this paper, for $k=3$, we are nevertheless able to reduce the harder, sparse case to the dense case. Namely, we prove that a \u2018dense substructure\u2019 randomly chosen from the \u2018sparse $\\delta$-regular structure\u2019 is $\\delta$-regular as well. This allows us to count the number of cliques (and other subhypergraphs) using the Kohayakawa\u2013R\u00f6dl\u2013Skokan result, and provides an alternative proof of the counting lemma in the sparse case. Since the counting lemma in the dense case applies to $k$-uniform hypergraphs for arbitrary $k$, there is a possibility that the approach of this paper can be adopted to the general case as well","downloadUrl":"https:\/\/core.ac.uk\/download\/pdf\/93791.pdf","fullTextIdentifier":"http:\/\/eprints.lse.ac.uk\/5769\/1\/Counting_Small_Cliques_in_3-uniform_Hypergraphs.pdf","pdfHashValue":"d6448d0cde66a74c0962ea864459e3db665ffa76","publisher":"Cambridge University Press","rawRecordXml":"<record><header><identifier>\n    \n    \n      oai:eprints.lse.ac.uk:5769<\/identifier><datestamp>\n      2010-10-01T08:55:40Z<\/datestamp><setSpec>\n      74797065733D4445505453:4C53452D4D41<\/setSpec><setSpec>\n      74797065733D43454E54524553:4C53455F52435F3130<\/setSpec><\/header><metadata><oai_dc:dc xmlns:oai_dc=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/\" xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:schemaLocation=\"http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc\/ http:\/\/www.openarchives.org\/OAI\/2.0\/oai_dc.xsd\" ><dc:relation>\n    \n      \n        http:\/\/eprints.lse.ac.uk\/5769\/<\/dc:relation><dc:title>\n        Counting small cliques in 3-uniform hypergraphs<\/dc:title><dc:creator>\n        Peng, Yuejian<\/dc:creator><dc:creator>\n        R\u00f6dl, Vojtech<\/dc:creator><dc:creator>\n        Skokan, Jozef<\/dc:creator><dc:subject>\n        QA Mathematics<\/dc:subject><dc:description>\n        Many applications of Szemer\u00e9di's Regularity Lemma for graphs are based on the following counting result. If ${\\mathcal G}$ is an $s$-partite graph with partition $V({\\mathcal G}) =\\bigcup_{i=1}^{s} V_i$, $\\vert V_i\\vert =m$ for all $i\\in [s]$, and all pairs $(V_i, V_j)$, $1\\leq i < j\\leq s$, are $\\epsilon$-regular of density $d$, then $\\mathcal{G}$ contains $(1\\pm f(\\epsilon))d^{({s\\atop 2})}m^s$ cliques $K_{s}$, provided $\\epsilon<\\epsilon(d)$, where $f(\\epsilon)$ tends to 0 as $\\epsilon$ tends to 0. Guided by the regularity lemma for 3-uniform hypergraphs established earlier by Frankl and R\u00f6dl, Nagle and R\u00f6dl proved a corresponding counting lemma. Their proof is rather technical, mostly due to the fact that the \u2018quasi-random\u2019 hypergraph arising after application of Frankl and R\u00f6dl's regularity lemma is \u2018sparse\u2019, and consequently difficult to handle. When the \u2018quasi-random\u2019 hypergraph is \u2018dense\u2019 Kohayakawa, R\u00f6dl and Skokan (J. Combin. Theory Ser. A 97 307\u2013352) found a simpler proof of the counting lemma. Their result applies even to $k$-uniform hypergraphs for arbitrary $k$. While the Frankl\u2013R\u00f6dl regularity lemma will not render the dense case, in this paper, for $k=3$, we are nevertheless able to reduce the harder, sparse case to the dense case. Namely, we prove that a \u2018dense substructure\u2019 randomly chosen from the \u2018sparse $\\delta$-regular structure\u2019 is $\\delta$-regular as well. This allows us to count the number of cliques (and other subhypergraphs) using the Kohayakawa\u2013R\u00f6dl\u2013Skokan result, and provides an alternative proof of the counting lemma in the sparse case. Since the counting lemma in the dense case applies to $k$-uniform hypergraphs for arbitrary $k$, there is a possibility that the approach of this paper can be adopted to the general case as well.<\/dc:description><dc:publisher>\n        Cambridge University Press<\/dc:publisher><dc:date>\n        2005-05<\/dc:date><dc:type>\n        Article<\/dc:type><dc:type>\n        PeerReviewed<\/dc:type><dc:format>\n        application\/pdf<\/dc:format><dc:language>\n        en<\/dc:language><dc:identifier>\n        http:\/\/eprints.lse.ac.uk\/5769\/1\/Counting_Small_Cliques_in_3-uniform_Hypergraphs.pdf<\/dc:identifier><dc:identifier>\n          Peng, Yuejian and R\u00f6dl, Vojtech and Skokan, Jozef  (2005) Counting small cliques in 3-uniform hypergraphs.  Combinatorics, Probability and Computing, 14 (3).  pp. 371-413.  ISSN 0963-5483     <\/dc:identifier><dc:relation>\n        http:\/\/journals.cambridge.org\/action\/displayJournal?jid=CPC<\/dc:relation><dc:relation>\n        10.1017\/S0963548304006546<\/dc:relation><\/oai_dc:dc><\/metadata><\/record>","journals":null,"language":{"code":"en","id":9,"name":"English"},"relations":["http:\/\/eprints.lse.ac.uk\/5769\/","http:\/\/journals.cambridge.org\/action\/displayJournal?jid=CPC","10.1017\/S0963548304006546"],"year":2005,"topics":["QA Mathematics"],"subject":["Article","PeerReviewed"],"fullText":"Combinatorics, Probability and Computing (2005) 14, 371\u2013413. c\u00a9 2005 Cambridge University Press\ndoi:10.1017\/S0963548304006546 Printed in the United Kingdom\nCounting Small Cliques in\n3-uniform Hypergraphs\nY. PENG,1\u2020 V. RO\u00a8DL2\u2021 and J. SKOKAN3\u00a7\n1Department of Mathematics and Computer Science, Indiana State University, Terre Haute, IN 47809, USA\n(e-mail: mapeng@isugw.indstate.edu)\n2Department of Mathematics and Computer Science, Emory University, Atlanta, GA 30032, USA\n(e-mail: rodl@mathcs.emory.edu)\n3Department of Mathematics, MC-382, University of Illinois at Urbana\u2013Champaign,\n1409 W. Green Street, Urbana, IL 61801, USA\n(e-mail: jozef@member.ams.org)\nReceived 17 May 2002; revised 5 June 2003\nMany applications of Szemere\u00b4di\u2019s Regularity Lemma for graphs are based on the following\ncounting result. If G is an s-partite graph with partition V (G) = \u22c3si=1 Vi, |Vi| = m for all\ni \u2208 [s], and all pairs (Vi, Vj ), 1 \u0001 i < j \u0001 s, are \u0001-regular of density d, then G contains\n(1 \u00b1 f(\u0001))d( s2 )ms cliques Ks, provided \u0001 < \u0001(d), where f(\u0001) tends to 0 as \u0001 tends to 0.\nGuided by the regularity lemma for 3-uniform hypergraphs established earlier by Frankl\nand Ro\u00a8dl, Nagle and Ro\u00a8dl proved a corresponding counting lemma. Their proof is rather\ntechnical, mostly due to the fact that the \u2018quasi-random\u2019 hypergraph arising after application\nof Frankl and Ro\u00a8dl\u2019s regularity lemma is \u2018sparse\u2019, and consequently difficult to handle.\nWhen the \u2018quasi-random\u2019 hypergraph is \u2018dense\u2019 Kohayakawa, Ro\u00a8dl and Skokan (J. Com-\nbin. Theory Ser. A 97 307\u2013352) found a simpler proof of the counting lemma. Their result\napplies even to k-uniform hypergraphs for arbitrary k. While the Frankl\u2013Ro\u00a8dl regularity\nlemma will not render the dense case, in this paper, for k = 3, we are nevertheless able to\nreduce the harder, sparse case to the dense case.\nNamely, we prove that a \u2018dense substructure\u2019 randomly chosen from the \u2018sparse \u03b4-regular\nstructure\u2019 is \u03b4-regular as well. This allows us to count the number of cliques (and other\nsubhypergraphs) using the Kohayakawa\u2013Ro\u00a8dl\u2013Skokan result, and provides an alternative\nproof of the counting lemma in the sparse case. Since the counting lemma in the dense case\napplies to k-uniform hypergraphs for arbitrary k, there is a possibility that the approach of\nthis paper can be adopted to the general case as well.\n\u2020 Corresponding author: Y. Peng.\n\u2021 Partially supported by NSF grants DMS-0071261, DMS-0300529 and INT-0072064.\n\u00a7 Partially supported by NSF grant INT-0072064.\n372 Y. Peng, V. Ro\u00a8dl and J. Skokan\n1. Introduction and the main result\nFor a graph G = (V , E) and two disjoint nonempty sets A,B \u2282 V , let E(A,B) denote the\nset of edges {a, b} \u2208 E with a \u2208 A and b \u2208 B. Let d(A,B) = |E(A,B)|\/|A||B| be the density\nof a pair (A,B). For a given \u0001 > 0, the pair (A,B) is \u0001-regular if\n|d(A,B) \u2212 d(A\u2032, B\u2032)| < \u0001\nholds whenever A\u2032 \u2286 A,B\u2032 \u2286 B, and |A\u2032| \u0001 \u0001|A|, |B\u2032| \u0001 \u0001|B|.\nSzemere\u00b4di\u2019s Regularity Lemma [9] says that all graphs can be decomposed into \u0001-\nregular, \u2018random-like\u2019 pieces.\nTheorem 1.1. (Szemere\u00b4di\u2019s Regularity Lemma) For every given \u0001 > 0 and integer t, there\nexist integers T = T (\u0001, t) and N = N(\u0001, t) such that every graph G = (V , E) with |V | \u0001 N\nvertices admits a partition V =\n\u22c3s\ni=1 Vi, such that\n(1) t \u0002 s \u0002 T ,\n(2) ||Vi| \u2212 |Vj || \u0002 1 for all pairs (i, j), 1 \u0002 i < j \u0002 s, and\n(3) pairs (Vi, Vj) are \u0001-regular for all but \u0001(\ns\n2\n) pairs (i, j), 1 \u0002 i < j \u0002 s.\nA partition described in the above theorem is called an \u0001-regular partition.\nSzemere\u00b4di\u2019s Regularity Lemma is one of the most powerful tools in extremal graph\ntheory. Many applications of Szemere\u00b4di\u2019s Regularity Lemma are based on a \u2018counting\nlemma\u2019, which states that the number of cliques Ks, i.e., complete subgraphs with s vertices,\nin a \u2018random-like\u2019 graph is as expected. For a graph G, let Ks(G) be the set of all s-element\nsets that induces a copy of Ks in G. The following fact is easy to prove.\nFact 1.2. (Counting Lemma) Let G be an s-partite graph with a vertex partition V (G) =\u22c3s\ni=1 Vi such that\n(1) |Vi| = m for all i \u2208 [s], and\n(2) all pairs (Vi, Vj), 1 \u0002 i < j \u0002 s, are \u0001-regular with density d.\nThen G contains (1 \u00b1 f(\u0001))d( s2 )ms cliques Ks, provided \u0001 < \u0001(d), where f(\u0001) \u2192 0 as \u0001 \u2192 0.\nIn other words,\n|Ks(G)| = (1 \u00b1 f(\u0001))d( s2 )ms.\nA natural question arises whether the Regularity Lemma can be generalized to\nhypergraphs in a way that allows for a similar counting lemma. It turns out that this is\na difficult problem. Frankl and Ro\u00a8dl developed such a regularity lemma for 3-uniform\nhypergraphs in [4]. In a way similar to Theorem 1.1, Frankl and Ro\u00a8dl\u2019s regularity lemma\nallows one to count the number of cliques K (3)s . This was done for s = 4 in [4] and later\ngeneralized by Nagle and Ro\u00a8dl [7], replacing 4 with an arbitrary integer s. The result of\n[7], which extends Fact 1.2 to 3-uniform hypergraphs, replaces the concept of \u0001-regularity\nwith (\u03b4, d, r)-regularity (cf. Definition 1). While the proof of Fact 1.2 is simple, the proof\nof counting lemma given in [7] is surprisingly very technical.\nCounting Small Cliques in 3-uniform Hypergraphs 373\nSince in this paper we are interested mainly in an extension of Fact 1.2 to 3-uniform\nhypergraphs, we will not state the Frankl\u2013Ro\u00a8dl regularity lemma here. We need, however,\ntheir concept of regularity for 3-uniform hypergraphs (cf. [4]).\nDefinition 1. Let \u03b4, d be positive real numbers and r be a positive integer. Let G be a\n3-partite graph and H be a 3-partite 3-uniform hypergraph with the same vertex partition.\nWe say that H is (\u03b4, d, r)-regular with respect to G if the following property is satisfied.\nWhenever Q1, . . . ,Qr are subgraphs of G such that\u2223\u2223\u2223\u2223 r\u22c3\nj=1\nK3(Qj)\n\u2223\u2223\u2223\u2223 \u0001 \u03b4|K3(G)|,\nthen \u2223\u2223\u2223\u2223H \u2229 r\u22c3\nj=1\nK3(Qj)\n\u2223\u2223\u2223\u2223 = (1 \u00b1 \u03b4)d\n\u2223\u2223\u2223\u2223 r\u22c3\nj=1\nK3(Qj)\n\u2223\u2223\u2223\u2223. (1.1)\nHere K3(G) stands for the number of triangles in a graph G and we refer the reader to\nSection 2 for more notation used throughout this paper.\nRemark 1. (\u03b4, d, r)-regularity implies (\u03b4\u2032, d, r\u2032)-regularity when r\u2032 \u0002 r and \u03b4\u2032 \u0001 \u03b4.\nDefinition 2. Let G be an s-partite graph and H be an s-partite 3-uniform hypergraph\nwith the same partition\n\u22c3s\ni=1 Vi. We say that H is (\u03b4, d, r)-regular with respect to G if\nH[Vi \u222a Vj \u222a Vk] is (\u03b4, d, r)-regular with respect to G[Vi \u222a Vj \u222a Vk] for every {i, j, k} \u2208 [s]3.\nDefinition 3. Let G be a graph and H be a 3-uniform hypergraph. We say that G\nunderlies H if all edges of H are triangles of G, in other words, H \u2282 K3(G).\nWe have found it convenient to work with the following alternative (but equivalent)\ndefinition of \u0001-regularity.\nDefinition 4. Let 0 < \u0001, d \u0002 1 and (V1, V2) be a disjoint pair in a graph G. The pair\n(V1, V2) is called (\u0001, d)-regular if\nd(W1,W2) = (1 \u00b1 \u0001)d\nholds for every W1 \u2282 V1, W2 \u2282 V2 with |W1||W2| \u0001 \u0001|V1||V2|.\nDefinition 5. Let G = (V , E) be an s-partite graph with partition V = \u22c3si=1 Vi. Then G is\ncalled (\u0001, d)-regular if all pairs (Vi, Vj), 1 \u0002 i < j \u0002 s, are (\u0001, d)-regular.\nNow we are ready to state the counting lemma for 3-uniform hypergraphs.\nTheorem 1.3. (Counting lemma for 3-uniform hypergraphs [7]) Let s \u0001 3 be an integer.\nFor every \u00b5 > 0 and d3 \u2208 (0, 1] there exists \u03b4 > 0 such that, for every d2 \u2208 (0, 1], there exist\n\u0001 > 0 and integers r and m0 such that the following assertion holds.\n374 Y. Peng, V. Ro\u00a8dl and J. Skokan\nIf G is an s-partite graph with partition V = \u22c3si=1 Vi, where |Vi| = m > m0 for 1 \u0002 i \u0002 s,\nand H is an s-partite 3-uniform hypergraph with the same partition such that\n(1) G is (\u0001, d2)-regular, and\n(2) G underlies H, and H is (\u03b4, d3, r)-regular with respect to G,\nthen H contains (1 \u00b1 \u00b5)d( s2 )2 d(\ns\n3 )\n3 m\ns copies of K (3)s .\nNote that due to the quantification of Theorem 1.3 (\u2200\u00b5 \u2200d3 \u2203\u03b4 \u2200d2 \u2203\u0001 \u2203r \u2203m0 \u2200m),\none must prove this theorem for every d2, and consequently for d2 \u000b \u03b4. In this case,\nthe underlying graph G is sparse, which is the main reason why all known proofs have\nbecome very technical. Unfortunately, the situation d2 \u000b \u03b4 cannot be avoided after the\napplication of the regularity lemma from [4].\nIf the underlying graph G is dense, then it is relatively simple to count the number\nof cliques. Recently, Kohayakawa, Ro\u00a8dl and Skokan [6] proved a counting theorem\nfor k-uniform hypergraphs, which for k = 3 reduces to a special case of Theorem 1.3.\nSpecifically, they showed that Theorem 1.3 is true when G is a complete s-partite graph\nand r = 1.\nLemma 1.4. ([6]) Let s \u0001 3 be an integer. For every \u00b5 > 0 and every d \u2208 (0, 1], there exist\n\u03b40 > 0 and m0 > 0 such that the following holds. If\n(1) G is a complete s-partite graph with partition V = \u22c3si=1 Vi, where |Vi| = m \u0001 m0 for\n1 \u0002 i \u0002 s, and\n(2) H is an s-partite 3-uniform hypergraph with the same partition V = \u22c3si=1 Vi and H is\n(\u03b4, d, 1)-regular with respect to G, where \u03b4 \u0002 \u03b40,\nthen H contains (1 \u00b1 \u00b5)d( s3 )ms copies of K (3)s .\nIn this paper, we show how to reduce the harder, sparse case (i.e., when d2 \u000b \u03b4) to\nthe dense case (when \u03b4 \u000b d2 = 1). We prove that a \u2018dense substructure\u2019 randomly chosen\nfrom the \u2018sparse \u03b4-regular structure\u2019 is \u03b4-regular as well. In order to state our result, we\nneed to describe the environment (or our \u2018sparse \u03b4-regular structure\u2019) in which we will\nwork.\nThroughout the remaining part of this paper, we will work within the following setup.\nOwing to the quantification of Theorem 1.3,\n\u2200\u00b5 \u2200d3 \u2203\u03b4 \u2200d2 \u2203\u0001 \u2203r \u2203m0 \u2200m \u0001 m0,\nwe may assume the following.\nSetup.\n(S1)\n1\nm\n\u000b \u0001 \u000b 1\nr\n\u000b d2, \u03b4 and \u03b4 \u000b d3. (1.2)\n(S2) Let h be an integer satisfying \u0001 \u000b 1\/h \u000b \u03b4.\nCounting Small Cliques in 3-uniform Hypergraphs 375\n(S3) Let V =\n\u22c3s\ni=1 Vi be a partition of V satisfying |Vi| = m for i \u2208 [s]. Suppose that\n(i) G is an (\u0001, d2)-regular s-partite graph with s-partition V = \u22c3si=1 Vi,\n(ii) H is an s-partite 3-uniform hypergraph with the same partition as G, and\n(iii) G underlies H and H is (\u03b4, d3, r)-regular with respect to G.\nWe also need the following definition.\nDefinition 6. For 2 \u0002 t \u0002 s, we call a t-tuple of h-subsets (L1, . . . , Lt), where L1 \u2282\nV1, . . . , Lt \u2282 Vt, complete if G[L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt] is a complete t-partite graph. For t = 1, every\nh-subset L1 \u2282 V1 is called complete.\nThe following remark estimates the number of complete s-tuples of h-subsets. Note\nthat it is also a generalized version of the Counting Lemma for the graph case given in\nFact 1.2.\nRemark 2. For 1 \u0002 i \u0002 s, set Mi = d(i\u22121)h2 m. Then the number of complete s-tuples of\nh-subsets (L1, . . . , Ls) is (cf. Fact A.7(1))(\n1 \u00b1 \u00011\/2s+1) s\u220f\ni=1\n(\nMi\nh\n)\n.\nThus the quantity\n\u220fs\ni=1(\nMi\nh\n) counts asymptotically the number of complete s-tuples of\nh-subsets in G. Consequently, the quantification\n\u2018For all but f(\u03b4)\n\u220fs\ni=1(\nMi\nh\n) complete s-tuples of h-subsets, where f(\u03b4) \u2192 0 as \u03b4 \u2192 0\u2019\nmeans\n\u2018For almost all complete s-tuples of h-subsets.\u2019\nNow we present our main result.\nTheorem 1.5. (Main theorem) There exists a positive function f(\u03b4) with the property\nf(\u03b4) \u2192 0 as \u03b4 \u2192 0 such that the following holds.\nFor all but at most f(\u03b4)\n\u220fs\ni=1(\nMi\nh\n) complete s-tuples of h-subsets (L1, L2, . . . , Ls), the in-\nduced subhypergraph H[\u222asi=1Li] is (f(\u03b4), d3, 1)-regular with respect to G[\u222asi=1Li].\nConsequently, all but at most f(\u03b4)\n\u220fs\ni=1(\nMi\nh\n) complete s-tuples (L1, L2, . . . , Ls) of h-\nsubsets satisfy assumptions of Lemma 1.4, and thus enable to count the number of cliques\nK (3)s in H[\u222asi=1Li]. The following result is a direct consequence of Theorem 1.5 and\nLemma 1.4.\nCorollary 1.6. There exists a positive function f(\u03b4) with the property f(\u03b4) \u2192 0 as \u03b4 \u2192 0\nsuch that the following holds.\nFor all but at most f(\u03b4)\n\u220fs\ni=1(\nMi\nh\n) complete s-tuples of h-subsets (L1, L2, . . . , Ls), the hy-\npergraph H[\u222asi=1Li] contains (1 \u00b1 f(\u03b4))d(\ns\n3 )\n3 h\ns copies of K (3)s .\n376 Y. Peng, V. Ro\u00a8dl and J. Skokan\nApplying Corollary 1.6 and a double counting argument, we can easily enumerate the\nnumber of cliques K (3)s in H. This gives an alternative proof of Theorem 1.3. Details are\ngiven in Section 3.\n2. Notation\n[W ]k denotes all k element subsets of a set W .\nV (G) is the vertex set of a graph or a hypergraph G.\nE(G) is the edge set of a graph or a hypergraph G.\nG[W ] stands for the subhypergraph of G induced on a set W .\nG(x) denotes the neighbourhood of a vertex x in a graph G.\nG(W ) = \u22c2x\u2208W G(x) is called the joint neighbourhood of a set W in a graph G.\nG(x1, . . . , xk) is an abbreviated form of G({x1, . . . , xk}).\nKj is a clique of size j in a graph.\nK3(G) denotes the set of all triangles in a graph G.\nK\n(3)\nj is a clique of size j in a 3-uniform hypergraph.\nKj(H) denotes the set of all cliques of size j in a 3-uniform hypergraph H.\nK\n(3)\n2,2,2 is a complete 3-partite 3-uniform hypergraph whose every partite set contains\nprecisely two vertices.\nH(x) = {e \\ {x} : e \u2208 E(H), x \u2208 e} is the link of a vertex x in a 3-uniform hypergraph H.\nH(W ) = \u22c2x\u2208W H(x) is called the joint link of a set W in a 3-uniform hypergraph H.\nH(x1, . . . , xk) is an abbreviated form of H({x1, . . . , xk}).\nH(f) = {e \\ f : e \u2208 E(H), f \u2282 e} is the link of a 2-subset f \u2208 [V (H)]2 in a 3-uniform\nhypergraph H.\nH(F) = \u22c2f\u2208F H(f) is the link of a family F \u2282 [V (H)]2 in a 3-uniform hypergraph H.\nFor three numbers a, b and \u03b4 > 0, b = a\u00b1 \u03b4 means that b \u2208 (a\u2212 \u03b4, a+ \u03b4).\n3. Proof of Theorem 1.3\nAt this point, we prove Theorem 1.3 by applying Corollary 1.6 and a double counting\nargument. We will frequently use some easy facts regarding \u0001-regularity of graphs. These\nfacts are summarized in Appendix A as Facts A.1\u2013A.10.\nLet Ch,t denote the set of all complete t-tuples of h-sets in G, that is,\nCh,t(G) = {complete (L1, . . . , Lt) \u2208 [V1]h \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 [Vt]h}.\nCounting Small Cliques in 3-uniform Hypergraphs 377\nDefinition 7. We say that an s-tuple (a1, . . . , as) \u2208 V1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Vs is complete if the induced\nsubgraph G[{a1, . . . , as}] of G is a complete graph.\nNow we shall outline the proof of Theorem 1.3. We first apply Corollary 1.6 to estimate\nA =\n\u2211\nC\n|Ks(H[L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Ls])|,\nwhere\n\u2211\nC stands for the summation over all s-tuples (L1, . . . , Ls) \u2208 Ch,s(G). This is\ndone in Claim 3.1. Then, for a fixed complete s-tuple (a1, . . . , as)\u2208V1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Vs, we\nestimate the number of s-tuples (L1, . . . , Ls) \u2208 Ch,s(G) such that (a1, . . . , as) \u2208 L1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Ls\n(cf. Claim 3.2). Since this quantity is essentially the same (say, equal to B) for almost all\n(a1, . . . , as)\u2208V1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Vs, we can conclude that the number of copies of K (3)s is about A\/B.\nClaim 3.1. \u2211\nC\n|Ks(H[L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Ls])| = (1 \u00b1 h(\u03b4))dh\n2( s2 )\n2 d\n( s3 )\n3 h\nsmhs\/(h!)s,\nwhere h(\u03b4) is a positive function with the property h(\u03b4) \u2192 0 as \u03b4 \u2192 0.\nProof of Claim 3.1. Corollary 1.6, Remark 2, and 1\/m \u000b \u0001 \u000b 1\/h \u000b \u03b4 imply that\u2211\nC\n|Ks(H[L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Ls])|\n\u0001 (1 \u2212 f(\u03b4))d( s3 )3 hs \u00d7\n((\n1 \u2212 \u00011\/2s+1) s\u220f\ni=1\n(\nd\n(i\u22121)h\n2 m\nh\n)\n\u2212 f(\u03b4)\ns\u220f\ni=1\n(\nd\n(i\u22121)h\n2 m\nh\n))\n\u0001 (1 \u2212 h(\u03b4))d( s2 )h22 d(\ns\n3 )\n3 h\nsmhs\/(h!)s, (3.1)\nwhere f(\u03b4) is the function from Corollary 1.6 and h(\u03b4) is a positive function with the\nproperty that h(\u03b4) \u2192 0 as \u03b4 \u2192 0. Corollary 1.6 and Fact A.7(3) also imply that\u2211\nC\n|Ks(H[L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Ls])|\n\u0002 (1 + f(\u03b4))d(\ns\n3 )\n3 h\ns \u00d7 (1 + \u00011\/2s+1) s\u220f\ni=1\n(\nd\n(i\u22121)h\n2 m\nh\n)\n+ hs \u00d7 f(\u03b4)\ns\u220f\ni=1\n(\nd\n(i\u22121)h\n2 m\nh\n)\n\u0002 (1 + h(\u03b4))d(\ns\n2 )h\n2\n2 d\n( s3 )\n3 h\nsmhs\/(h!)s (3.2)\nsince \u0001 \u000b \u03b4 \u000b d3.\nLet (a1, . . . , as) \u2208 V1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Vs be a complete s-tuple. Now we estimate the number of\ns-tuples (L1, . . . , Ls) \u2208 Ch,s(G) for which (a1, . . . , as) \u2208 L1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Ls.\nClaim 3.2. All but at most \u00011\/8ms complete s-tuples (a1, . . . , as) \u2208 V1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Vs satisfy\n|{(L1, . . . , Ls) \u2208 Ch,s(G) : (a1, . . . , as) \u2208 L1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Ls}|\n=\n(\n1 \u00b1 \u00011\/2s+3)d(h2\u22121)( s2 )2 m(h\u22121)s\/((h\u2212 1)!)s. (3.3)\n378 Y. Peng, V. Ro\u00a8dl and J. Skokan\nProof of Claim 3.2. Let (a1, . . . , as) \u2208 V1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Vs be a complete s-tuple. We need to\nestimate the number of complete s-tuples (B1, . . . , Bs) of (h\u2212 1)-subsets B1 \u2282 V1, . . . , Bs \u2282\nVs such that\nBi \u2208 [G({a1, . . . , as} \\ {ai})]h\u22121\nfor every i \u2208 [s].\nBy Fact A.3 and \u0001 \u000b d2 \u0002 1, for each i \u2208 [s], all but at most 2(s\u2212 1)\u00011\/2ms\u22121 \u0002 \u00011\/4ms\u22121\n(s\u2212 1)-element sets {a1, . . . , as} \\ {ai} satisfy\n|G({a1, . . . , as} \\ {ai})| = (1 \u00b1 \u00011\/4)s\u22121ds\u221212 m. (3.4)\nSince the right-hand side of (3.4) is at least \u00011\/4m, by Fact A.1, all but at most s\u00d7 m\u00d7\n\u00011\/4ms\u22121 \u0002 \u00011\/8ms s-tuples (a1, . . . , as) satisfy that the graph\nG\n[\ns\u22c3\ni=1\nG({a1, . . . , as} \\ {ai})\n]\nis\n(\n\u00011\/2, d2\n)\n-regular. (3.5)\nConsequently, by Fact A.7(1), we have\n|{(L1, . . . , Ls) \u2208 Ch,s(G) : (a1, . . . , as) \u2208 L1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Ls}|\n=\n(\n1 \u00b1 \u00011\/2s+2) s\u220f\ni=1\n(\nd\n(h\u22121)(i\u22121)\n2\n(\n1 \u00b1 \u00011\/4)s\u22121ds\u221212 m\nh\u2212 1\n)\n=\n(\n1 \u00b1 \u00011\/2s+3)d(h2\u22121)( s2 )2 ms(h\u22121)\/((h\u2212 1)!)s.\nNow we use double counting and Claims 3.1 and 3.2 to finish the proof.\nProof of Theorem 1.3. In Claim 3.1, we proved that the summation of the number\nof cliques in H[L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Ls] over all complete s-tuples of h-subsets (L1, . . . , Ls) is\n(1 \u00b1 h(\u03b4))dh2( s2 )2 d(\ns\n3 )\n3 h\nsmhs\/(h!)s.\nIn Claim 3.2, we proved that for all but at most \u00011\/8ms complete s-tuples (a1, . . . , as) \u2208\nV1 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7 Vs, the number of complete s-tuples of h-subsets (L1, . . . , Ls) such that ai \u2208 Li\nis (1 \u00b1 \u00011\/2s+3 )d(h2\u22121)( s2 )2 m(h\u22121)s\/((h\u2212 1)!)s.\nCombining these two claims and the fact that \u0001 \u000b \u03b4, d2, d3, we obtain\n|Ks(H)| \u0002 (1 + h(\u03b4))d\nh2( s2 )\n2 d\n( s3 )\n3 h\nsmhs\/(h!)s(\n1 \u2212 \u00011\/2s+3)d(h2\u22121)( s2 )2 ms(h\u22121)\/((h\u2212 1)!)s + \u0001\n1\/8ms\n\u0002 (1 + 2h(\u03b4))d(\ns\n2 )\n2 d\n( s3 )\n3 m\ns,\nand\n|Ks(H)| \u0001 (1 \u2212 h(\u03b4))d\nh2( s2 )\n2 d\n( s3 )\n3 h\nsmhs\/(h!)s \u2212 \u00011\/8ms( m\nh\u22121\n)s\n(1 + \u00011\/2\ns+3\n)d\n(h2\u22121)( s2 )\n2 m\ns(h\u22121)\/((h\u2212 1)!)s\n\u0001 (1 \u2212 2h(\u03b4))d( s2 )2 d(\ns\n3 )\n3 m\ns.\nThis completes the proof.\nCounting Small Cliques in 3-uniform Hypergraphs 379\n4. Proof of Theorem 1.5\nIt follows from Section 3 that the main task is to prove Theorem 1.5. In order to do so, we\napply an equivalent condition for (\u03b4, d, 1)-regularity of 3-uniform hypergraphs when the\nunderlying graph is complete. The corresponding equivalence was proved by Kohayakawa,\nRo\u00a8dl and Skokan in [6]. Before stating this result, we introduce a definition.\nDefinition 8. Let H0 be a 3-partite 3-uniform hypergraph with partition U = U1 \u222aU2 \u222a\nU3. We define the density den(H0) of H0 by\nden(H0) = |H0||U1||U2||U3| ,\nwhere |H0| is the number of edges in H0. We also denote by com(H0) the number of\ncopies of K (3)2,2,2 in H0.\nNow we are ready to state the result from [6].\nLemma 4.1. Let G0 be a complete 3-partite graph and H0 be a 3-partite 3-uniform hyper-\ngraph with the same partition U = U1 \u222aU2 \u222aU3, where |Ui| = n for 1 \u0002 i \u0002 3. If\nden(H0) = d, then the following properties are equivalent:\n(1) H0 is (\u03b4, d, 1)-regular,\n(2) com(H0) = (1 \u00b1 \u03b4\u2032)d8n6\/8.\nThe equivalence of properties (1) and (2) is understood in the following sense. For two\nproperties P = P(\u03b4) and P \u2032 = P \u2032(\u03b4\u2032), \u2018P \u21d2 P \u2032\u2019 means that for every \u03b4\u2032 > 0 there is a \u03b4 > 0\nso that any 3-uniform hypergraph H0 satisfying P(\u03b4) must also satisfy P \u2032(\u03b4\u2032), provided\nn > M0(\u03b4\n\u2032).\nBy Lemma 4.1, to prove Theorem 1.5, it is sufficient to show the following theorem.\nTheorem 4.2. There exists a positive function f(\u03b4) with the property f(\u03b4) \u2192 0 as \u03b4 \u2192 0\nsuch that the following statement holds.\nFor all but at most f(\u03b4)\n\u220fs\ni=1(\nMi\nh\n) s-tuples (L1, L2, . . . , Ls) \u2208 Ch,s(G), the induced subhy-\npergraph H[\u222asi=1Li] satisfies these two properties:\n(P1) den(H[Li \u222a Lj \u222a Lk]) = (1 \u00b1 f(\u03b4))d3 for every {i, j, k} \u2208 [s]3, and\n(P2) com(H[Li \u222a Lj \u222a Lk]) = (1 \u00b1 f(\u03b4))d83h6\/8 for every {i, j, k} \u2208 [s]3.\nIn order to prove this theorem, for t = 3, 4, . . . , s, we will introduce statements Dent(ppp)\nregarding the \u2018density\u2019 of subhypergraphs of H and statements Comt(ppp) regarding the\nnumber of copies of K (3)2,2,2 in subhypergraphs of H. These statements will be proved\nby induction on t. Dens(ppp) and Coms(ppp) will then imply conditions (P1) and (P2) of\nTheorem 4.2.\n380 Y. Peng, V. Ro\u00a8dl and J. Skokan\nWe start with some definitions. Set\nMp = d\nh(p\u22121)\n2 m,\nM+p =\n(\n1 + \u00011\/4\n)h(p\u22121)\nMp,\nM\u2212p =\n(\n1 \u2212 \u00011\/4)h(p\u22121)Mp.\nDefinition 9. For 1 \u0002 t \u0002 s, we call a complete t-tuple (see Definition 7) of h-subsets\n(L1, . . . , Lt) good if\nM\u2212p+1 \u0002 |G(L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Lp) \u2229 Vi| \u0002M+p+1 (4.1)\nfor every 1 \u0002 p \u0002 t and p+ 1 \u0002 i \u0002 s.\nRemark 3. All but \u00011\/2\nt+1 \u220ft\np=1(\nMp\nh\n) complete t-tuples of h-subsets (L1, . . . , Lt) are good\n(cf. Fact A.7(2)).\nLet t, 3 \u0002 t \u0002 s, be given and let (L1, . . . , Lt) be a good t-tuple of h-subsets. For a\ntriple (Lp1 , Lp2 , Lp3 ), 1 \u0002 p1 < p2 < p3 \u0002 t, we define the following edge-extension property\nEEPt(p1, p2, p3) and C4-extension property C4EPt(p1, p2, p3) regarding the density of\nsubhypergraphs of H and the number of copies of K (3)2,2,2 in subhypergraphs of H,\nrespectively.\nEEPt(p1, p2, p3). All but at most \u03b4\n1\/4t h2 edges e = {x, y} in G[Lp2 \u222a Lp3 ] satisfy\n|H(e) \u2229 Lp1 | = (1 \u00b1 4\u03b4)d3h.\nObserve that a triple (Lp1 , Lp2 , Lp3 ), where 1 \u0002 p1 < p2 < p3 \u0002 t, having property\nEEPt(p1, p2, p3) implies that the induced subhypergraph H[Lp1 \u222a Lp2 \u222a Lp3 ] has density\nabout d3. The second property regards the number of copies of K\n(3)\n2,2,2 in the hypergraph\nH[Lp1 \u222a Lp2 \u222a Lp3 ].\nC4EPt(p1, p2, p3). All but at most \u03b4\n1\/4t+5h4\/4 four-cycles C4 in G[Lp2 \u222a Lp3 ] satisfy\n|H(C4) \u2229 Lp1 | =\n(\n1 \u00b1 \u03b41\/46)d43h.\nHere, we view C4 as a set of four 2-subsets. Notice that a four-cycle C4 in G[Lp2 \u222a Lp3 ]\ntogether with any two vertices in H(C4) \u2229 Lp1 form a K (3)2,2,2 in H[Lp1 \u222a Lp2 \u222a Lp3 ]. Thus\nthe property C4EPt(p1, p2, p3) implies that the induced subhypergraph H[Lp1 \u222a Lp2 \u222a Lp3 ]\nhas the \u2018right\u2019 number of copies of K (3)2,2,2.\nNow we are ready to state Dent(ppp) and Comt(ppp).\nDent(ppp). All but at most \u03b4\n1\/4t+1\n\u220ft\np=1(\nMp\nh\n) good t-tuples of h-subsets (L1, . . . , Lt) satisfy\nthe following condition:\n(\u2217) all triples (Lp1 , Lp2 , Lp3 ), 1 \u0002 p1 < p2 < p3 \u0002 t, have the edge-extension property\nEEPt(p1, p2, p3).\nCounting Small Cliques in 3-uniform Hypergraphs 381\nComt(ppp). All but at most \u03b4\n1\/4t+7\n\u220ft\np=1(\nMp\nh\n) good t-tuples of h-subsets (L1, . . . , Lt) satisfy\nthe following condition:\n(\u2217) all triples (Lp1 , Lp2 , Lp3 ), 1 \u0002 p1 < p2 < p3 \u0002 t, have the C4-extension property\nC4EPt(p1, p2, p3).\nWe note that Dens(ppp) and Fact A.7(2) imply that for almost all complete s-tuples of\nh-subsets (L1, . . . , Ls), all triple systems H[Lp1 \u222a Lp2 \u222a Lp3 ], where 1 \u0002 p1 < p2 < p3 \u0002 s,\nhave density (1 \u00b1 \u03b4\u2032)d3, where \u03b4\u2032 \u2192 0 as \u03b4 \u2192 0. Therefore Dens(ppp) and Fact A.7(2)\nimply property (P1) of Theorem 4.2. Similarly, property (P2) of Theorem 4.2 follows from\nComs(ppp) and Fact A.7(2).\nHence, our goal is to prove Dens(ppp) and Coms(ppp). The proofs of these two statements\nare very similar. In this paper, we present only the proof of Coms(ppp). It can be easily\nmodified to prove Dens(ppp). Details of proving Dens(ppp) are given in [8] and we omit\nthem here.\nWe will prove Comt(ppp) for 3 \u0002 t \u0002 s by induction on t. Our induction scheme is quite\ncomplex and we need several other auxiliary statements defined in the following section.\n5. Induction scheme\nWhile proving Comt+1(ppp), our assumption will reflect the situation when a \u2018typical\u2019 good\nt-tuple of h-subsets (L1, L2, . . . , Lt) is chosen. Recall that G(\u22c3tp=1 Lp) is the neighbourhood\nof the set\n\u22c3t\np=1 Lp in the graph G. Clearly, G(\n\u22c3t\np=1 Lp) \u2282 Vt+1 \u222a \u00b7 \u00b7 \u00b7 \u222a Vs. We will consider\nthe graph G[\u22c3tp=1 Lp \u222a G(\u22c3tp=1 Lp)] and the hypergraph H[\u22c3tp=1 Lp \u222a G(\u22c3tp=1 Lp)]. For\nevery t+ 1 \u0002 f \u0002 s, set\nW\n(t)\nf = G(L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt) \u2229 Vf.\nNote that\nM\u2212t+1 \u0002\n\u2223\u2223W (t)f \u2223\u2223 \u0002M+t+1.\nWe regard sets L1, L2, . . . , Lt as the \u2018past\u2019 and sets W\n(t)\nt+1,W\n(t)\nt+2, . . . ,W\n(t)\ns as the \u2018future\u2019. There\nare four possible types of triple systems in the hypergraph H[\u22c3tp=1 Lp \u222a\u22c3sf=t+1W (t)f ].\n\u2018fff \u2019 type: H[W (t)f1 \u222aW (t)f2 \u222aW (t)f3 ], where t+ 1 \u0002 f1 < f2 < f3 \u0002 s, that is, hypergraphs\ninduced on the union of three sets from the future.\n\u2018pff \u2019 type: H[Lp \u222aW (t)f1 \u222aW (t)f2 ], where 1 \u0002 p \u0002 t and t+ 1 \u0002 f1 < f2 \u0002 s, that is, hyper-\ngraphs induced on the union of three sets one of which is from the past and two are\nfrom the future.\n\u2018ppf \u2019 type: H[Lp1 \u222a Lp2 \u222aW (t)f ], where 1 \u0002 p1 < p2 \u0002 t and t+ 1 \u0002 f \u0002 s, that is, hyper-\ngraphs induced on the union of three sets two of which are from the past and one is\nfrom the future.\n\u2018ppp\u2019 type: H[Lp1 \u222a Lp2 \u222a Lp3 ], where 1 \u0002 p1 < p2 < p3 \u0002 t, that is, hypergraphs induced\non the union of three sets from the past.\nFor the \u2018fff \u2019 type triple systems, we are interested in their regularity. For the remaining\nthree types of triple systems, we are interested in the number of copies of K (3)2,2,2 in them. To\n382 Y. Peng, V. Ro\u00a8dl and J. Skokan\ndeal with this situation we are going to use assertion Comt(ppp) together with assertions\nRegt(fff ), Comt(pff ), Comt(ppf ) formulated below.\nFor 2 \u0002 p \u0002 t, we set\nr1 = r\nrp =\n{\n2rp\u22121d3h2\n\u03b41\/2\u00d74p\u22121d3\nif 2d3h2 < \u03b4\n1\/2\u00d74p\u22121d3,\nrp\u22121 otherwise.\nNow we formulate Regt(fff ).\nRegt(fff). All but \u0001\n1\/24\u00d74t\u22121 \u220ft\np=1(\nMp\nh\n) good t-tuples of h-subsets (L1, . . . , Lt) satisfy the\nfollowing conditions:\n(1) the induced subgraph G[G(L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt)] is (\u00011\/2, d2)-regular,\n(2) the induced subhypergraph H[G(L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt)] is (\u03b41\/4t , d3, rt)-regular with respect\nto G[G(L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt)].\nBefore stating Comt(pff ) we need one related definition. For a given t, 1 \u0002 t \u0002 s\u2212 2, and\na triple (Lp,W\n(t)\nf1\n,W\n(t)\nf2\n), where 1 \u0002 p \u0002 t and t+ 1 \u0002 f1 < f2 \u0002 s, we define the following\nC4-extension property.\nC4EPt(p, f1, f2). All but at most \u03b4\n1\/4t+5d42M\n4\nt+1\/4 four-cycles C4 in G[W (t)f1 \u222aW (t)f2 ] satisfy\n|H(C4) \u2229 Lp| = (1 \u00b1 \u03b41\/46)d43h. (5.1)\nNote that a triple (Lp,W\n(t)\nf1\n,W\n(t)\nf2\n) possessing property C4EPt(p, f1, f2) implies that the\ninduced subhypergraph H[Lp \u222aW (t)f1 \u222aW (t)f2 ] has the \u2018right\u2019 number of copies of K (3)2,2,2.\nNow we are ready to state Comt(pff ).\nComt(pff). All but at most \u03b4\n1\/4t+7\n\u220ft\np=1(\nMp\nh\n) good t-tuples of h-subsets (L1, . . . , Lt) satisfy\nthe following condition:\n(\u2217) all triples (Lp,W (t)f1 ,W (t)f2 ), where 1 \u0002 p \u0002 t and t+ 1 \u0002 f1 < f2 \u0002 s, possess\nC4EPt(p, f1, f2).\nSimilarly, we introduce assertion Comt(ppf ). First, for a given t, 2 \u0002 t \u0002 s\u2212 1, and a\ntriple (Lp1 , Lp2 ,W\n(t)\nf ), where 1 \u0002 p1 < p2 \u0002 t and t+ 1 \u0002 f \u0002 s, we define the following\nC4-extension property.\nC4EPt(p1, p2, f). All but at most \u03b4\n1\/4t+5h2M2t+1\/4 four-cycles C4 in G[Lp2 \u222aW (t)f ] satisfy\n|H(C4) \u2229 Lp1 | =\n(\n1 \u00b1 \u03b41\/46)d43h. (5.2)\nCounting Small Cliques in 3-uniform Hypergraphs 383\nReg1(fff ), Com1(pff )\ufe38 \ufe37\ufe37 \ufe38\n(i), (iii)\n(v)\u2212\u2212\u2212\u2212\u2212\u2192 Com2(ppf ) (vii)\u2212\u2212\u2212\u2212\u2212\u2192 Com3(ppp)\n\uf8e6\uf8e6\uf8e6\u0017(ii), (iv) (vi)\n\uf8e6\uf8e6\uf8e6\u0017 (viii)\n\uf8e6\uf8e6\uf8e6\u0017\nReg2(fff ), Com2(pff )\n(vi)\u2212\u2212\u2212\u2212\u2212\u2192 Com3(ppf ) (viii)\u2212\u2212\u2212\u2212\u2212\u2192 Com4(ppp)\uf8e6\uf8e6\uf8e6\u0017(ii), (iv) (vi)\n\uf8e6\uf8e6\uf8e6\u0017 (viii)\n\uf8e6\uf8e6\uf8e6\u0017\n...\n...\n...\uf8e6\uf8e6\uf8e6\u0017(ii), (iv) (vi)\n\uf8e6\uf8e6\uf8e6\u0017 (viii)\n\uf8e6\uf8e6\uf8e6\u0017\nRegs\u22123(fff ), Coms\u22123(pff )\n(vi)\u2212\u2212\u2212\u2212\u2212\u2192 Coms\u22122(ppf ) (viii)\u2212\u2212\u2212\u2212\u2212\u2192 Coms\u22121(ppp)\uf8e6\uf8e6\uf8e6\u0017(iv) (vi)\n\uf8e6\uf8e6\uf8e6\u0017 (viii)\n\uf8e6\uf8e6\uf8e6\u0017\nComs\u22122(pff )\n(vi)\u2212\u2212\u2212\u2212\u2212\u2192 Coms\u22121(ppf ) (viii)\u2212\u2212\u2212\u2212\u2212\u2192 Coms(ppp)\nFigure 5.1.\nObserve that a triple (Lp1 , Lp2 ,W\n(t)\nf ) having property C4EPt(p1, p2, f) implies that the\ninduced subhypergraph H[Lp1 \u222a Lp2 \u222aW (t)f ] has the \u2018right\u2019 number of copies of K (3)2,2,2.\nThen, we state Comt(ppf ) as follows.\nComt(ppf). All but at most \u03b4\n1\/4t+7\n\u220ft\np=1(\nMp\nh\n) good t-tuples of h-subsets (L1, . . . , Lt) satisfy\nthe following condition:\n(\u2217) all triples (Lp1 , Lp2 ,W (t)f ), where 1 \u0002 p1 < p2 \u0002 t and t+ 1 \u0002 f \u0002 s, possess property\nC4EPt(p1, p2, f).\nIn sections to come, we are going to prove the following statements.\n(i) Statement Reg1(fff ) is true.\n(ii) Implication Regt(fff )\u21d2 Regt+1(fff ) is true for every t \u2208 [s\u2212 4].\n(iii) Statement Com1(pff ) is true.\n(iv) Implication Regt(fff ) \u2227 Comt(pff ) \u21d2 Comt+1(pff ) is true for every t \u2208 [s\u2212 3].\n(v) Implication Com1(pff ) \u21d2 Com2(ppf ) is true.\n(vi) Implication Comt(pff )\u2227 Comt(ppf )\u21d2 Comt+1(ppf ) is true for every t \u2208 [s\u2212 2]\\{1}.\n(vii) Implication Com2(ppf ) \u21d2 Com3(ppp) is true.\n(viii) Implication Comt(ppf ) \u2227 Comt(ppp) \u21d2 Comt+1(ppp) is true for every t \u2208 [s\u2212 1] \\\n{1, 2}.\nFrom (i)\u2013(viii), one may deduce by induction (see Figure 5.1) that Comt(ppp) holds for\nevery t, 3 \u0002 t \u0002 s.\nStatement (i) is verified in the next section and Section 7 contains the proof of (ii).\nSection 8 shows (iii) and the proof of (iv) is given in Section 9. Implications (v) and (vi)\nare deduced in Section 10 and implications (vii) and (viii) in Section 11.\n384 Y. Peng, V. Ro\u00a8dl and J. Skokan\n6. Proof of Reg1(fff)\nThe proof is based on Claim 6.1 and Claim 6.2 which concern conditions (1) and (2) in\nReg1(fff ), respectively.\nClaim 6.1. G[G(L1)] is (\u00011\/2, d2)-regular for all good h-subsets L1 \u2282 V1.\nProof of Claim 6.1. Let L1 \u2282 V1 be a good h-subset. By (4.1) and (1 \u2212 \u00011\/4)hdh2m \u0001 \u00011\/4m\n(recall that \u0001 \u000b d2, 1\/h), Fact A.1 implies that G[W (1)f1 \u222aW (1)f2 ] is (\u00011\/2, d2)-regular for every\nf1, f2, 2 \u0002 f1 < f2 \u0002 s.\nThe proof of Reg1(fff ) will be completed by proving the following claim.\nClaim 6.2. Fix any {f1, f2, f3}, where 2 \u0002 f1 < f2 < f3 \u0002 s. Then, all but at most 2\u00011\/12(mh )\ngood h-subsets L1 \u2282 V1 are such that H[W (1)f1 \u222aW (1)f2 \u222aW (1)f3 ] is (\u03b41\/4, d3, r1)-regular with\nrespect to G[W (1)f1 \u222aW (1)f2 \u222aW (1)f3 ].\nIndeed, combining Claims 6.1 and 6.2, we obtain that all but 2( s\u22121\n3\n)\u00011\/12(m\nh\n) \u0002 \u00011\/24(m\nh\n)\ngood h-subsets L1 \u2282 V1 satisfy conditions (1) and (2) in Reg1(fff ).\nProof of Claim 6.2. We prove this claim by contradiction. Fix any f1, f2, f3, where\n2 \u0002 f1 < f2 < f3 \u0002 s. Suppose that there exist \u00011\/12(mh ) good h-subsets Li \u2282 V1 satisfying\nthe following condition:\n(\u2217) there exist subgraphs Qi1, . . . ,Qir1 of G[G(Li) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )] such that\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0001 \u03b41\/4\u2223\u2223K3(G[G(Li) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )])\u2223\u2223, (6.1)\nbut \u2223\u2223\u2223\u2223H \u2229 r1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 > (1 + \u03b41\/4)d3\n\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223. (6.2)\nWe will derive a contradiction by applying the fact that H is (\u03b4, d3, r)-regular with\nrespect to G. We distinguish two cases.\nCase 1. Suppose that 2d3h2 \/\u03b4\n1\/2d3 \u0001 1. Then we consider a good h-subset L \u2282 V1 for which\n(\u2217) holds. In other words, there exist r1 subgraphs Q1, . . . ,Qr1 of G[G(L) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )]\nsuch that \u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223 \u0001 \u03b41\/4|K3(G[G(L) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )])|, (6.3)\nbut \u2223\u2223\u2223\u2223H \u2229 r1\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223 > (1 + \u03b41\/4)d3\n\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223. (6.4)\nCounting Small Cliques in 3-uniform Hypergraphs 385\nIn order to apply the (\u03b4, d3, r)-regularity of H (note that r1 = r in this case), we are going\nto prove that \u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223 \u0001 \u03b4|K3(G[Vf1 \u222a Vf2 \u222a Vf3 ])|. (6.5)\nOwing to (4.1), the (\u00011\/2, d2)-regularity of G[G(L) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )], Fact A.9, and\n2d3h2 \/\u03b4\n1\/2d3 \u0001 1, we have\n|K3(G[G(L) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )])| \u0001\n(\n1 \u2212 \u00011\/2)3(1 \u2212 2\u00011\/2)d32(dh2m(1 \u2212 \u00011\/4)h)3\n\u0001 1\n2\n\u03b41\/2d3 \u00d7 (1 \u2212 \u00011\/4)3h+4d32m3. (6.6)\nCombining the above inequality with (6.3) and (1.2), we obtain\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223 \u0001 \u03b4 \u00d7 ((1 + \u0001)3 + 4\u0001\/d32)d32m3.\nFact A.9 implies that\n|K3(G[Vf1 \u222a Vf2 \u222a Vf3 ])| \u0002\n(\n(1 + \u0001)3 + 4\u0001\/d32\n)\nd32m\n3,\nand therefore \u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223 \u0001 \u03b4|K3(G[Vf1 \u222a Vf2 \u222a Vf3 ])|.\nSince H is (\u03b4, d3, r)-regular with respect to G and r1 = r in this case, we have\u2223\u2223\u2223\u2223H \u2229 r1\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223 \u0002 (1 + \u03b4)d3\n\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223. (6.7)\nThis is a contradiction to (6.4) since \u03b4 \u000b 1.\nCase 2. Suppose that 2d3h2 \/\u03b4\n1\/2d3 < 1. Observe that in this case inequality (6.6) and\nconsequently inequality (6.5) cannot be guaranteed. To overcome this problem, we will\nuse the existence of subgraphs Qi1, . . . ,Qir1 (cf. (\u2217)) for a family of r\u2032\u2032 = r\/r1 h-subsets Li\nsatisfying condition (\u2217) and prove an inequality similar to (6.5) (cf. inequality (6.9) below).\nThen we apply the (\u03b4, d3, r)-regularity of H.\nWe define an auxiliary graph D with V (D) = [V1]h and\nE(D) = {{L,L\u2032} : |G(L \u222a L\u2032) \u2229 Vf | \u000f= (1 \u00b1 \u00011\/4)d2h2 m for some f \u2208 {2, . . . , s}}.\nBy Fact A.6, all but at most \u00011\/4(m\nh\n)2 pairs (L,L\u2032), where L and L\u2032 are h-subsets of V1,\nsatisfy\n|G(L \u222a L\u2032) \u2229 Vf | = (1 \u00b1 \u00011\/4)d2h2 m\nfor every 2 \u0002 f \u0002 s. Consequently, |E(D)| \u0002 \u00011\/4(m\nh\n)2.\nWe are going to apply Fact A.10 to the graph D with parameters n = (m\nh\n), \u03c3 = \u00011\/4, c =\n\u00011\/12, and t = (1\/d2)\n3h. Set W = {L : L satisfies condition (\u2217)} and observe that |W | \u0001 cn\nby the assumption.\n386 Y. Peng, V. Ro\u00a8dl and J. Skokan\nUsing Fact A.10, we obtain the existence of r\u2032\u2032 = \u00b5(1\/d2)3h < t subsets Li \u2208 W , where\n\u00b5 = \u03b41\/2d3\/2 , such that for 2 \u0002 f \u0002 s and 1 \u0002 i < j \u0002 r\u2032\u2032,\u2223\u2223G(Li \u222a Lj) \u2229 Vf\u2223\u2223 = (1 \u00b1 \u00011\/4)d2h2 m. (6.8)\nNote that r\u2032\u2032 > 1 since 2d3h2 \/\u03b41\/2d3 < 1.\nIn order to apply the (\u03b4, d3, r)-regularity of H (note that r1 \u00d7 r\u2032\u2032 = r), we are going to\nprove that \u2223\u2223\u2223\u2223 r\n\u2032\u2032\u22c3\ni=1\nr1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0001 \u03b4|K3(G[Vf1 \u222a Vf2 \u222a Vf3 ])|. (6.9)\nWe apply the inclusion\u2013exclusion principle and obtain\u2223\u2223\u2223\u2223 r\n\u2032\u2032\u22c3\ni=1\nr1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0001 r\n\u2032\u2032\u2211\ni=1\n\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223\u2212 \u2211\n1\u0001i<j\u0001r\u2032\u2032\n\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qit) \u2229 r1\u22c3\nt=1\nK3(Qjt)\n\u2223\u2223\u2223\u2223. (6.10)\nNow we estimate both sums on the right-hand side of (6.10). Owing to (4.1), the (\u00011\/2, d2)-\nregularity of G[G(Li) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )], and Fact A.9, we have\u2223\u2223K3(G[G(Li) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )])\u2223\u2223 \u0001 (1 \u2212 \u00011\/2)3(1 \u2212 2\u00011\/2)d32((1 \u2212 \u00011\/4)hdh2m)3\n\u0001\n(\n1 \u2212 \u00011\/4)3h+4d3h+32 m3.\nWe apply this to (6.1) and obtain\nr\u2032\u2032\u2211\ni=1\n\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0001 r\u2032\u2032 \u00d7 \u03b41\/4(1 \u2212 \u00011\/4)3h+4d3h+32 m3. (6.11)\nFurthermore, by (6.8), the (\u00011\/2, d2)-regularity of G[G(Li \u222a Lj)], and Fact A.9, we have\u2223\u2223\u2223\u2223 r\n\u2032\u22c3\nt=1\nK3(Qit) \u2229 r\n\u2032\u22c3\nt=1\nK3(Qjt)\n\u2223\u2223\u2223\u2223 \u0002 ((1 + \u00011\/2)3 + 4\u00011\/2\/d32)d32((1 + \u00011\/4)d2h2 m)3,\nand consequently\n\u2211\n1\u0001i<j\u0001r\u2032\u2032\n\u2223\u2223\u2223\u2223 r\n\u2032\u22c3\nt=1\nK3(Qit) \u2229 r\n\u2032\u22c3\nt=1\nK3(Qjt)\n\u2223\u2223\u2223\u2223 \u0002\n(\nr\u2032\u2032\n2\n)\n\u00d7 2d6h+32 m3 = (r\u2032\u2032)2d6h+32 m3. (6.12)\nCombining (6.11), (6.12,) and (6.10) yields\u2223\u2223\u2223\u2223 r\n\u2032\u2032\u22c3\ni=1\nr1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0001 r\u2032\u2032 \u00d7 \u03b41\/4(1 \u2212 \u00011\/4)3h+4d3h+32 m3 \u2212 (r\u2032\u2032)2d6h+32 m3.\nSince r\u2032\u2032 = \u00b5(1\/d2)3h, \u00b5 = \u03b41\/2d3\/2, and (1.2), we get\u2223\u2223\u2223\u2223 r\n\u2032\u2032\u22c3\ni=1\nr1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0001 \u00b5(1\/d2)3h \u00d7 \u03b41\/4(1 \u2212 \u00011\/4)3h+4d3h+32 m3 \u2212 \u00b52(1\/d2)6hd6h+32 m3\n\u0001 \u03b4\n(\n(1 + \u0001)3 + 4\u0001\/d32\n)\nd32m\n3.\nCounting Small Cliques in 3-uniform Hypergraphs 387\nThe last inequality follows from \u0001 \u000b 1\/h, d2, \u03b4 and \u03b4 \u000b 1. Fact A.9 implies that\n|K3(G[Vf1 \u222a Vf2 \u222a Vf3 ])| \u0002 d32m3((1 + \u0001)3 + 4\u0001\/d32); therefore,\u2223\u2223\u2223\u2223 r\n\u2032\u2032\u22c3\ni=1\nr1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0001 \u03b4|K3(G[Vf1 \u222a Vf2 \u222a Vf3 ])|.\nSince H is (\u03b4, d3, r)-regular with respect to G, we have\u2223\u2223\u2223\u2223H \u2229 r\n\u2032\u2032\u22c3\ni=1\nr1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0002 (1 + \u03b4)d3\n\u2223\u2223\u2223\u2223 r\n\u2032\u2032\u22c3\ni=1\nr1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0002 (1 + \u03b4)d3 r\n\u2032\u2032\u2211\ni=1\n\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223. (6.13)\nIt also follows from (6.11), (6.12), \u0001 \u000b 1\/h and \u03b4 \u000b 1 that\u2211\n1\u0001i<j\u0001r\u2032\u2032\n\u2223\u2223\u22c3r1\nt=1 K3\n(Qit) \u2229\u22c3r1t=1 K3(Qjt)\u2223\u2223\u2211r\u2032\u2032\ni=1\n\u2223\u2223\u22c3r1\nt=1 K3\n(Qit)\u2223\u2223 \u0002\n2\n3\n\u03b41\/4d3. (6.14)\nNow we will obtain a lower bound on |H \u2229\u22c3r\u2032\u2032i=1\u22c3r1t=1 K3(Qit)| and derive a contradiction\nto (6.13). Applying (6.2) and the inclusion\u2013exclusion principle, we get\u2223\u2223\u2223\u2223H \u2229 r\n\u2032\u2032\u22c3\ni=1\nr1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0001 (1 + \u03b41\/4)d3 r\n\u2032\u2032\u2211\ni=1\n\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223\n\u2212 \u2211\n1\u0001i<j\u0001r\u2032\u2032\n\u2223\u2223\u2223\u2223H \u2229 r1\u22c3\nt=1\nK3(Qit) \u2229 r1\u22c3\nt=1\nK3(Qjt)\n\u2223\u2223\u2223\u2223.\nSince |H \u2229\u22c3r1t=1 K3(Qit) \u2229\u22c3r1t=1 K3(Qjt )| \u0002 |\u22c3r1t=1 K3(Qit) \u2229\u22c3r1t=1 K3(Qjt )|, by applying\n(6.14), we have \u2223\u2223\u2223\u2223H \u2229 r\n\u2032\u2032\u22c3\ni=1\nr1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223 \u0001\n(\n1 +\n\u03b41\/4\n3\n)\nd3\nr\u2032\u2032\u2211\ni=1\n\u2223\u2223\u2223\u2223 r1\u22c3\nt=1\nK3(Qit)\n\u2223\u2223\u2223\u2223.\nThis contradicts (6.13) because \u03b4 \u000b 1.\nSimilarly, we can prove that at most \u00011\/12(m\nh\n) good h-subsets L1 \u2282 V1 satisfy (6.1) and\u2223\u2223\u2223\u2223H \u2229 r\n\u2032\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223 < (1 \u2212 \u03b41\/4)d3\n\u2223\u2223\u2223\u2223 r\n\u2032\u22c3\nt=1\nK3(Qt)\n\u2223\u2223\u2223\u2223.\nTherefore, we proved that for any fixed 2 \u0002 f1 < f2 < f3 \u0002 s, all but 2\u00011\/12(mh ) good\nh-subsets L1 \u2282 V1 are such that H[G(L1) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )] is (\u03b41\/4, d3, r1)-regular with\nrespect to G[G(L1) \u2229 (Vf1 \u222a Vf2 \u222a Vf3 )]. This completes the proof.\n7. Proof of Regt(fff) \u21d2 Regt+1(fff)\nBefore proving implication (ii), we introduce one additional definition.\nDefinition 10. For a good t-tuple of h-subsets (L1, . . . , Lt), we say that an h-subset Lt+1 \u2282\nW\n(t)\nt+1 is good for (L1, . . . , Lt) (sometimes we simply say Lt+1 is good) if\nM\u2212t+2 \u0002 |W (t+1)f | \u0002M+t+2\nfor every f, t+ 2 \u0002 f \u0002 s.\n388 Y. Peng, V. Ro\u00a8dl and J. Skokan\nRemark 4. A (t+ 1)-tuple of h-subsets (L1, . . . , Lt+1) is good if and only if (L1, . . . , Lt) is\ngood and Lt+1 is good for (L1, . . . , Lt).\nThe proof of implication (ii) is a consequence of the following lemma.\nLemma 7.1. If (L1, . . . , Lt) is a good t-tuple of h-subsets satisfying conditions (1) and (2)\nin Regt(fff ), then all but at most \u0001\n1\/24\u00d72(M\n+\nt+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that\n(L1, . . . , Lt+1) satisfies conditions (1) and (2) in Regt+1(fff ).\nSketch of proof. Since a good t-tuple of h-subsets (L1, . . . , Lt) satisfies conditions (1)\nand (2) in Regt(fff ), we know that the (s\u2212 t)-partite graph G[G(L1 \u222a L2 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt)] is\n(\u00011\/2, d2)-regular and the (s\u2212 t)-partite 3-uniform hypergraph H[G(L1 \u222a L2 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt)] is\n(\u03b41\/4\nt\n, d3, rt)-regular. This enables us to select Lt+1 in a similar situation as for L1. Replacing\n\u0001 by \u00011\/2, \u03b4 by \u03b41\/4\nt\u22121\n, m by Mt+1(1 \u00b1 \u00011\/4)ht, and r by rt, we can prove Lemma 7.1 in the\nsame way as we proved Reg1(fff ).\nNow we prove implication Regt(fff ) \u21d2 Regt+1(fff ) by applying Lemma 7.1.\nProof. Let (L1, . . . , Lt+1) be a good (t+ 1)-tuple of h-subsets which does not satisfy\nconditions (1) and (2) in Regt+1(fff ). We distinguish two cases.\nCase 1. (L1, . . . , Lt) satisfies conditions (1) and (2) in Regt(fff ), but Lt+1 is such that\n(L1, . . . , Lt+1) violates either condition (1) or (2) in Regt+1(fff ). By Lemma 7.1, there are\nat most \u00011\/24\u00d72(M\n+\nt+1\nh\n) choices for such Lt+1.\nFrom Fact A.7(3) we know that there are at most (1 + 2\u00011\/2\nt+1\n)\n\u220ft\np=1(\nMp\nh\n) good t-tuples\n(L1, . . . , Lt). Consequently, the number of (t+ 1)-tuples (L1, . . . , Lt+1) as described above\nis at most\n(\n1 + 2\u00011\/2\nt+1) t\u220f\np=1\n(\nMp\nh\n)\n\u00d7 \u00011\/24\u00d72\n(\nM+t+1\nh\n)\n\u0002 2\u00011\/24\u00d72\nt+1\u220f\np=1\n(\nM+p\nh\n)\n(7.1)\nsince \u0001 \u000b 1.\nCase 2. (L1, . . . , Lt) violates either condition (1) or (2) in Regt(fff ). By Regt(fff ), there\nare at most \u00011\/24\u00d74t\u22121\n\u220ft\np=1(\nMp\nh\n) such good t-tuples. For each such (L1, . . . , Lt), there are at\nmost (\nM+t+1\nh\n) choices for Lt+1. Therefore, the number of (t+ 1)-tuples (L1, . . . , Lt+1) in this\ncase is at most\n\u00011\/24\u00d74t\u22121\nt\u220f\np=1\n(\nMp\nh\n)\n\u00d7\n(\nM+t+1\nh\n)\n< \u00011\/24\u00d74t\u22121\nt+1\u220f\np=1\n(\nM+p\nh\n)\n. (7.2)\nCombining (7.2) and (7.1), we obtain that all but at most\n(\n\u00011\/24\u00d74t\u22121 + 2\u00011\/24\u00d72\n) t+1\u220f\np=1\n(\nM+p\nh\n)\n\u0002 \u00011\/24\u00d74t\nt+1\u220f\np=1\n(\nMp\nh\n)\ngood (t+ 1)-tuples of h-subsets (L1, . . . , Lt+1) satisfy both conditions ((1) and (2)) in\nRegt+1(fff ).\nCounting Small Cliques in 3-uniform Hypergraphs 389\n8. Proof of Com1(pff)\nThe proof of Com1(pff ) will be completed by proving the following claim.\nClaim 8.1. Let f1, f2, where 2 \u0002 f1 < f2 \u0002 s, be fixed. Then all but at most \u03b41\/4\n6\n(m\nh\n) good\nh-subsets L1 \u2282 V1 satisfy the following: (5.1) holds for all but at most \u03b41\/46d4h+42 m4\/4 four-\ncycles C4 in G[W (1)f1 \u222aW (1)f2 ].\nIndeed, Claim 8.1 implies that all but at most ( s\u22121\n2\n)\u03b41\/4\n6\n(m\nh\n) \u0002 \u03b41\/47 (m\nh\n) good h-subsets\nL1 satisfy condition (\u2217) in Com1(pff ): for all but at most \u03b41\/46d4h+42 m4\/4 four-cycles C4 in\nG[W (1)f1 \u222aW (1)f2 ],\n|H(C4) \u2229 L1| = (1 \u00b1 \u03b41\/46)d43h\nholds for every f1, f2, 2 \u0002 f2 < f2 \u0002 s.\nTo prove Claim 8.1, we define an auxiliary bipartite graph \u0393 = (U1 \u222aU2, E), where U1\nconsists of all good h-subsets L1 \u2282 V1 and U2 consists of all four-cycles C4 in G[Vf1 \u222a Vf2 ].\nWe join L1 \u2208 U1 and C4 \u2208 U2 by an edge if and only if C4 \u2208 G[G(L1)] and (5.1) holds. Note\nthat (1 \u2212 \u00011\/4)(m\nh\n) \u0002 |U1| \u0002 (mh ) (cf. Fact A.5) and |U2| = (1 \u00b1 \u00011\/8)d42m4\/4 (cf. Fact A.8).\nThen, Claim 8.1 translates into showing that\ndeg\u0393(L1) \u0001\n\u2223\u2223{C4 : C4 \u2208 G[W (1)f1 \u222aW (1)f2 ]}\u2223\u2223\u2212 \u03b41\/46d4h+42 m4\/4\nfor all but at most \u03b41\/4\n6\n(m\nh\n) sets L1 \u2208 U1.\nBy (4.1), the (\u00011\/2, d)-regularity of G[W (1)f1 \u222aW (1)f2 ], Fact A.8, and \u0001 \u000b 1, we have\u2223\u2223{C4 : C4 \u2208 G[W (1)f1 \u222aW (1)f2 ]}\u2223\u2223 \u0002 (1 + \u00011\/25)d4h+42 m4\/4.\nConsequently, the proof of Claim 8.1 follows from the following claim.\nClaim 8.2. In the graph \u0393, all but at most \u03b41\/4\n6\n(m\nh\n) sets L1 in U1 satisfy\ndeg\u0393(L1) \u0001\n(\n1 + \u00011\/2\n5 \u2212 \u03b41\/46)d4h+42 m4\/4. (8.1)\nSince the proof of this claim requires additional claims and lemmas, we put it as a\nseparate subsection.\n8.1. Proof of Claim 8.2\nWe will state and prove three auxiliary statements first, then return to Claim 8.2.\nClaim 8.3. For every f1, f2, 2 \u0002 f1 < f2 \u0002 s, all but at most \u00011\/8d42m4 four-cycles C4 =\n{{x, y}, {y, x\u2032}, {x\u2032, y\u2032}, {y\u2032, x}} in G[Vf1 \u222a Vf2 ] satisfy(\n1 \u2212 \u00011\/4)4d42m \u0002 |G(x, x\u2032, y, y\u2032) \u2229 V1| \u0002 (1 + \u00011\/4)4d42m. (8.2)\n390 Y. Peng, V. Ro\u00a8dl and J. Skokan\nProof. Fix arbitrary f1, f2 so that 2 \u0002 f1 < f2 \u0002 s. It follows from Fact A.4 that all but\nat most 4\u00011\/2m2 pairs {x, x\u2032} \u2208 [Vf1 ]2 satisfy(\n1 \u2212 \u00011\/2)2d22m \u0002 |G(x, x\u2032) \u2229 V1| \u0002 (1 + \u00011\/2)2d22m. (8.3)\nConsider a pair {x, x\u2032} \u2208 [Vf1 ]2 satisfying (8.3). Since d22(1 \u2212 \u00011\/2)2 \u0010 \u00011\/4, G[G(x, x\u2032) \u2229\n(V1 \u222a Vf2 )] is (\u00011\/2, d2)-regular by Fact A.1. Consequently, Fact A.4 implies that all but at\nmost 4\u00011\/4 \u00d7 (1 + \u00011\/2)4d42m2 \u0002 6\u00011\/4d42m2 pairs of vertices y, y\u2032 \u2208 G(x, x\u2032) \u2229 Vf2 satisfy\n|G(x, x\u2032, y, y\u2032) \u2229 V1| = (1 \u00b1 \u00011\/4)2d22|G(x, x\u2032) \u2229 V1|. (8.4)\nCombining (8.3) and (8.4), we obtain that all but at most 4\u00011\/2m2 \u00d7 (m\n2\n) + (m\n2\n) \u00d7\n6\u00011\/4d42m\n2 \u0002 \u00011\/8d42m4 four-cycles C4 = {{x, y}, {y, x\u2032}, {x\u2032, y\u2032}, {y\u2032, x}} satisfy (8.2).\nLemma 8.4. For every f1, f2, 2 \u0002 f1 < f2 \u0002 s, all but at most \u03b41\/2\n10\nd42m\n4\/4 four-cycles\nC4 = {{x, y}, {y, x\u2032}, {x\u2032, y\u2032}, {y\u2032, x}} in G[Vf1 \u222a Vf2 ] satisfy both (8.2) and\n|H(C4) \u2229 V1| = (1 \u00b1 \u03b41\/210)d42d43m. (8.5)\nRecall that \u0001 \u000b d2, \u03b4 \u000b d3 (cf. (1.2)). The fact that \u0001 \u000b d2 allows to prove Claim 8.3 in\na standard way. The proof of Lemma 8.4 is, however, more complicated. This is because\nd, the density of the graph G, can be smaller than \u03b4 which measures the regularity of H.\nThe proof of this lemma is given in Section 8.2.\nThe following claim is a consequence of Lemma 8.4.\nClaim 8.5. In the graph \u0393, all but at most \u03b41\/2\n10\nd42m\n4\/4 four-cycles C4 in U2 satisfy\ndeg\u0393(C4) \u0001\n(\n1 \u2212 2e\u2212\u03b41\/210d43h)((1 \u2212 \u00011\/4)4d42m\nh\n)\n\u2212 \u00011\/4\n(\nm\nh\n)\n. (8.6)\nProof of Claim 8.5. Recall that in \u0393, U1 = [V1]\nh and U2 consists of all copies of C4 in\nG[Vf1 \u222a Vf2 ]. By Lemma 8.4, all but at most \u03b41\/210d42m4\/4 four-cycles C4 \u2208 U2 satisfy both\n(8.2) and (8.5). We will show that (8.6) holds for each such C4 = {{x, y}, {y, x\u2032}, {x\u2032, y\u2032},\n{y\u2032, x}}.\nSet MC4 = G(x, x\u2032, y, y\u2032) \u2229 V1 and NC4 = H(C4) \u2229 V1. Note that NC4 \u2282 MC4 . In view of\nthe definition of \u0393, to prove (8.6), we need to estimate the number of L \u2208 U1 for which\n||NC4 \u2229 L| \u2212 d43h| \u0002 \u03b41\/46d43h holds. To accomplish this, we use Chernoff\u2019s inequality for\nthe hypergeometric distribution [5].\nLet L be a random h-subset of MC4 and X = |NC4 \u2229 L| = |H(C4) \u2229 L|. Then X has the\nhypergeometric distribution with parameters |MC4 |, h, and |NC4 |.\nObserve that |MC4 | = (1 \u00b1 \u00011\/4)4d42m (cf. (8.2)), |NC4 | = (1 \u00b1 \u03b41\/210 )d42d43m (cf. (8.5)), and\nE(X) = |NC4 |h\/|MC4 | = (1 \u00b1 2\u03b41\/210 )d43h. Applying Chernoff\u2019s inequality, we get\nP\n(|X \u2212 d43h| > \u03b41\/46d43h) \u0002 P(|X \u2212 E(X)| > \u03b41\/46E(X)\/4) \u0002 2e\u2212\u03b41\/210d43h. (8.7)\nCounting Small Cliques in 3-uniform Hypergraphs 391\nBy the definition of \u0393, C4 and L are adjacent in \u0393 if and only if |X \u2212 d43h| \u0002 \u03b41\/46d43h.\nHence, (8.7) and Fact A.5 imply that\ndeg\u0393(C4) \u0001\n(\n1 \u2212 2e\u2212\u03b41\/210d43h)(|MC4 |\nh\n)\n\u2212 \u00011\/4\n(\nm\nh\n)\n\u0001\n(\n1 \u2212 2e\u2212\u03b41\/210d43h)((1 \u2212 \u00011\/4)4d42m\nh\n)\n\u2212 \u00011\/4\n(\nm\nh\n)\n.\nNow we are ready to prove Claim 8.2.\nProof of Claim 8.2. We first use Claim 8.5 to find a lower bound on the number of\nedges e(\u0393) of \u0393. Then, assuming Claim 8.2 is false, we derive an upper bound on e(\u0393).\nComparing these two bounds will yield a contradiction.\nBy Claim 8.5, we have\ne(\u0393) \u0001\n(\n1 \u2212 \u00011\/8 \u2212 \u03b41\/210)d42m4\/4\n\u00d7\n((\n1 \u2212 2e\u2212\u03b41\/210d43h)((1 \u2212 \u00011\/4)4d42m\nh\n)\n\u2212 \u00011\/4\n(\nm\nh\n))\n\u0001\n(\n1 \u2212 2\u03b41\/210)(m\nh\n)\nd4h+42 m\n4\/4. (8.8)\nThe last inequality follows from \u0001 \u000b \u03b4, d2 and the fact that 2e\u2212\u03b41\/210d3h \u0002 \u03b41\/210\/2 when\nh \u0010 1\/\u03b4.\nNow suppose that Claim 8.2 is not true, i.e., there exist more than \u03b41\/4\n6\n(m\nh\n) sets L1 \u2208 U1\nsuch that\ndeg\u0393(L1) <\n(\n1 + \u00011\/2\n5 \u2212 \u03b41\/46)d4h+42 m4\/4. (8.9)\nWe are going to derive a contradiction to (8.8).\nBy (4.1), the (\u00011\/2, d2)-regularity of G[G(L1)], and Fact A.8, we know that\ndeg\u0393(L1) \u0002\n(\n1 + \u00011\/4\n)4h(\n1 + \u00011\/2\n4)\nd4h+42 m\n4\/4. (8.10)\nfor every L1 \u2208 U1. Combining (8.9) and (8.10) yields\ne(\u0393) < \u03b41\/4\n6\n(\nm\nh\n)\n\u00d7 (1 + \u00011\/25 \u2212 \u03b41\/46)d4h+42 m4\/4\n+\n(\n1 \u2212 \u03b41\/46)(m\nh\n)\n\u00d7 (1 + \u00011\/4)4h(1 + \u00011\/24)d4h+42 m4\/4\n(S2)\n\u0002\n(\n1 \u2212 \u03b41\/211\/2)(m\nh\n)\nd4h+42 m\n4\/4.\nThis contradicts (8.8) since \u03b4 \u000b 1.\n8.2. Proof of Lemma 8.4\nIn order to verify Lemma 8.4, we need to show that all but at most \u03b41\/2\n10\nd42m\n4\/4 four-cycles\nsatisfy both (8.2) and (8.5). In Claim 8.3, we proved that (8.2) holds for all but at most\n392 Y. Peng, V. Ro\u00a8dl and J. Skokan\n\u00011\/4d42m\n4 four-cycles. Therefore, it suffices to show that (8.5) is true for all but at most\n(1\/2)\u03b41\/2\n10\nd42m\n4\/4 four-cycles C4 in G[Vf1 \u222a Vf2 ].\nTo this end, we construct a bipartite graph B0 = (U0 \u222aW0, E), where U0 = V1, W0\nconsists of all four-cycles C4 in G[Vf1 \u222a Vf2 ], and x \u2208 U0 and C4 \u2208 W0 are adjacent in B0\nif and only if C4 \u2282 H(x).\nObserve that |W0| = (1 \u00b1 \u00011\/8)d42m4\/4 (cf. Fact A.8). In order to prove Lemma 8.4, it is\nsufficient to show that all but at most (1\/2)\u03b41\/2\n10\nd42m\n4\/4 four-cycles C4 \u2208 W0 satisfy\ndegB0 (C4) =\n(\n1 \u00b1 \u03b41\/210)d42d43m.\nTo prove this, we will apply the following three lemmas.\nLemma 8.6. In the graph B0, all but at most \u03b41\/4m vertices x \u2208 U0 satisfy\ndegB0 (x) =\n(\n1 \u00b1 \u03b41\/25)d42d43|W0|. (8.11)\nLemma 8.7. In the graph B0, all but at most \u03b41\/24m2 pairs {x, x\u2032} \u2208 [U0]2 satisfy\ndegB0 (x, x\n\u2032) =\n(\n1 \u00b1 \u03b41\/27)d82d83|W0|. (8.12)\nThe proofs of these two lemmas are given in Sections 8.3 and 8.4. In addition to these\ntwo lemmas, we will also use the following result, which is a modification of an earlier\nresult of Duke, Lefmann and Ro\u00a8dl [3].\nLemma 8.8. Let \u03b4\u02dc, d be constants, 0 < \u03b4\u02dc, d < 1, and let B = (U \u222aW,E) be a bipartite\ngraph with |U| \u0001 1\/(d2\u03b4\u02dc). Denote by D the collection of all pairs {x, x\u2032} \u2208 [U]2 for which\neither (i) or (ii) below fails:\n(i) degB(x), degB(x\u2032) > (1 \u2212 \u03b4\u02dc)d|W |,\n(ii) degB(x, x\u2032) < (1 + \u03b4\u02dc)d2|W |.\nIf |D| < \u03b4\u02dc|U|2 and \u2211\n{x,x\u2032}\u2208D\ndegB(x, x\u2032) \u0002 \u03b4\u02dcd2|U|2|W |, (8.13)\nthen B is (\u03b4\u2032, d)-regular, where \u03b4\u2032 = (11\u03b4\u02dc)1\/5.\nAlthough Lemma 8.8 resembles Proposition 2.5 in [3], this proposition cannot be\napplied to our situation because it is designed for the case when d is larger than \u03b4\u02dc. In our\nsituation, we consider graph B0 and set\n\u03b4\u02dc = \u03b41\/2\n7\nand d = d42d\n4\n3.\nLet D0 be the collection of all pairs {x, x\u2032} \u2208 [U0]2 for which either (i) or (ii) fails (replace\nB by B0, and W by W0). By Lemma 8.6 and Lemma 8.7,\n|D0| \u0002 (\u03b41\/4 + \u03b41\/24)m2 \u0002 \u03b41\/25m2 \u0002 \u03b4\u02dcm2. (8.14)\nHere, owing to (1.2), we cannot rule out the situation when \u03b4\u02dc \u0001 d. The purpose of\nLemma 8.8 is to be applied to this situation.\nCounting Small Cliques in 3-uniform Hypergraphs 393\nThe proof of this lemma is a modification of the earlier proof of Duke, Lefmann and\nRo\u00a8dl\u2019s result (or an earlier similar result given in [1]) and it is given in Appendix B.\nProof of Lemma 8.4. We are going to apply Lemmas 8.6, 8.7, and 8.8 to the bipartite\ngraph B0 constructed at the beginning of this section. Let \u03b4\u02dc, d and D0 be defined as above.\nWe know that |D0| \u0002 \u03b4\u02dcm2 (see (8.14)). We will verify that\u2211\n{x, x\u2032}\u2208D0\ndegB(x, x\u2032) \u0002 \u03b4\u02dcd2|U0|2|W0|\nholds. Call a pair {x, x\u2032} \u2208 [U0]2 good if\n|G(x, x\u2032) \u2229 Vf | = (1 \u00b1 \u00011\/2)2d22m \u0001 \u00011\/4m\nfor f \u2208 {f1, f2}. Let Dgood0 be the set of all good pairs in D0 and Dbad0 = D0 \\ Dgood0 .\nBy Fact A.4, all but at most 4\u00011\/2m2 \u0002 \u00011\/4m2 pairs {x, x\u2032} \u2208 [U0]2 are good, that is,\u2223\u2223Dbad0 \u2223\u2223 \u0002 \u00011\/4m2. (8.15)\nFor {x, x\u2032} \u2208 Dgood0 , since |G(x, x\u2032) \u2229 Vf | \u0001 \u00011\/4m for f \u2208 {f1, f2}, the graph G[G(x, x\u2032) \u2229\n(Vf1 \u222a Vf2 )] is (\u00011\/2, d)-regular (cf. Fact A.1). Consequently (cf. Fact A.8), the number of\nfour-cycles in the graph G[G(x, x\u2032) \u2229 (Vf1 \u222a Vf2 )] is less than(\n1 + \u00011\/32\n)\nd122 m\n4\/4 \u0002\n(\n1 + \u00011\/64\n)\nd82|W0|.\nSince H(x, x\u2032)[Vf1 \u222a Vf2 ] is a subgraph of G[G(x, x\u2032) \u2229 (Vf1 \u222a Vf2 )] and degB0 (x, x\u2032) is the\nnumber of four-cycles in the graph H(x, x\u2032)[Vf1 \u222a Vf2 ], we obtain that for {x, x\u2032} \u2208 Dgood0 ,\ndegB0 (x, x\n\u2032) \u0002\n(\n1 + \u00011\/64\n)\nd82|W0|. (8.16)\nCombining the fact that degB0 (x, x\n\u2032) \u0002 |W0| for {x, x\u2032} \u2208 Dbad0 , (8.15), (8.14), and (8.16),\nwe have \u2211\n{x,x\u2032}\u2208D0\ndegB0 (x, x\n\u2032) =\n\u2211\n{x,x\u2032}\u2208Dbad0\ndegB0 (x, x\n\u2032) +\n\u2211\n{x,x\u2032}\u2208Dgood0\ndegB0 (x, x\n\u2032)\n\u0002 \u00011\/4m2 \u00d7 |W0| + \u03b41\/25m2 \u00d7 (1 + \u00011\/64)d82|W0|\n(S1), (S2)\n\u0002 \u03b4\u02dcd2m2|W0|.\nThus, we have verified that B0 satisfies the assumptions of Lemma 8.8. Applying\nthis lemma to the graph B0, we obtain that B0 is (\u03b4\u2032, d)-regular, where \u03b4\u2032 = (11\u03b4\u02dc)1\/5 =\n(11\u03b41\/2\n7\n)1\/5 and d = d42d\n4\n3. By Fact A.2, all but at most\n2\u03b4\u2032|W0| \u0002 2(11\u03b41\/27)1\/5 \u00d7 (1 + \u00011\/8)d42m4\/4 (S1)\u0002 (1\/2)\u03b41\/210d42m4\/4\nfour-cycles C4 in G[Vf1 \u222a Vf2 ] satisfy\ndegB0 (C4) = (1 \u00b1 \u03b4\u2032)dm =\n(\n1 \u00b1 \u03b41\/210)d42d43m.\nThis completes the proof of Lemma 8.4.\n394 Y. Peng, V. Ro\u00a8dl and J. Skokan\n8.3. Proof of Lemma 8.7\nWe start with some definitions and notation.\nDefinition 11. Let 0 < \u03b4\u2032, d < 1 be constants and let r\u2032 be a positive integer. A bipartite\ngraph B = (U \u222aW,E) is called (\u03b4\u2032, d, r\u2032)-regular if, whenever sets U1, U2, . . . , Ur\u2032 \u2282 U and\nW1, W2, . . . ,Wr\u2032 \u2282 W are taken such that\u2223\u2223\u2223\u2223 r\n\u2032\u22c3\ni=1\n(Ui \u00d7Wi)\n\u2223\u2223\u2223\u2223 \u0001 \u03b4\u2032|U \u00d7W |,\nthen \u2223\u2223\u2223\u2223B \u2229 r\n\u2032\u22c3\ni=1\n(Ui \u00d7Wi)\n\u2223\u2223\u2223\u2223 = (1 \u00b1 \u03b4\u2032)d|U||W |.\nDefinition 12. Let D = (U,E) be a t-partite graph with partition U = \u22c3ti=1Ui. D is called\n(\u03b4\u2032, d, r\u2032)-regular if all pairs (Ui,Uj), 1 \u0002 i < j \u0002 s are (\u03b4\u2032, d, r\u2032)-regular.\nWe are going to use the following two lemmas, of which the first was proved by\nDementieva, Haxell, Nagle, and Ro\u00a8dl (cf. Lemma 5.1 with the choice of constants given\nby (13)\u2013(15) in [2]).\nLemma 8.9. (see [2]) All but at most \u03b41\/2\n4\nm2 pairs {x, x\u2032} \u2208 [V1]2 satisfy the following\nproperties:\n(1) for any 2 \u0002 f \u0002 s,\n|G(x, x\u2032) \u2229 Vf | = (1 \u00b1 \u00011\/2)2d22m; (8.17)\n(2) H(x, x\u2032) is (\u03b41\/24 , d2d23, r\u2032)-regular. Here, the vertex set of graph H(x, x\u2032) is G(x, x\u2032) and\nr\u2032 is an integer satisfying \u0001 \u000b 1\/r\u2032 \u000b d2.\nLemma 8.10. Let {x, x\u2032} be a pair satisfying (8.17). If H(x, x\u2032) is (\u03b41\/24 , d2d23, r\u2032)-regular,\nthen H(x, x\u2032)[Vf1 \u222a Vf2 ] contains (1 \u00b1 \u03b41\/27 )d82d83|W0| four-cycles for every 2 \u0002 f1 < f2 \u0002 s.\nWe postpone the proof of Lemma 8.10 until we have finished the proof of Lemma 8.7.\nProof of Lemma 8.7. Owing to the definition of the graph B0, degB0 (x, x\u2032) equals the\nnumber of four-cycles in H(x, x\u2032)[Vf1 \u222a Vf2 ]. By Lemma 8.9, H(x, x\u2032) is (\u03b41\/24 , d2d23, r\u2032)-\nregular for all but at most \u03b41\/2\n4\nm2 pairs {x, x\u2032} \u2208 [V1]2.\nFurthermore, by Lemma 8.10, the (\u03b41\/2\n4\n, d2d\n2\n3, r\n\u2032)-regularity of H(x, x\u2032) ensures the\nexistence of (1 \u00b1 \u03b41\/27 )d82d83|W0| four-cycles in H(x, x\u2032)[Vf1 \u222a Vf2 ]. Consequently,\ndegB0 (x, x\n\u2032) = (1 \u00b1 \u03b41\/27 )d82d83|W0|.\nNow what is left is to prove Lemma 8.10. In order to do so, we will need the following\ntwo facts.\nCounting Small Cliques in 3-uniform Hypergraphs 395\nFact 8.11. Let {x, x\u2032} be a pair satisfying (8.17). Then all but at most 8\u00011\/4d42m2 pairs\n{y, y\u2032} \u2208 [G(x, x\u2032) \u2229 Vf1 ]2 satisfy\n|G[G(x, x\u2032) \u2229 (Vf1 \u222a Vf2 )](y, y\u2032)| =\n(\n1 \u00b1 \u00011\/4)4d42m. (8.18)\nProof. Let {x, x\u2032} be a pair satisfying (8.17). Again, by the (\u00011\/2, d2)-regularity of\nG[G(x, x\u2032) \u2229 (Vf1 \u222a Vf2 )] and Fact A.4, all but at most\n4\u00011\/4|G(x, x\u2032) \u2229 Vf1 |2 \u0002 4\u00011\/4\n[(\n1 + \u00011\/2\n)2\nd22m\n]2 \u0002 8\u00011\/4d42m2\npairs {y, y\u2032} \u2208 [G(x, x\u2032) \u2229 Vf1 ]2 satisfy\n|G[G(x, x\u2032) \u2229 (Vf1 \u222a Vf2 )](y, y\u2032)| =\n(\n1 \u00b1 \u00011\/4)2d22|G(x, x\u2032) \u2229 Vf2 | = (1 \u00b1 \u00011\/4)4d42m.\nFact 8.12. Let {x, x\u2032} be a pair satisfying (8.17). If H(x, x\u2032) is (\u03b41\/24 , d2d23, r\u2032)-regular, then\nall but at most \u03b41\/2\n6\nd42m\n2 pairs {y, y\u2032} \u2208 [G(x, x\u2032) \u2229 Vf1 ]2 satisfy\n|H(x, x\u2032)[Vf1 \u222a Vf2 ](y, y\u2032)| =\n(\n1 \u00b1 \u03b41\/26)d42d43m. (8.19)\nProof. We call a vertex y \u2208 G(x, x\u2032) \u2229 Vf1 good if it satisfies\n|H(x, x\u2032)[Vf1 \u222a Vf2 ](y)| =\n(\n1 \u00b1 \u03b41\/24)d32d23m. (8.20)\nSince H(x, x\u2032) is (\u03b41\/24 , d2d23, r\u2032)-regular, and consequently (\u03b41\/24 , d2d23)-regular, by Fact A.2,\nat most 2\u03b41\/2\n4 |G(x, x\u2032) \u2229 Vf1 | \u0002 2\u03b41\/24 (1 + \u00011\/2)2d22m \u0002 4\u03b41\/24d22m (cf. (8.17)) vertices y in\nG(x, x\u2032) \u2229 Vf1 are not good.\nFor a good vertex y in G(x, x\u2032) \u2229 Vf1 , a vertex y\u2032 \u2208 G(x, x\u2032) \u2229 Vf1 is called a bad friend\nof y if (8.19) fails.\nWe are going to show that there are less than 2\u00011\/2\n4\nd22m good vertices, each having at\nleast 2\u03b41\/2\n5\nd22m bad friends. Then at most(\n4\u03b41\/2\n4\nd22m+ 2\u0001\n1\/24d22m\n)\u00d7 (1 + \u00011\/2)2d22m+ (1 + \u00011\/2)2d22m\u00d7 2\u03b41\/25d22m \u0002 \u03b41\/26d42m2\npairs {y, y\u2032} fail to satisfy (8.19) since \u0001 \u000b d2, \u03b4 and \u03b4 \u000b 1.\nSuppose to the contrary that there are at least 2\u00011\/2\n4\nd22m good vertices, each having at\nleast 2\u03b41\/2\n5\nd22m bad friends.\nLet C\u2212 be the set of all good vertices y, each having \u03b41\/25d22m bad friends y\u2032 with the\nproperty that the right-hand side of (8.19) is small, that is,\n|H(x, x\u2032)[Vf1 \u222a Vf2 ](y, y\u2032)| <\n(\n1 \u2212 \u03b41\/26)d42d43m. (8.21)\nSimilarly, we define the set C+ of all good vertices y, each having \u03b41\/2\n5\nd22m bad friends y\n\u2032\nfor which the right-hand side of (8.19) is big. Without loss of generality, we may assume\n|C\u2212| \u0001 \u00011\/24d22m.\nThis will yield a contradiction to our assumption that H(x, x\u2032) is (\u03b41\/24 , d2d23, r\u2032)-regular.\nWe distinguish two cases.\n396 Y. Peng, V. Ro\u00a8dl and J. Skokan\nCase 1. Suppose that d2 \u0001 d23\u03b41\/2\n6\n. Take a good vertex y \u2208 C\u2212 and let U be the set of\n\u03b41\/2\n5\nd22m bad friends of y satisfying (8.21). Then,\n|U| = \u03b41\/25d22m. (8.22)\nLet W = H(x, x\u2032)[Vf1 \u222a Vf2 ](y). From (8.20), we know that\n|W | = (1 \u00b1 \u03b41\/24)d32d23m. (8.23)\nCombining (8.22), (8.23), d2 \u0001 d23\u03b41\/2\n6\n, and \u0001 \u000b \u03b4 \u000b d3, we obtain\n|U||W | \u0001 \u03b41\/24(1 + \u00011\/2)4d42m2 \u0001 \u03b41\/24 |G(x, x\u2032) \u2229 Vf1 ||G(x, x\u2032) \u2229 Vf2 |\nbecause |G(x, x\u2032) \u2229 Vf1 |, |G(x, x\u2032) \u2229 Vf2 | \u0002 (1 + \u00011\/2)2d22m (cf. (8.17)). Since H(x, x\u2032) is\n(\u03b41\/2\n4\n, d2d\n2\n3, r\n\u2032)-regular, we have\u2223\u2223H(x, x\u2032)[U \u222aW ]\u2223\u2223 \u0001 (1 \u2212 \u03b41\/24)d2d23|U||W | \u0001 \u03b41\/25(1 \u2212 2\u03b41\/24)d62d43m2. (8.24)\nOn the other hand, since the degree of each vertex y\u2032 \u2208 U in H(x, x\u2032)[U \u222aW ] is\nbounded by (8.21), we get\u2223\u2223H(x, x\u2032)[U \u222aW ]\u2223\u2223 < |U|(1 \u2212 \u03b41\/26)d42d43m = \u03b41\/25(1 \u2212 \u03b41\/26)d62d43m2.\nThis, however, contradicts (8.24) because of the fact that 2\u03b41\/2\n4 \u000b \u03b41\/26 .\nCase 2. Suppose that d2 < d\n2\n3\u03b4\n1\/26 . In order to apply the (\u03b41\/2\n4\n, d2d\n2\n3, r\n\u2032)-regularity of\nH(x, x\u2032), we need to find sets U1, . . . , Ur\u2032\u2032 \u2282 G(x, x\u2032) \u2229 Vf1 and W1, . . . ,Wr\u2032\u2032 \u2282 G(x, x\u2032) \u2229 Vf2\nfor some r\u2032\u2032 \u0002 r\u2032 such that\u2223\u2223\u2223\u2223 r\n\u2032\u2032\u22c3\ni=1\n(Ui \u00d7Wi)\n\u2223\u2223\u2223\u2223 \u0001 \u03b41\/24 |G(x, x\u2032) \u2229 Vf1 ||G(x, x\u2032) \u2229 Vf2 |. (8.25)\nFor yi \u2208 C\u2212, set Wi = H(x, x\u2032)[Vf1 \u222a Vf2 ](yi). From (8.20), we know that\n|Wi| = (1 \u00b1 \u03b41\/24)d32d23m. (8.26)\nLet Ui be the set of \u03b4\n1\/25d22m bad friends of yi satisfying (8.21). Then\n|Ui| = \u03b41\/25d22m. (8.27)\nNow we apply Fact A.10 to choose y1, y2, . . . , yr\u2032\u2032 \u2208 C , and then use the inclusion\u2013exclusion\nprinciple to derive (8.25).\nFirst, we define an auxiliary graph D with vertex set V (D) = G(x, x\u2032) \u2229 Vf1 and\nedge set E(D) = {{y, y\u2032} : |G[G(x, x\u2032) \u2229 (Vf1 \u222a Vf2 )](y, y\u2032)| \u000f= (1 \u00b1 \u00011\/4)4d42m}. We note that\n|V (D)| = (1 \u00b1 \u00011\/2)2d22m. Since the graph G[G(x, x\u2032) \u2229 (Vf1 \u222a Vf2 )] is (\u00011\/2, d2)-regular, by\nFact 8.11, we also have\n|E(D)| \u0002 16\u00011\/4|V (D)|2.\nSecond, we set \u03c3 = 16\u00011\/4, \u00b5 = d23\u03b4\n1\/26 , c = \u00011\/2\n4\n\/2, and t = 1\/d2. We apply Fact A.10\nto the graph D and find r\u2032\u2032 = \u00b5\/d2 vertices y1, . . . , yr\u2032\u2032 \u2208 W satisfying\n|G[G(x, x\u2032) \u2229 (Vf1 \u222a Vf2 )](yi, yj)| =\n(\n1 \u00b1 \u00011\/4)4d42m.\nCounting Small Cliques in 3-uniform Hypergraphs 397\nThis immediately implies\n|Wi \u2229Wj | \u0002 (1 + \u00011\/4)4d42m (8.28)\nfor 1 \u0002 i < j \u0002 r\u2032\u2032. Subsequently, by (8.27) and (8.28),\n|(Ui \u00d7Wi) \u2229 (Uj \u00d7Wj)| \u0002 \u03b41\/25(1 + \u00011\/4)4d62m2. (8.29)\nNow we are going to estimate |\u22c3r\u2032\u2032i=1Ui \u00d7Wi|. By the inclusion\u2013exclusion principle, (8.26),\n(8.27), (8.29), and r\u2032\u2032 = d23\u03b41\/2\n6\n\/d2, we obtain that\u2223\u2223\u2223\u2223 r\n\u2032\u2032\u22c3\ni=1\nUi \u00d7Wi\n\u2223\u2223\u2223\u2223 \u0001 r\n\u2032\u2032\u2211\ni=1\n|Ui \u00d7Wi| \u2212\n\u2211\n1\u0001i<j\u0001r\u2032\u2032\n|(Ui \u00d7Wi) \u2229 (Uj \u00d7Wj)|\n\u0001 r\u2032\u2032\u03b41\/25\n(\n1 \u2212 \u03b41\/24)d52d23m2 \u2212\n(\nr\u2032\u2032\n2\n)\n\u03b41\/2\n5(\n1 + \u00011\/4\n)4\nd62m\n2\n\u0001 \u03b41\/24\n(\n1 + \u00011\/2\n)4\nd42m\n2\n(8.17)\n\u0001 \u03b41\/24\n\u2223\u2223G(x, x\u2032) \u2229 Vf1 \u2223\u2223\u2223\u2223G(x, x\u2032) \u2229 Vf2 \u2223\u2223. (8.30)\nSince H(x, x\u2032) is (\u03b41\/24 , d2d23, r\u2032)-regular, we have\u2223\u2223\u2223\u2223H(x, x\u2032) \u2229 r\n\u2032\u2032\u22c3\ni=1\n(Ui \u00d7Wi)\n\u2223\u2223\u2223\u2223 \u0001 (1 \u2212 \u03b41\/24)d2d23\n\u2223\u2223\u2223\u2223 r\n\u2032\u2032\u22c3\ni=1\n(Ui \u00d7Wi)\n\u2223\u2223\u2223\u2223. (8.31)\nNow we are going to use our assumption on vertices in C\u2212 to get a contradiction to\n(8.31). By the inclusion\u2013exclusion principle, (8.26), (8.27), (8.29), and \u0001, \u03b4 \u000b 1, we also\nnote that \u2223\u2223\u22c3r\u2032\u2032\ni=1Ui \u00d7Wi\n\u2223\u2223\u2211r\u2032\u2032\ni=1 |Ui \u00d7Wi|\n\u0001 1 \u2212\n\u2211\n1\u0001i<j\u0001r\u2032\u2032 |(Ui \u00d7Wi) \u2229 (Uj \u00d7Wj)|\u2211r\u2032\u2032\ni=1 |Ui \u00d7Wi|\n\u0001 1 \u2212\n(\nr\u2032\u2032\n2\n)\n(1 + \u00011\/4)4\u03b41\/2\n5\nd62m\n2\nr\u2032\u2032\u03b41\/25 (1 \u2212 \u03b41\/24 )d52d23m2\n(8.32)\n\u0001 1 \u2212 2\n3\n\u03b41\/2\n6\n.\nFor every vertex yi \u2208 C , recall that Wi is the set of all neighbours of yi in H(x, x\u2032)[Vf1 \u222a\nVf2 ] and Ui is the set of all bad friends of yi satisfying (8.21). Thus, the degree of each\nvertex y\u2032 \u2208 Ui in H(x, x\u2032)[Ui \u222aWi] is bounded by (8.21), and therefore\n|H(x, x\u2032)[Ui \u00d7Wi]| < |Ui|(1 \u2212 \u03b41\/26)d42d43m.\nCombining the above inequality and (8.26) yields\n|H(x, x\u2032)[Ui \u00d7Wi]| \u0002\n(\n1 \u2212 \u03b41\/26)d2d33(\n1 \u2212 \u03b41\/24) |Ui \u00d7Wi|.\nConsequently, \u2223\u2223\u2223\u2223H(x, x\u2032) \u2229 r\n\u2032\u2032\u22c3\ni=1\n(Ui \u00d7Wi)\n\u2223\u2223\u2223\u2223 \u0002\n(\n1 \u2212 \u03b41\/26)d2d23(\n1 \u2212 \u03b41\/24)\nr\u2032\u2032\u2211\ni=1\n|Ui \u00d7Wi|.\n398 Y. Peng, V. Ro\u00a8dl and J. Skokan\nApplying (8.32) with the above inequality, we have\u2223\u2223H(x, x\u2032) \u2229\u22c3r\u2032\u2032i=1(Ui \u00d7Wi)\u2223\u2223\u2223\u2223\u22c3r\u2032\u2032\ni=1(Ui \u00d7Wi)\n\u2223\u2223 <\n(\n1 \u2212 \u03b41\/26)d22d3(\n1 \u2212 \u03b41\/24)(1 \u2212 2\n3\n\u03b41\/2\n6\n) < (1 \u2212 \u03b41\/24)d22d3\nsince \u03b4 \u000b 1. This, however, contradicts (8.31).\nProof of Lemma 8.10. Let {x, x\u2032} be a pair satisfying (8.17), that is,\n|G(x, x\u2032) \u2229 Vf | = (1 \u00b1 \u00011\/2)2d22m\nholds for any f, 2 \u0002 f \u0002 s, and suppose H(x, x\u2032) is (\u03b41\/24 , d2d23, r\u2032)-regular. By Fact 8.12,\nwe know that\n(1) all but at most \u03b41\/2\n6\nd42m\n2 pairs {y, y\u2032} \u2208 [G(x, x\u2032) \u2229 Vf1 ]2 satisfy (8.19), that is,\n|H(x, x\u2032)[Vf1 \u222a Vf2 ](y, y\u2032)| =\n(\n1 \u00b1 \u03b41\/26)d42d43m.\nApplying Fact 8.11, we obtain\n(2) all but at most 8\u00011\/4d42m\n2 pairs {y, y\u2032} \u2208 [G(x, x\u2032) \u2229 Vf1 ]2 satisfy (8.18), that is,\n|G[G(x, x\u2032) \u2229 (Vf1 \u222a Vf2 )](y, y\u2032)| =\n(\n1 \u00b1 \u00011\/4)4d42m.\nCombining (1), (2), and (8.17), we obtain that for every such pair {x, x\u2032} \u2208 [V1]2, the\nnumber of copies of C4 in H(x, x\u2032)[Vf1 \u222a Vf2 ] is bounded from above by[(\n(1 + \u00011\/2)2d22m\n2\n)\n\u2212 \u03b41\/26d42m2\n](\n(1 + \u03b41\/2\n6\n)d42d\n2\n3m\n2\n)\n+\n(\n\u03b41\/2\n6 \u2212 8\u00011\/4)d42m2\n(\n(1 + \u00011\/4)4d42m\n2\n)\n+ 8\u00011\/4d42m\n2 \u00d7 m2\n(S1)\n\u0002\n(\n1 + \u03b41\/2\n7)\nd122 d\n4\n3m\n4\/4.\nSimilarly, by (1) and (8.17), we obtain the following lower bound on the number of\ncopies of C4 in H(x, x\u2032)[Vf1 \u222a Vf2 ]:[(\n(1 \u2212 \u00011\/2)2d22m\n2\n)\n\u2212 \u03b41\/26d42m2\n](\n(1 \u2212 \u03b41\/26 )d42d23m\n2\n)\n(S1)\n\u0001\n(\n1 \u2212 \u03b41\/27)d122 d43m4\/4.\n8.4. Proof of Lemma 8.6\nThe proof of Lemma 8.6 is very similar to that of Lemma 8.7. We are going to use the\nfollowing two results.\nLemma 8.13. (see [2]) All but \u03b41\/4m vertices x \u2208 V1 satisfy the following properties:\n(1) for any 2 \u0002 f \u0002 s,\n|G(x) \u2229 Vf | = (1 \u00b1 \u0001)d2m; (8.33)\n(2) H(x) is (\u03b41\/4, d2d3, r)-regular. Here, the vertex set of the graph H(x) is G(x).\nCounting Small Cliques in 3-uniform Hypergraphs 399\nLemma 8.14. Let x \u2208 V1 be a vertex satisfying (8.33). If H(x) is (\u03b41\/4, d2d3, r)-regular,\nthen H(x)[Vf1 \u222a Vf2 ] contains (1 \u00b1 \u03b41\/25 )d42d43|W0| four-cycles for every 2 \u0002 f1 < f2 \u0002 s.\nThe proof of Lemma 8.13 is given in [2] and Lemma 8.14 can be proved along the lines\nof the proof of Lemma 8.10. We omit details here.\nProof of Lemma 8.6. Owing to the definition of the graph B0, degB0 (x) equals the\nnumber of four-cycles in H(x)[Vf1 \u222a Vf2 ]. By Lemma 8.13, H(x) is (\u03b41\/24 , d2d3, r)-regular\nfor all but at most \u03b41\/4m2 vertices x \u2208 V1. Furthermore, by Lemma 8.14, the (\u03b41\/4, d2d3, r)-\nregularity of H(x) ensures the existence of (1 \u00b1 \u03b41\/25 )d42d43|W0| four-cycles in H(x)[Vf1 \u222a\nVf2 ]. Consequently,\ndegB0 (x) =\n(\n1 \u00b1 \u03b41\/25)d42d43|W0|.\n9. Proof of Regt(fff) \u2227 Comt(pff) \u21d2 Comt+1(pff)\nIn order to prove this implication, we need to consider two types of triple systems:\nType 1: H[Lt+1 \u222aW (t+1)f1 \u222aW (t+1)f2 ], where t+ 2 \u0002 f1 < f2 \u0002 s, and\nType 2: H[Lp \u222aW (t+1)f1 \u222aW (t+1)f2 ], where 1 \u0002 p \u0002 t and t+ 2 \u0002 f1 < f2 \u0002 s.\nWe prove two auxiliary lemmas (one for each type of triple systems), which are then\nused to prove implication (iv).\n9.1. A lemma for Type 1 triple systems\nLemma 9.1. Let (L1, . . . , Lt) be a good t-tuple of h-subsets satisfying conditions (1) and (2)\nin Regt(fff ). Then all but at most \u03b4\n1\/4t+7 (\nM+t+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that\n(L1, . . . , Lt+1) satisfies the following condition:\n(\u0011) all triples (Lt+1,W (t+1)f1 ,W (t+1)f2 ), where t+ 2 \u0002 f1 < f2 \u0002 s, possess property\nC4EPt+1(t+ 1, f1, f2).\nSketch of proof. Since a good t-tuple of h-subsets (L1, . . . , Lt) satisfies conditions (1) and\n(2) in Regt(fff ), the graph G[G(L1 \u222a L2 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt)] is (\u00011\/2, d2)-regular and the 3-uniform\nhypergraph H[G(L1 \u222a L2 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt)] is (\u03b41\/4t , d3, rt)-regular. Hence, we are choosing Lt+1\nin a similar situation as for L1.\nConsequently, the proof of Lemma 9.1 is the same as the proof of Com1(pff ). The only\nmodification is to replace \u0001 by \u00011\/2, \u03b4 by \u03b41\/4\nt\n, m by (1 \u00b1 \u00011\/4)htMt+1, and r by rt.\n9.2. A lemma for Type 2 triple systems\nLemma 9.2. Let (L1, . . . , Lt) be a good t-tuple of h-subsets satisfying condition (\u2217) in\nComt(pff ). Then all but at most \u03b4\n1\/4t+7 (Mt+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that\n(L1, . . . , Lt+1) satisfies the following condition:\n(\u0011) all triples (Lp,W (t+1)f1 ,W (t+1)f2 ), where 1 \u0002 p \u0002 t and t+ 2 \u0002 f1 < f2 \u0002 s have property\nC4EPt+1(p, f1, f2).\n400 Y. Peng, V. Ro\u00a8dl and J. Skokan\nType 0\nType 1 Type 2\nType 3\nType 4\nType 5\n(fff )\n(ppf )\n(ppf )\n(pff )(pff )\n(ppp)\nL1\nLp1\nLp2\nLt\nLt+1\nW\n(t+1)\nf1\nW\n(t+1)\nf2\nW\n(t+1)\nf3\nFigure 9.1. Different types of triple systems considered\nProof. We will complete our proof by proving the following claim.\nClaim 9.3. For any fixed triple of integers (p, f1, f2), where 1 \u0002 p \u0002 t and t+ 2 \u0002 f1 <\nf2 \u0002 s, all but at most \u03b41\/4\nt+6\n(Mt+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that the triple\n(Lp,W\n(t+1)\nf1\n,W\n(t+1)\nf2\n) has property C4EPt+1(p, f1, f2).\nIndeed, Claim 9.3 implies that all but at most s3 \u00d7 \u03b41\/4t+6 (Mt+1\nh\n) \u0002 \u03b41\/4t+7 (Mt+1\nh\n) good\nh-subsets Lt+1 \u2282 W (t)t+1 satisfy condition (\u0011) given in Lemma 9.2.\nProof of Claim 9.3. Fix any triple of integers (p, f1, f2), where 1 \u0002 p \u0002 t and t+ 2 \u0002\nf1 < f2 \u0002 s. We find it convenient to reformulate Claim 9.3 as an equivalent statement\n(Claim 9.4) and prove it instead. Before stating this claim, we need a definition related to\nthe relevant property C4EPt+1(p, f1, f2).\nDefinition 13. We call a four-cycle C4 in G[W (t)f1 \u222aW (t)f2 ] bad if\n||H(C4) \u2229 Lp| \u2212 d43h| > \u03b41\/46d43h.\nRemark 5. In other words, a four-cycle C4 is bad if (5.1) is not satisfied (cf. the definition\nof C4EPt(p, f1, f2)). Consequently, a triple (Lp,W\n(t+1)\nf1\n,W\n(t+1)\nf2\n) does not have property\nC4EPt+1(p, f1, f2) if and only if G[W (t+1)f1 \u222aW (t+1)f2 ] contains more than \u03b41\/4\nt+6\nd42M\n4\nt+2\/4\nbad four-cycles C4.\nCounting Small Cliques in 3-uniform Hypergraphs 401\nTo reformulate Claim 9.3, we construct an auxiliary bipartite graph \u0393 = (U \u222aW,E).\nThe set U consists of all bad four-cycles in G[W (t)f1 \u222aW (t)f2 ], the set W consists of all\ngood h-subsets Lt+1 \u2282 W (t)t+1, and C4 \u2208 U and Lt+1 \u2208 W are adjacent in \u0393 if and only if\nV (C4) \u2282 G(Lt+1) (this is equivalent to V (C4) \u2282 W (t+1)f1 \u222aW (t+1)f2 ).\nIn view of Remark 5, we can reformulate Claim 9.3 as follows.\nClaim 9.4. The graph \u0393 contains at most \u03b41\/4\nt+6\n(Mt+1\nh\n) vertices in W with degree at least\n\u03b41\/4\nt+6\nd42M\n4\nt+2\/4 .\nProof of Claim 9.4. We first estimate e(\u0393) and then apply a double counting argument\nto bound the number of vertices in W with \u2018big\u2019 degree.\nWe observe that \u0393 satisfies the following conditions:\n(a) |U| \u0002 \u03b41\/4t+5d42M4t+1\/4;\n(b) for all but at most 8\u00011\/4(M+t+1)\n4 \u0002 \u00011\/16d42M4t+1\/4 four-cycles C4 \u2208 U,\ndeg\u0393(C4) \u0002\n(\n(1 + \u00011\/4)4d42M\n+\nt+1\nh\n)\n;\n(c) for any C4 \u2208 U,\ndeg\u0393(C4) \u0002\n(\nM+t+1\nh\n)\n.\nIndeed, Comt(pff ) implies (a). The (\u0001\n1\/2, d2)-regularity of G[G(L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt)] and Fact\nA.4 imply (b). Since |W (t)t+1| \u0002M+t+1, we have (c).\nBy (a), (b) and (c), we infer that\ne(\u0393) \u0002 \u03b41\/4t+5 1\n4\nd42M\n4\nt+1\n(\n(1 + \u00011\/4)4d42M\n+\nt+1\nh\n)\n+ \u00011\/16\n1\n4\nd42M\n4\nt+1\n(\nM+t+1\nh\n)\n(S1)\n\u0002 2\u03b41\/4t+5 1\n4\nd42M\n4\nt+1\n(\nd42Mt+1\nh\n)\n.\nTherefore, by a double counting argument, the number of vertices in W with degree at\nleast \u03b41\/4\nt+6\nd42M\n4\nt+2\/4 = \u03b4\n1\/4t+6d4h+42 M\n4\nt+1\/4 is not more than\n2\u03b41\/4\nt+5 1\n4\nd42M\n4\nt+1\n(\nd42Mt+1\nh\n)\n\u03b41\/4\nt+6 1\n4\nd4h+42 M\n4\nt+1\n(S1)\n\u0002 \u03b41\/4t+6\n(\nMt+1\nh\n)\n.\nThis completes the proof of Claims 9.4 and 9.3.\n9.3. Proof of Regt(fff) \u2227 Comt(pff) \u21d2 Comt+1(pff)\nLet (L1, . . . , Lt+1) be a good (t+ 1)-tuple of h-subsets not satisfying condition (\u2217) in\nComt+1(pff ). We distinguish two cases.\n402 Y. Peng, V. Ro\u00a8dl and J. Skokan\nCase 1. A good t-tuple (L1, . . . , Lt) violates either condition (1) or (2) in Regt(fff ) or\n(\u2217) in Comt(pff ). Since we assume that Regt(fff ) and Comt(pff ) are true, the number of\n(t+ 1)-tuples (L1, . . . , Lt+1) of this kind is at most\n2\u03b41\/4\nt+7\nt\u220f\np=1\n(\nMp\nh\n)\n\u00d7\n(\nM+t+1\nh\n)\n< 2\u03b41\/4\nt+7\nt+1\u220f\np=1\n(\nM+p\nh\n)\n. (9.1)\nCase 2. A good t-tuple (L1, . . . , Lt) satisfies conditions (1), (2) in Regt(fff ) and (\u2217) in\nComt(pff ), but Lt+1 is selected in such a way that (t+ 1)-tuple (L1, . . . , Lt+1) violates\ncondition (\u2217) in Comt+1(pff ). In particular, this means that Lt+1 does not satisfy condition\n(\u0011) in either Lemma 9.1 or Lemma 9.2.\nBy Fact A.7(3), Lemma 9.1, and Lemma 9.2, the number of (t+ 1)-tuples (L1, . . . , Lt+1)\nin this case is at most\n(\n1 + 2\u00011\/2\nt+1) t\u220f\np=1\n(\nMp\nh\n)\n\u00d7 2\u03b41\/4t+7\n(\nM+t+1\nh\n)\n\u0002 3\u03b41\/4t+7\nt+1\u220f\np=1\n(\nM+p\nh\n)\n(9.2)\nsince \u0001 \u000b 1. Combining (9.1) and (9.2), we obtain that all but at most\n(\n2\u03b41\/4\nt+7\n+ 3\u03b41\/4\nt+7) t+1\u220f\np=1\n(\nM+p\nh\n)\n(S1)\n\u0002 \u03b41\/4t+8\nt+1\u220f\np=1\n(\nMp\nh\n)\ngood (t+ 1)-tuples of h-subsets (L1, . . . , Lt+1) satisfy condition (\u2217) in Comt+1(pff ).\n10. Proof of Com1(pff) \u21d2 Com2(ppf) and Comt(pff) \u2227 Comt(ppf) \u21d2 Comt+1(ppf)\nFor the first implication, we need to consider Type 3 triple systems. For the second\nimplication, we need to consider Type 3 and Type 4 triple systems:\nType 3: H[Lp \u222a Lt+1 \u222aW (t+1)f ], where 1 \u0002 p \u0002 t and t+ 2 \u0002 f \u0002 s;\nType 4: H[Lp1 \u222a Lp2 \u222aW (t+1)f ], where 1 \u0002 p1 < p2 \u0002 t and t+ 2 \u0002 f \u0002 s.\nFor each type of triple systems, we prove an auxiliary lemma, which is later used in proofs\nof both implications.\n10.1. A lemma for Type 3 triple systems\nLemma 10.1. Let (L1, . . . , Lt) be a good t-tuple of h-subsets satisfying condition (\u2217) given in\nComt(pff ). Then all but \u03b4\n1\/4t+7 (Mt+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that (L1, . . . , Lt+1)\nsatisfies the following condition:\n(\u0011) all triples (Lp, Lt+1,W (t+1)f ), where 1 \u0002 p \u0002 t and t+ 2 \u0002 f \u0002 s, have property\nC4EPt+1(p, t+ 1, f).\nProof. We complete our proof by proving the following claim.\nClaim 10.2. For any fixed triple of integers (p, t+ 1, f), where 1 \u0002 p \u0002 t and t+ 2 \u0002 f \u0002 s,\nall but at most \u03b41\/4\nt+6\n(Mt+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that the triple (Lp, Lt+1,\nW\n(t+1)\nf ) has property C4EPt+1(p, t+ 1, f).\nCounting Small Cliques in 3-uniform Hypergraphs 403\nIndeed, Claim 10.2 implies that all but at most s2 \u00d7 \u03b41\/4t+6 (Mt+1\nh\n) \u0002 \u03b41\/4t+7 (Mt+1\nh\n) (recall\nthat \u03b4 \u000b 1) good h-subsets Lt+1 \u2282 W (t)t+1 satisfy condition (\u0011) given in Lemma 10.1.\nProof of Claim 10.2. We fix any triple of integers (p, t+ 1, f), where 1 \u0002 p \u0002 t and\nt+ 2 \u0002 f \u0002 s. Now we reformulate Claim 10.2 as an equivalent statement (Claim 10.3)\nand then we prove this new statement. We start with a definition related to the relevant\nproperty C4EPt+1(p, t+ 1, f).\nDefinition 14. We call a four-cycle C4 in G[W (t)t+1 \u222aW (t)f ] bad if\u2223\u2223|H(C4) \u2229 Lp| \u2212 d43h\u2223\u2223 > \u03b41\/46d43h.\nRemark 6. By Definition 14, a triple (Lp, Lt+1,W\n(t+1)\nf ) lacks property C4EPt+1(p, t+ 1, f)\nif and only if the graph G[Lt+1 \u222aW (t+1)f ] contains more than \u03b41\/4t+6 14h2M2t+2 bad four-cycles\nC4.\nIn order to reformulate Claim 10.2, we construct an auxiliary bipartite graph \u0393 =\n(U \u222aW,E), where U consists of all bad four-cycles C4 in G[W (t)t+1 \u222aW (t)f ], and W consists\nof all good h-subsets Lt+1 \u2282 W (t)t+1. We join C4 \u2208 U and Lt+1 \u2208 W by an edge in \u0393 if and\nonly if V (C4) \u2282 Lt+1 \u222aW (t+1)f .\nIt follows from Remark 6 that we can reformulate Claim 10.2 in the following way.\nClaim 10.3. In the graph \u0393, all but at most \u03b41\/4\nt+6\n(Mt+1\nh\n) vertices in W have degree at least\n\u03b41\/4\nt+6\nh2M2t+2\/4.\nProof of Claim 10.3. We first estimate e(\u0393) and then apply a double counting argument\nto bound the number of vertices in W with \u2018big\u2019 degree.\nWe observe that \u0393 has the following properties:\n(a) |U| \u0002 \u03b41\/4t+5d42M4t+1\/4;\n(b) for all but 4\u00011\/4(M+t+1)\n4 \u0002 \u00011\/16d42M4t+1\/4 four-cycles C4 \u2208 U,\ndeg\u0393(C4) \u0002\n(\n(1 + \u00011\/4)2d22M\n+\nt+1\nh\u2212 2\n)\n;\n(c) for any C4 \u2208 U,\ndeg\u0393(C4) \u0002\n(\nM+t+1\nh\u2212 2\n)\n.\nStatement Comt(pff ) implies (a). The (\u0001\n1\/2, d2)-regularity of G[W (t)t+1 \u222aW (t)f ] and Fact A.4\nimply that, for all but 4\u00011\/4(M+t+1)\n2 pairs {x, x\u2032} \u2208 [W (t)f ]2,\u2223\u2223G(x, x\u2032) \u2229W (t)t+1\u2223\u2223 = (1 \u00b1 \u00011\/4)2d22M+t+1,\nand this implies (b). Since |W (t)t+1| \u0002M+t+1, we have (c).\n404 Y. Peng, V. Ro\u00a8dl and J. Skokan\nBy properties (a), (b) and (c), we infer that\ne(\u0393) \u0002 \u03b41\/4t+5 1\n4\nd42M\n4\nt+1\n((\n1 + \u00011\/4\n)2\nd22M\n+\nt+1\nh\u2212 2\n)\n+ \u00011\/16\n1\n4\nd42M\n4\nt+1\n(\nM+t+1\nh\u2212 2\n)\n\u0002 2\u03b41\/4t+5 1\n4\nd42M\n4\nt+1\n(\nd22Mt+1\nh\u2212 2\n)\nsince \u0001 \u000b 1\/h, d2, \u03b4.\nTherefore, by a double counting argument, the number of vertices in W with degree at\nleast \u03b41\/4\nt+6 1\n4\nh2M2t+2 = \u03b4\n1\/4t+6 1\n4\nh2d2h2 M\n2\nt+1 is not more than\n2\u03b41\/4\nt+5 1\n4\nd42M\n4\nt+1\n(\nd22Mt+1\nh\u22122\n)\n\u03b41\/4\nt+6 1\n4\nh2d2h2 M\n2\nt+1\n\u0002 \u03b41\/4t+6\n(\nMt+1\nh\n)\n.\nThis completes the proof of Claims 10.2 and 10.3.\n10.2. A lemma for Type 4 triple systems\nLemma 10.4. Let (L1, . . . , Lt) be a good t-tuple of h-subsets satisfying condition (\u2217) in\nComt(ppf ). Then all but at most \u03b4\n1\/4t+7 (Mt+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that\n(L1, . . . , Lt+1) satisfies the following condition:\n(\u0011) all triples (Lp1 , Lp2 ,W (t+1)f ), where 1 \u0002 p1 < p2 \u0002 t and t+ 2 \u0002 f \u0002 s, possess property\nC4EPt+1(p1, p2, f).\nProof. We will complete our proof by proving the following claim.\nClaim 10.5. For any fixed triple of integers (p1, p2, f), where 1 \u0002 p1 < p2 \u0002 t and t+ 2 \u0002\nf \u0002 s, all but at most \u03b41\/4t+6 (Mt+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that the triple\n(Lp1 , Lp2 ,W\n(t+1)\nf ) has property C4EPt+1(p1, p2, f).\nIndeed, Claim 10.5 implies that all but at most s3 \u00d7 \u03b41\/4t+6 (Mt+1\nh\n) \u0002 \u03b41\/4t+7 (Mt+1\nh\n) (recall\nthat \u03b4 \u000b 1) good h-subsets Lt+1 \u2282 W (t)t+1 satisfy condition (\u0011) given in Lemma 10.4.\nProof of Claim 10.5. Fix any triple (p1, p2, f), where 1 \u0002 p1 < p2 \u0002 t and t+ 2 \u0002 f \u0002 s.\nSimilarly to Claim 10.2, we prove an equivalent statement (Claim 10.6) to Claim 10.5. We\nfirst introduce a definition related to the property C4EPt+1(p1, p2, f).\nDefinition 15. We call a four-cycle C4 in G[Lp2 \u222aW (t)f ] bad if\n||H(C4) \u2229 Lp1 | \u2212 d43h| > \u03b41\/46d43h.\nRemark 7. By Definition 15, a triple (Lp1 , Lp2 ,W\n(t+1)\nf ) lacks property C4EPt+1(p1, p2, f) if\nand only if the graph G[Lp2 \u222aW (t+1)f ] contains more than \u03b41\/4t+6h2M2t+2\/4 bad four-cycles\nC4.\nAs before, we construct an auxiliary bipartite graph \u0393 = (U \u222aW,E) such that U\nconsists of all bad four-cycles C4 in G[Lp2 \u222aW (t)f ], W consists of all good h-subsets\nCounting Small Cliques in 3-uniform Hypergraphs 405\nLt+1 \u2282 W (t)t+1, and C4 \u2208 U and Lt+1 \u2208 W are adjacent in \u0393 if and only if V (C4) \u2282 G(Lt+1).\nThis is equivalent to saying that V (C4) \u2282 Lp2 \u222aW (t+1)f .\nIn view of Remark 7, we can reformulate Claim 10.5 as follows.\nClaim 10.6. In the graph \u0393, there are at most \u03b41\/4\nt+6\n(Mt+1\nh\n) vertices in W with degree at\nleast \u03b41\/4\nt+6\nh2M2t+2\/4.\nProof of Claim 10.6. We first estimate e(\u0393) and then apply a double counting argument\nto bound the number of vertices in W with \u2018big\u2019 degrees.\nWe note that \u0393 has the following properties:\n(a) |U| \u0002 \u03b41\/4t+5h2M2t+1\/4;\n(b) for all but at most 4\u00011\/4(M+t+1)\n2h2 four-cycles C4 \u2208 U,\ndeg\u0393(C4) \u0002\n((\n1 + \u00011\/4\n)2\nd22M\n+\nt+1\nh\n)\n;\n(c) for every C4 \u2208 U,\ndeg\u0393(C4) \u0002\n(\nM+t+1\nh\n)\n.\nProperty (a) follows from Comt(ppf ). The (\u0001\n1\/2, d2)-regularity of G(L1 \u222a \u00b7 \u00b7 \u00b7 \u222a Lt) and\nFact A.4 imply that for all but at most 4\u00011\/4(M+t+1)\n2 pairs {x, x\u2032} \u2208 [W (t)f ]2,\u2223\u2223G(x, x\u2032) \u2229W (t)t+1\u2223\u2223 \u0002 (1 + \u00011\/4)2d22M+t+1,\nand this implies (b). Since |W (t)t+1| \u0002M+t+1, we have (c).\nBy (a), (b) and (c), we claim that\ne(\u0393) \u0002 \u03b41\/4t+5 1\n4\nh2M2t+1\n((\n1 + \u00011\/4\n)2\nd22M\n+\nt+1\nh\n)\n+ 4\u00011\/4(M+t+1)\n2h2\n(\nM+t+1\nh\n)\n(S1), (S2)\n\u0002 2\u03b41\/4t+5 1\n4\nh2M2t+1\n(\nd22Mt+1\nh\n)\n.\nTherefore, by a double counting argument, the number of vertices in W with degree at\nleast \u03b41\/4\nt+6\nh2M2t+2\/4 = \u03b4\n1\/4t+6h2d2h2 M\n2\nt+1\/4 is not more than\n2\u03b41\/4\nt+5 1\n4\nh2M2t+1\n(\nd22Mt+1\nh\n)\n\u03b41\/4\nt+6 1\n4\nh2d2h2 M\n2\nt+1\n\u0002 \u03b41\/4t+6\n(\nMt+1\nh\n)\n.\nThis completes the proof of Claims 10.6 and 10.5.\n10.3. Proof of Com1(pff) \u21d2 Com2(ppf)\nSince Com1(ppf ) is vacuously satisfied, Com1(pff ) \u21d2 Com2(ppf ) follows from the proof\nof Comt(pff ) \u2227 Comt(ppf ) \u21d2 Comt+1(ppf ).\n10.4. Proof of Comt(pff) \u2227 Comt(ppf) \u21d2 Comt+1(ppf)\nThe proof of this implication follows from Lemma 10.1 and Lemma 10.4.\n406 Y. Peng, V. Ro\u00a8dl and J. Skokan\nProof. If a good (t+ 1)-tuple of h-subsets (L1, . . . , Lt+1) does not satisfy condition (\u2217) in\nComt+1(ppf ), then there are two possible cases.\nCase 1. A good t-tuple (L1, . . . , Lt) violates condition (\u2217) in either Comt(pff ) or Comt(ppf ).\nSince we assume that Comt(pff ) and Comt(ppf ) are true, the number of (t+ 1)-tuples\n(L1, . . . , Lt+1) of this kind is at most\n2\u03b41\/4\nt+7\nt\u220f\np=1\n(\nMp\nh\n)\n\u00d7\n(\nM+t+1\nh\n)\n< 2\u03b41\/4\nt+7\nt+1\u220f\np=1\n(\nM+p\nh\n)\n. (10.1)\nCase 2. A good t-tuple (L1, . . . , Lt) satisfies condition (\u2217) in both Comt(pff ) and Comt(ppf ),\nbut Lt+1 is such that (t+ 1)-tuple (L1, . . . , Lt+1) violates condition (\u2217) in Comt+1(ppf ). This\nis indeed equivalent to that Lt+1 does not satisfy condition (\u0011) in either Lemma 10.1 or\nLemma 10.4.\nBy Fact A.7(3), Lemma 10.1, and Lemma 10.4, the number of good (t+ 1)-tuples\n(L1, . . . , Lt+1) in this case is at most\n(\n1 + 2\u00011\/2\nt+1) t\u220f\np=1\n(\nMp\nh\n)\n\u00d7 2\u03b41\/4t+7\n(\nMt+1\nh\n)\n\u0002 3\u03b41\/4t+7\nt+1\u220f\np=1\n(\nMp\nh\n)\n. (10.2)\nCombining (10.1) and (10.2), we obtain that all but at most\n(\n2\u03b41\/4\nt+7\n+ 3\u03b41\/4\nt+7) t+1\u220f\np=1\n(\nM+p\nh\n)\n(S1), (S2)\n\u0002 \u03b41\/4t+8\nt+1\u220f\np=1\n(\nMp\nh\n)\ngood (t+ 1)-tuples of h-subsets (L1, . . . , Lt+1) satisfy condition (\u2217) in Comt+1(ppf ).\n11. Proof of Com2(ppf) \u21d2 Com3(ppp) and Comt(ppf) \u2227 Comt(ppp) \u21d2 Comt+1(ppp)\nIn the proof of these two implications, we need to consider only one type of triple systems:\nType 5: H[Lp1 \u222a Lp2 \u222a Lt+1], where 1 \u0002 p1 < p2 \u0002 t.\nThe core of the proof of both implications lies in the following lemma.\nLemma 11.1. Let (L1, . . . , Lt) be a good t-tuple of h-subsets satisfying condition (\u2217) in\nComt(ppf ). Then all but at most \u03b4\n1\/4t+7 (Mt+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that\n(L1, . . . , Lt+1) satisfies the following condition:\n(\u0011) (Lp1 , Lp2 , Lt+1) possess the property C4EPt+1(p1, p2, t+ 1) for every 1 \u0002 p1 < p2 \u0002 t.\nProof. The proof will be completed by proving the following claim.\nClaim 11.2. For any fixed triple of integers (p1, p2, t+ 1), where 1 \u0002 p1 < p2 \u0002 t, all but\nat most \u03b41\/4\nt+6\n(Mt+1\nh\n) good h-subsets Lt+1 \u2282 W (t)t+1 are such that the triple (Lp1 , Lp2 , Lt+1) has\nthe property C4EPt+1(p1, p2, t+ 1).\nIndeed, Claim 11.2 implies that all but at most s2 \u00d7 \u03b41\/4t+6 (Mt+1\nh\n) \u0002 \u03b41\/4t+7 (Mt+1\nh\n) good\nh-subsets Lt+1 \u2282 W (t)t+1 satisfy condition (\u0011) in Lemma 11.1.\nCounting Small Cliques in 3-uniform Hypergraphs 407\nProof of Claim 11.2. Fix any triple of integers (p1, p2, t+ 1), where 1 \u0002 p1 < p2 \u0002 t. We\nreformulate Claim 11.2 as an equivalent statement (Claim 11.3) and then we prove this\nnew claim. We start with a definition related to the property C4EPt+1(p1, p2, t+ 1).\nDefinition 16. We call a four-cycle C4 in G[Lp2 \u222aW (t)t+1] bad if\n||H(C4) \u2229 Lp1 | \u2212 d43h| > \u03b41\/46d43h.\nRemark 8. By Definition 16, a triple (Lp1 , Lp2 , Lt+1) lacks property C4EPt+1(p1, p2, t+ 1)\nif and only if the graph G[Lp2 \u222a Lt+1] contains more than \u03b41\/4t+6h4\/4 bad four-cycles C4.\nAs before, we construct an auxiliary bipartite graph \u0393 = (U \u222aW,E), whereU consists of\nall bad four-cycles C4 in G[Lp2 \u222aW (t)t+1] and W consists of all good h-subsets Lt+1 \u2282 W (t)t+1.\nWe join C4 \u2208 U and Lt+1 \u2208 W by an edge in \u0393 if and only if V (C4) \u2282 Lp2 \u222a Lt+1.\nIn view of Remark 8, Claim 11.2 can be reformulated as follows.\nClaim 11.3. In the graph \u0393, the number of vertices in W with degree at least \u03b41\/4\nt+6\nh4\/4\nis not more than \u03b41\/4\nt+6\n(Mt+1\nh\n).\nProof of Claim 11.3. We first estimate the number of edges e(\u0393) of \u0393 and then use a\ndouble counting argument to bound the number of vertices in W with \u2018big\u2019 degree.\nFirst we note that \u0393 has the following properties:\n(a) |U| \u0002 \u03b41\/4t+5h2M2t+1\/4, and\n(b) for every four-cycle C4 \u2208 U,\ndeg\u0393(C4) \u0002\n(\nM+t+1\nh\u2212 2\n)\n.\nStatement Comt(ppf ) implies (a). Since |W (t)t+1| \u0002M+t+1, we have (b).\nBy (a) and (b), we claim that\ne(\u0393) \u0002 \u03b41\/4t+5h2M2t+1\n(\nM+t+1\nh\u2212 2\n)\n\/4\n(S2)\n\u0002 2\u03b41\/4t+5h2M2t+1\n(\nMt+1\nh\u2212 2\n)\n\/4.\nTherefore, by a double counting argument, the number of vertices in W with degree at\nleast \u03b41\/4\nt+6\nh4\/4 is not more than\n2\u03b41\/4\nt+5 1\n4\nh2M2t+1\n(\nMt+1\nh\u22122\n)\n\u03b41\/4\nt+6 1\n4\nh4\n\u0002 \u03b41\/4t+6\n(\nMt+1\nh\n)\n.\nThe last inequality follows from the fact that 1\/m \u000b \u0001 \u000b 1\/h and \u03b4 \u000b 1. This completes\nthe proof of Claims 11.3 and 11.2.\n11.1. Sketch of proof of Com2(ppf) \u21d2 Com3(ppp)\nIn this case, statement Com2(ppp) is vacuously satisfied. Hence, the proof of this\nimplication follows from the proof of Comt(ppf ) \u2227 Comt(ppp) \u21d2 Comt+1(ppp), which is\nbased on Lemma 11.1.\n408 Y. Peng, V. Ro\u00a8dl and J. Skokan\n11.2. Proof of Comt(ppf) \u2227 Comt(ppp) \u21d2 Comt+1(ppp)\nNow we prove the implication Comt(ppf ) \u2227 Comt(ppp) \u21d2 Comt+1(ppp) for 3 \u0002 t \u0002 s\u2212 1\nby applying Lemma 11.1 (indeed, we also prove it for t = 2).\nProof. If a good (t+ 1)-tuples of h-subsets (L1, . . . , Lt+1) does not satisfy condition (\u2217) in\nComt+1(ppp), then one of the following two cases occurs.\nCase 1. A good t-tuple (L1, . . . , Lt) violates condition (\u2217) in either Comt(ppf ) or Comt(ppp).\nBy Comt(ppf ) and Comt(ppp), the number of (L1, . . . , Lt+1) of this kind is at most\n2\u03b41\/4\nt+7\nt\u220f\np=1\n(\nMp\nh\n)\n\u00d7\n(\nMt+1\nh\n)\n< 2\u03b41\/4\nt+7\nt+1\u220f\np=1\n(\nM+p\nh\n)\n. (11.1)\nCase 2. A good t-tuple (L1, . . . , Lt) satisfies condition (\u2217) in both Comt(ppf ) and\nComt(ppp), but Lt+1 is such that (L1, . . . , Lt+1) violates condition (\u2217) in Comt+1(ppp).\nThis is equivalent to saying that Lt+1 does not satisfy condition (\u0011) in Lemma 11.1.\nBy Fact A.7(3) and Lemma 11.1, the number of (t+ 1)-tuples (L1, . . . , Lt+1) in this case\nis at most\n(\n1 + 2\u00011\/2\nt+1) t\u220f\np=1\n(\nMp\nh\n)\n\u00d7 \u03b41\/4t+7\n(\nMt+1\nh\n)\n(S1)\n\u0002 2\u03b41\/4t+7\nt+1\u220f\np=1\n(\nMp\nh\n)\n. (11.2)\nCombining (11.1) and (11.2), we obtain that all but at most\n(\n2\u03b41\/4\nt+7\n+ 2\u03b41\/4\nt+7) t+1\u220f\np=1\n(\nM+p\nh\n)\n(S1), (S2)\n\u0002 \u03b41\/4t+8\nt+1\u220f\np=1\n(\nMp\nh\n)\ngood (t+ 1)-tuples of h-subsets (L1, . . . , Lt+1) satisfy condition (\u2217) in Comt+1(ppp).\nAppendix A. Some facts related to the regularity of graphs\nIn this appendix, we state a few facts which are related to the regularity of graphs. The\nproofs are given in [8].\nFor a graph D = (V , E) and a subset V \u2032 of V , recall that D[V \u2032] denotes the subgraph\nof D induced on V \u2032.\nFact A.1. Let D be an (\u0001, d)-regular s-partite graph with partition \u22c3si=1Ui, and let Wi be\na subset of Ui with |Wi| \u0001 \u00011\/4|Ui| for all i \u2208 [s]. Then D[\u222asi=1Wi] is (\u00011\/2, d)-regular.\nFact A.2. Let 0 < \u0001, d < 1 and suppose that D = (U1 \u222aU2, E) is an (\u0001, d)-regular bipartite\ngraph. Then all but at most 2\u0001|U1| vertices x \u2208 U1 satisfy\n(1 \u2212 \u0001)d|U2| \u0002 |D(x)| \u0002 (1 + \u0001)d|U2|.\nThis fact can be further extended in the following two ways.\nFact A.3. Suppose (1 \u2212 \u00011\/2)4(s\u22121)d4(s\u22121) \u0001 \u0001. Let D be an (\u0001, d)-regular s-partite graph\nwith partition\n\u22c3s\ni=1Ui. Then for any integer q with 1 \u0002 q \u0002 s\u2212 1, all but at most\nCounting Small Cliques in 3-uniform Hypergraphs 409\n2q\u00011\/2|U2| \u00b7 \u00b7 \u00b7 |Uq+1| q-tuples of vertices (a2, . . . , aq+1) \u2208 U2 \u00d7 \u00b7 \u00b7 \u00b7 \u00d7Uq+1, satisfy(\n1 \u2212 \u00011\/2)qdq|U1| \u0002 |D(a2, . . . , aq+1) \u2229U1| \u0002 (1 + \u00011\/2)qdq|U1|. (A.1)\nFact A.4. Let q be a positive integer such that (1 \u2212 \u00011\/2)4(q\u22121)d4(q\u22121) \u0001 \u0001. Let D be an\n(\u0001, d)-regular s-partite graph with partition\n\u22c3s\ni=1Ui. Then, all but at most 2q(s\u2212 1)\u00011\/2|U1|q\nq-subsets {x1, . . . , xq} \u2208 [U1]q satisfy(\n1 \u2212 \u00011\/2)qdq|Uj | \u0002 |D(x1, . . . , xq) \u2229Uj | \u0002 (1 + \u00011\/2)qdq|Uj |,\nfor all j \u2208 [s\u2212 1].\nApplying the above fact to the graph G from Setup, we have the following consequences.\nFact A.5. All but at most \u00011\/4(m\nh\n) h-subsets L1 \u2282 V1 are good.\nFact A.6. All but at most \u00011\/4(m\nh\n)2 pairs (L,L\u2032) of h-subsets L, L\u2032of V1 satisfy\n|G(L \u222a L\u2032) \u2229 Vj | = (1 \u00b1 \u00011\/4)d2h2 m (A.2)\nfor all 2 \u0002 j \u0002 s.\nFact A.7. Let s and n be positive integers. Then, for every d, 0 < d < 1, there exists \u00010 =\n\u00010(d) such that for every \u0001 \u0002 \u00010, every (\u0001, d)-regular s-partite graph with partition\n\u22c3s\ni=1Ui,\nwhere |U1| = \u00b7 \u00b7 \u00b7 = |Us| = n, satisfies the following property.\nFor every t \u2208 [s] and q \u2208 [n], the following conditions hold.\n(1) The number of complete t-tuples of q-subsets (B1, . . . , Bt) is\n(\n1 \u00b1 \u00011\/2t+1) t\u220f\np=1\n(\ndq(p\u22121)n\nq\n)\n.\n(2) All but at most \u00011\/2\nt+1 \u220ft\np=1(\ndq(p\u22121)n\nq\n) complete t-tuples of q-subsets (B1, . . . , Bt) are good.\n(3) The number of good t-tuples of q-subsets (B1, . . . , Bt) is\n(\n1 \u00b1 2\u00011\/2t+1) t\u220f\np=1\n(\ndq(p\u22121)n\nq\n)\n.\nFact A.8. For d > 0, there exist \u00010 = \u00010(d) and n0 = n0(\u00010), such that for every \u0001 \u0002 \u00010, any\n(\u0001, d)-regular bipartite graph D = (U1 \u222aU2, E) with |U1|, |U2| \u0001 n0 contains (1 \u00b1 \u00011\/8)d4\n|U1|2|U2|2\/4 copies of C4.\nThe next fact counts the number of triangles K3 in a 3-partite regular graph. It is an\nexplicit version of Fact 1.2 for the case s = 3.\nFact A.9. ([4]) Let d, \u0001 be positive real numbers such that \u00011\/4 \u0002 d2(1 \u2212 \u0001)2. Then, the num-\nber of triangles K3 in an arbitrary (\u0001, d)-regular 3-partite graph D with partition\n410 Y. Peng, V. Ro\u00a8dl and J. Skokan\nU1 \u222aU2 \u222aU3 is given by\n(1 \u2212 2\u0001)(1 \u2212 \u0001)3d3|U1||U2||U3| \u0002 |K3(D)| \u0002 ((1 + \u0001)3d3 + 4\u0001)|U1||U2||U3|. (A.3)\nThe next fact guarantees that an independent set of certain size can be found in every\nbig subset inside a graph with small density.\nFact A.10. Let U be a set of size n and D be an arbitrary graph with vertex set U and\n|D| \u0002 \u03c3n2. Then, for every subset W \u2282 U with at least cn vertices and a positive integer t\nsuch that\n2\u03c3t2 < c2, (A.4)\nthere exists an independent set {x1, . . . , xt} \u2282 W in the graph D.\nAppendix B. Proof of Lemma 8.8\nProof. Recall that \u03b4\u2032 = (11\u03b4\u02dc)1\/5 and set \u03bb = 1 \u2212 d. Let U = {x1, x2, . . . , xu} and W =\n{y1, y2, . . . , yw} and define a u\u00d7 w matrix M for the pair (U,W ) with rows indexed by the\nelements of U and columns by the elements of W as follows.\nFor each xi \u2208 U and yj \u2208 W the entry m(xi, yj) in the row of xi and column of yj is\ngiven by\nm(xi, yj) =\n{\n\u03bb if (xi, yj) \u2208 E,\n\u2212d if (xi, yj) \u000f\u2208 E.\nLet U \u2032 \u2286 U and W \u2032 \u2286 W be two subsets with |U \u2032||W \u2032| \u0001 \u03b4\u2032|U||W | (note that this implies\nthat |U \u2032| \u0001 \u03b4\u2032|U| and |W \u2032| \u0001 \u03b4\u2032|W |). Our goal is to show that\nd(U \u2032,W \u2032) = (1 \u00b1 \u03b4\u2032)d.\nLet E \u2032 be the subset of E consisting of all edges of B joining a vertex from U \u2032 to\na vertex from W \u2032. By reordering, we may assume that U \u2032 = {x1, x2, . . . , xu\u2032 } and W \u2032 =\n{y1, y2, . . . , yw\u2032 }. Let M \u2032 be the u\u2032 \u00d7 w\u2032 submatrix of M associated with U \u2032 and W \u2032. That is,\nM \u2032 = (m(xi, yj))1\u0001i\u0001u\u2032 ,1\u0001j\u0001w\u2032 .\nThe sum of all of the entries of M \u2032 is equal to \u03bb times the number of edges in E \u2032 minus d\ntimes the number of non-edges in E \u2032.\nu\u2032\u2211\ni=1\nw\u2032\u2211\nj=1\nm(xi, yj) = \u03bb|E \u2032| \u2212 d(u\u2032w\u2032 \u2212 |E \u2032|) = |E \u2032| \u2212 du\u2032w\u2032. (B.1)\nFor xi \u2208 U \u2032, let \u0005xi be the corresponding row vector of M and let \u0005x\u2032i be the corresponding\nrow vector of M \u2032. Then, by the Cauchy\u2013Schwartz inequality,(\nu\u2032\u2211\ni=1\nw\u2032\u2211\nj=1\nm(xi, yj)\n)2\n\u0002 w\u2032\nw\u2032\u2211\nj=1\n(\nu\u2032\u2211\ni=1\nm(xi, yj)\n)2\n= w\u2032\n\u2225\u2225\u2225\u2225 u\n\u2032\u2211\ni=1\n\u0005x\u2032i\n\u2225\u2225\u2225\u22252, (B.2)\nCounting Small Cliques in 3-uniform Hypergraphs 411\nwhere for vectors \u0005x and \u0005y the expression \u0005x \u00b7\u0005y means the usual scalar product and\n\u2016\u0005x\u20162 =\u0005x \u00b7\u0005x. Clearly\n\u2225\u2225\u2225\u2225 u\n\u2032\u2211\ni=1\n\u0005x\u2032i\n\u2225\u2225\u2225\u22252 \u0002\n\u2225\u2225\u2225\u2225 u\n\u2032\u2211\ni=1\n\u0005xi\n\u2225\u2225\u2225\u22252. (B.3)\nTherefore, by (B.1), (B.2), and (B.3), we have\n(|E \u2032| \u2212 du\u2032w\u2032)2 \u0002 w\u2032\u2225\u2225\u2225\u2225 u\n\u2032\u2211\ni=1\n\u0005xi\n\u2225\u2225\u2225\u22252. (B.4)\nIn what follows, we will find an upper bound for\n\u2225\u2225\u2225\u2225 u\n\u2032\u2211\ni=1\n\u0005xi\n\u2225\u2225\u2225\u22252 = u\n\u2032\u2211\ni=1\n\u2225\u2225\u0005xi\u2225\u22252 + 2 \u2211\n1\u0001i<j\u0001u\u2032\n\u0005xi \u00b7 \u0005xj.\nFor each xi \u2208 U we have\u2225\u2225\u0005xi\u2225\u22252 = \u03bb2 degB(xi) + d2(w \u2212 degB(xi)) \u0002 max{d2w, \u03bb2w} \u0002 w,\nand hence\nu\u2032\u2211\ni=1\n\u2225\u2225\u0005xi\u2225\u22252 \u0002 u\u2032w. (B.5)\nFor xi \u000f= xj \u2208 U, we obtain\n\u0005xi \u00b7 \u0005xj = \u03bb2 degB(xi, xj) \u2212 \u03bbd(degB(xi) \u2212 degB(xi, xj)) \u2212 \u03bbd(degB(xj) \u2212 degB(xi, xj))\n+ d2(w \u2212 degB(xi) \u2212 degB(xj) + degB(xi, xj))\n= (\u03bb2 + 2\u03bbd+ d2) degB(xi, xj) \u2212 (\u03bbd+ d2)(degB(xi) + degB(xj)) + d2w. (B.6)\nSince \u03bb+ d = 1, the right-hand side of (B.6) simplifies to\n\u0005xi \u00b7 \u0005xj = degB(xi, xj) \u2212 d(degB(xi) + degB(xj)) + d2w. (B.7)\nIf {xi, xj} \u2208 D, then omitting the negative terms in the equation above yields\n\u0005xi \u00b7 \u0005xj \u0002 degB(xi, xj) + d2w. (B.8)\nIf {xi, xj} \u000f\u2208 D, then degB(xi) \u0001 (1 \u2212 \u03b4\u02dc)dw, degB(xj) \u0001 (1 \u2212 \u03b4\u02dc)dw, and degB(xi, xj) <\n(1 + \u03b4\u02dc)d2w. Consequently, for such a pair {xi, xj} we get\n\u0005xi \u00b7 \u0005xj \u0002 (1 + \u03b4\u02dc)d2w \u2212 2d(1 \u2212 \u03b4\u02dc)dw + d2w < 3\u03b4\u02dcd2w. (B.9)\n412 Y. Peng, V. Ro\u00a8dl and J. Skokan\nSince |D| < \u03b4\u02dcu2 and \u2211{xi,xj}\u2208D degB(xi, xj) \u0002 \u03b4\u02dcd2u2w, we have\n2\n\u2211\n1\u0001i<j\u0001u\u2032\n\u0005xi \u00b7 \u0005xj =2\n\u2211\n{xi,xj}\u2208D\n\u0005xi \u00b7 \u0005xj + 2\n\u2211\n{xi,xj}\u000f\u2208D\n\u0005xi \u00b7 \u0005xj\n(B.8), (B.9)\n\u0002 2\n\u2211\n{xi,xj}\u2208D\n(degB(xi, xj) + d2w) + 2u2 \u00d7 3\u03b4\u02dcd2w\n\u0002 10\u03b4\u02dcu2d2w. (B.10)\nCombining (B.5) and (B.10) yields\u2225\u2225\u2225\u2225 u\n\u2032\u2211\ni=1\n\u0005xi\n\u2225\u2225\u2225\u22252 \u0002 u\u2032w + 10\u03b4\u02dcd2u2w.\nHence equation (B.4) becomes\n(|E \u2032| \u2212 du\u2032w\u2032)2 < w\u2032(u\u2032w + 10\u03b4\u02dcd2u2w).\nTherefore, \u2223\u2223\u2223\u2223 |E \u2032|u\u2032w\u2032 \u2212 d\n\u2223\u2223\u2223\u2223 <\n(\nw\nu\u2032w\u2032\n+\n10\u03b4\u02dcd2u2w\nu\u20322w\u2032\n)1\/2\n.\nSince u\u2032 \u0001 \u03b4\u2032u and w\u2032 \u0001 \u03b4\u2032w, we have\u2223\u2223\u2223\u2223 |E \u2032|u\u2032w\u2032 \u2212 d\n\u2223\u2223\u2223\u2223 <\n(\n1\n\u03b4\u20322u\n+\n10\u03b4\u02dcd2\n\u03b4\u20323\n)1\/2\n.\nRecall that u = |U| \u0001 1\/(d2\u03b4\u02dc) and \u03b4\u2032 = (11\u03b4\u02dc)1\/5, therefore\u2223\u2223\u2223\u2223 |E \u2032|u\u2032w\u2032 \u2212 d\n\u2223\u2223\u2223\u2223 <\n(\n11\u03b4\u02dcd2\n\u03b4\u20323\n)1\/2\n< \u03b4\u2032.\nHence, we have proved that\nd(U \u2032,W \u2032) = (1 \u00b1 \u03b4\u2032)d,\nwhich completes the proof of Lemma 8.8.\nAcknowledgement\nWe would like to thank Andrzej Rucin\u00b4ski, Brendan Nagle and the referee for their\nvaluable comments.\nReferences\n[1] Alon, N., Duke, R., Lefmann, H., Ro\u00a8dl, V. and Yuster, R. (1994) The algorithmic aspects of the\nregularity lemma. J. Algorithms 16 80\u2013109.\n[2] Dementieva, Y., Haxell, P., Nagle, B. and Ro\u00a8dl, V. (2002) On characterizing hypergraph regularity.\nRandom Struct. Alg. 21 293\u2013335.\n[3] Duke, R., Lefmann, H. and Ro\u00a8dl, V. (1995) A fast approximation algorithm for computing the\nfrequencies of subgraphs in a given graph. SIAM J. Comput. 24 598\u2013620.\nCounting Small Cliques in 3-uniform Hypergraphs 413\n[4] Frankl, P. and Ro\u00a8dl, V. (2002) Extremal problems on set systems. Random Struct. Alg. 20\n131\u2013164.\n[5] Janson, S, \u0004Luczak, T. and Rucin\u00b4ski, A. (2000) Random Graphs, Wiley-Interscience Series in\nDiscrete Mathematics and Optimization, Wiley-Interscience, New York.\n[6] Kohayakawa, Y., Ro\u00a8dl, V. and Skokan, J. (2002) Hypergraphs, quasi-randomness, and conditions\nfor regularity. J. Combin. Theory Ser. A 97 307\u2013352.\n[7] Nagle, B. and Ro\u00a8dl, V. (2003) Regularity properties for triple systems. Random Struct. Alg. 23\n264\u2013332.\n[8] Peng, Y. (2001) Counting small cliques in 3-uniform hypergraphs. PhD Thesis, Emory University\n(available at http:\/\/www.mathcs.emory.edu\/\u223crodl\/grads.html).\n[9] Szemere\u00b4di, E. (1978) Regular partitions of graphs. In Proble`mes Combinatoires et The\u00b4orie des\nGraphes (Colloq. Internat. CNRS, Univ. Orsay, Orsay, 1976), Vol. 260 of Colloq. Internat. CNRS,\nCNRS, Paris, pp. 399\u2013401.\n"}